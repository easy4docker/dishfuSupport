{"version":3,"sources":["modules/common/DisplayRecipe.js","modules/common/IpfsDoc.js","modules/common/Cache/CacheLocalStorage.js","modules/common/Cache/CacheWindow.js","modules/common/Cache/index.js","modules/common/StarRating.js","modules/common/Messagebox.js","stores/DataStore.js","stores/SettingStore.js","modules/common/RoleSection.js","modules/common/Loading.js","modules/common/Engine.js","modules/common/IPFSEngine.js","modules/common/FingerPrinter.js","modules/common/AddressInput.js","modules/common/InfoHeader.js","modules/common/Logo.js","modules/common/IPFSImg.js","modules/shoppingCart/ShoppingCnt.js","modules/shoppingCart/AddOrder.js","modules/shoppingCart/MyCartList.js","modules/shoppingCart/ShoppingCartOprator.js","modules/shoppingCart/ShoppingCartWatcher.js","modules/mobileAuth/AuthHeadItem.js","modules/mobileAuth/AuthBody.js","modules/mobileAuth/MobileAuth.js","modules/mobileAuth/InfoCatch.js","modules/mobileAuth/ScanSignin.js","modules/Header.js","modules/Footer.js","modules/workshop/recipes/RecipeList.js","modules/workshop/recipes/RecipeSection.js","modules/workshop/recipes/RecipeEdit.js","modules/setting/Setting.js","modules/tpl/MenuItem.js","modules/menu/Items.js","modules/content/About.js","modules/content/Contact.js","modules/content/Home.js","modules/content/ComingSoon.js","modules/community/CommunityList.js","modules/community/CommunitySection.js","modules/community/CommunityResponse.js","modules/workshop/OperationSection.js","modules/workshop/plates/PlateList.js","modules/workshop/plates/PlateSection.js","modules/workshop/plates/EditPlate.js","modules/workshop/Workshop.js","modules/Orders/MyOrders.js","modules/Orders/OrderItem.js","modules/Orders/OrderInfo.js","modules/application/becomeFoodie.js","modules/application/becomeSupie.js","modules/Body.js","App.js","reportWebVitals.js","index.js"],"names":["DisplayRecipe","props","useState","record","setRecord","showPhotoList","photos","g","map","o","k","IPFSImg","ipfs","isCache","className","recordPhotos","rec","group","v","useEffect","Container","fluid","style","name","fontSize","id","ingredients","text","cooking","showRecrd","IpfsDoc","doc","setDoc","ipfsEngine","IPFSEngine","tpl","a","promiseIpfsJSON","x","CacheLocalStorage","lifeTime","getCachedCode","arr","localStorage","getItem","JSON","parse","e","setCachedCode","setItem","stringify","cleanOld","Date","getTime","removeItem","cleanNotInArr","code","setCache","data","getCache","getIsCachedCode","cleanOldIsCache","setIsCachedCode","setIsCaching","getIsCaching","this","CacheWindow","window","document","_cachedCode","_isCachedCode","Cache","Ins","toLowerCase","StarRating","value","readOnly","React","parseInt","rating","setRating","selection","setSelection","Star","marked","starId","role","hoverOver","event","val","target","getAttribute","Array","from","length","i","onMouseOut","onClick","onMouseOver","Mssagebox","message","title","textTransform","_sections","DataStore","createStore","state","recipes","plates","orders","menus","focuses","LastAction","action","type","section","indexOf","toString","push","idx","findIndex","splice","count","composeWithDevTools","console","log","location","hostname","_defaultSetting","ready","loading","screenModel","_watcher","fp","roles","operationRole","auth","AuthInfo","allRoles","desc","description","config","apiServer","webServer","sockerServer","ipfsServer","SettingStore","saveSettingApi","userInfo","authInfo","setTimeout","callback","fpPromise","FingerprintJS","load","get","fpRecord","storageName","visitorId","loadSettingApi","dispatch","RoleSection","exroles","comp","showException","myRoles","setMyRoles","Exroles","isection","filter","includes","exsection","loadMyRoles","getState","handleSubscribe","subscribe","compException","Messagebox","Loading","sts","setSts","Object","keys","Spinner","animation","size","Engine","prop","loadingOn","loadingOff","fetchApi","cfg","me","fetch","url","then","json","jsonData","err","status","catch","error","setOperationRole","saveLocalRecord","dt","DatabaseApi","apiCode","server","method","body","headers","loadStorageData","data0","defaultData","getStorageData","Promise","resolve","reject","downloadUri","res","promiseIpfsText","getIpfsAsync","getIpfJsonsAsync","promisePullQ","Q","promiseQ","publishCode","recipe","all","values","p","promiseSave","ipfsCache","_cacheExist","IPFS","host","uploadSVR","port","protocol","protocal","secs","ses","s","j","base64","add","promisePublish","code_record","FingerPrinter","result","AddressInput","defaultValue","inputAddress","setInputAddress","validAddress","setValidAddress","isValid","setIsValid","focused","setFocused","capitalize","str","charAt","toUpperCase","slice","upcase","formatedAddress","street_address1","city","postal_code","country","replace","verifyAddress","parser","passAddress","Form","Group","Control","required","placeholder","as","rows","onChange","onFocus","onBlur","Text","Row","Col","sx","InfoHeader","Navbar","expand","Brand","href","Logo","color","setBase64","loadIPFS","Image","src","alt","ShoppingCnt","engine","cnt","setCnt","getOrderCount","shppingHandle","icon","faShoppingCart","Badge","position","top","AddOrder","Button","MyOrdersList","ShoppingCartOprator","item","order","operater","faMinus","faPlus","faTrashAlt","variant","caption","price","ShoppingCartWatcher","changed","AuthHeadItem","isAuth","setIsAuth","faUnlockAlt","faQrcode","AuthBody","qr","setQr","sockedId","setSockedId","SOCKET_URL","setAuthInfo","getAuthInfo","socket","socketClient","connect","on","fromSocket","signInTime","saveAuthInfo","disconnect","QRCode","toDataURL","width","quality","dark","light","authPage","infoPage","Alert","Heading","address","join","toLocaleDateString","MobileAuth","SocketID","useParams","success","setSuccess","isContinue","setIsContinue","Frame","info","warningPage","authCode","emit","unAuthentication","InfoCatch","InfoCode","ScanSignin","RequestID","inComeInfo","setIncomeInfo","cAuth","approveSignin","ComingInfoSection","errorPage","stopContinuePage","successPage","itIsAuthedPage","Header","expanded","setExpanded","navItem","design","linkTo","focus","foodie","exrole","supie","SelectedClass","useLocation","pathname","getNavLink","itemRole","itemExRole","Nav","Link","to","Toggle","Collapse","Footer","Year","getFullYear","RecipeList","items","setItems","list","loadList","key","faEdit","maxWidth","RecipeSection","inputFileHandle","useRef","handleFileChange","files","convertBase64","syncRec","removePhoto","file","fileReader","FileReader","readAsDataURL","onload","onerror","callParent","handleTextChange","InputGroup","hidden","ref","isdelete","removeSection","current","click","faPaperclip","fa","faTimesCircle","RecipeEdit","setTm","recipeCode","history","useHistory","userId","referenceCode","exit","save","publish","docType","publisher","resetIdx","onNameChange","height","overflowY","overflowX","inline","controlId","xs","align","faSave","faUpload","faUndo","Setting","myRole","setMyRole","setUserInfo","changeRole","faCheck","faTimes","Label","MenuItem","textAlign","v1","v2","getImages","maxHeight","objectFit","getContents","published","MenuItems","About","Contact","Home","promotion","poster","preload","autoPlay","loop","muted","lineHeight","faEgg","marginBottom","minHeight","ComingSoon","param","CommunityList","deleteRecord","publishPlate","bg","parent","CommunitySection","faArrowCircleRight","created","toISOString","CommunityResponse","new_data","ipfsCode","DesignHead","sort","b","showDesc","myR","loadRoles","opertionAsLink","PlateList","PlateSectioon","EditPlate","PlateSection","Workshop","tm","OperationSection","MyOrder","myList","MyCartList","setList","getList","OrderItem","itemCode","processData","version","OrderInfo","setPhotos","setContent","BecomeFoodie","setAddress","setDescription","phone","setPhone","submitApplication","onDescriptionChanged","onPhoneChanged","patt","test","disabled","faSearch","BecomeSupie","qualification","setQualification","onQualificationChanged","faCloudUploadAlt","Body","exact","path","MyOrders","App","loadReady","setloadReady","isDesktopOrLaptop","useMediaQuery","query","isBigScreen","isTabletOrMobile","isPortrait","isRetina","pageLoading","pageReady","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.7932e8f7.chunk.js","sourcesContent":["import React , {useState, useEffect} from 'react';\nimport { Container } from 'react-bootstrap';\nimport { IPFSImg } from '.';\n\nfunction DisplayRecipe(props) {\n  const [record, setRecord] = useState(null);\n\n  const showPhotoList = (photos, g) => {\n    return  photos.map((o, k)=>(<IPFSImg ipfs={o.ipfs} isCache={true}  key={k}  \n      className=\"m-1 bg-secondary iconsImage\"/>))\n  }\n  const recordPhotos = (rec, group) => {\n    let photos = [];\n    if (rec[group]) {\n      rec[group].map((v)=> {\n        photos = [...photos, ...v.photos];\n        return true;\n      })\n    }\n    return photos;\n  }\n\n  useEffect(()=> { \n    setRecord(props.record);\n  },[]);\n  const showRecrd = (record) => {\n    return (!record) ? '==': (<Container fluid={true} className={props.className} style={props.style}>\n        <div className=\"p-0\">\n          \n            <p className=\"p-0 pl-0 m-1\">\n              <b>{record.name}</b>\n\n              <br/>\n              <span><i style={{fontSize:'0.8rem'}}>Record id-: {record.id}, Publisher </i></span>\n            </p>\n            <p className=\"text-secondary p-1 pl-2 m-0\">\n              <i className=\"text-primary\">Ingredients:</i> \n              {record.ingredients.map((v, k)=>{  return v.text })}\n              <br/>\n              {showPhotoList(recordPhotos(record, 'ingredients'))}\n            </p>\n            <p className=\"text-secondary p-1 pl-2 m-0\">\n              <i className=\"text-primary\">Instruction:</i> \n              {record.cooking.map((v, k)=>{  return v.text })}\n              <br/>\n              {showPhotoList(recordPhotos(record, 'cooking'))}\n            </p>\n            <p className=\"text-secondary p-1 pl-2 m-0\">\n              <span className=\"text-secondary mr-2\">Published:</span>\n            </p>\n        </div>\n        <div className=\"clearfix p-0 m-0\"></div>\n      </Container>)\n  }\n  return showRecrd(record);\n}\nexport default DisplayRecipe;\n","import {useState, useEffect} from 'react';\nimport {  IPFSEngine } from '../common';\n\nfunction IpfsDoc(props) {\n  const [doc, setDoc] = useState(null);\n  const ipfsEngine = new IPFSEngine();\n  // const [tm, setTm] = useState(0);\n  const tpl = props.tpl;\n  useEffect(()=> {\n    (async ()=> {\n      const x = await ipfsEngine.promiseIpfsJSON(props.ipfs)\n      // const x = await loadIpfs();\n      setDoc(x);\n      // setTm(new Date().getTime());\n    })();\n  }, []);\n  return (!doc)? props.ipfs : tpl({record:doc, className: props.className, style:props.style})\n}\nexport default IpfsDoc;\n","class CacheLocalStorage {\n    constructor(lifeTime) {\n        this.lifeTime = (!lifeTime) ? 30000 :lifeTime;\n    }\n    getCachedCode = ()=> {\n        let arr = {};\n        try {\n            const v = localStorage.getItem('cachedCode');\n            arr =  (!v) ? {} : JSON.parse(v);\n        } catch (e) {}\n        return arr;\n    }\n    setCachedCode = (arr)=> {\n        localStorage.setItem('cachedCode', JSON.stringify(arr));\n    }\n    cleanOld = () => {\n        const arr = this.getCachedCode();\n        for (let o in arr) {\n            if (new Date().getTime() - arr[o] > this.lifeTime) {\n                delete arr[o];\n                localStorage.removeItem(o);\n            }\n        }\n        this.setCachedCode(arr);\n    }\n    cleanNotInArr = (code)=>{\n        const arr = this.getCachedCode();\n        if (!arr[code]) {\n            localStorage.removeItem(code);\n        }\n    }\n    setCache = (code, data)=> {\n        const arr = this.getCachedCode();\n        localStorage.setItem(code, data);\n        arr[code] = new Date().getTime();\n        this.setCachedCode(arr);\n    }\n    getCache = (code)=> {\n        this.cleanOld();\n        this.cleanNotInArr(code);\n        return localStorage.getItem(code);\n    }\n\n    /* --- iscache section ---*/\n    getIsCachedCode = ()=> {\n        let arr = {};\n        try {\n            const v = localStorage.getItem('IsCachedCode');\n            arr =  (!v) ? {} : JSON.parse(v);\n        } catch (e) {}\n        return arr;\n    }\n\n    cleanOldIsCache = () => {\n        const arr = this.getIsCachedCode();\n        for (let o in arr) {\n            if (new Date().getTime() - arr[o] > this.lifeTime) {\n                delete arr[o]; \n            }\n        }\n        this.setIsCachedCode(arr);\n    }\n\n    setIsCachedCode = (arr)=> {\n        localStorage.setItem('isCachedCode', JSON.stringify(arr));\n    }\n    \n    setIsCaching = (code)=> {\n        const arr = this.getIsCachedCode();\n        arr[code] = new Date().getTime();\n        this.setIsCachedCode(arr);\n    }\n    getIsCaching = (code)=> {\n        this.cleanOldIsCache();\n        const arr = this.getIsCachedCode();\n        return (arr[code]) ? true : false;\n    }\n}\nexport default CacheLocalStorage;\n","class CacheWindow {\n    constructor(lifeTime) {\n        this.lifeTime = (!lifeTime) ? 60000 :lifeTime;\n    }\n    getCachedCode = ()=> {\n        return (!window.document._cachedCode) ? {} : window.document._cachedCode;\n    }\n    setCachedCode = (arr)=> {\n        window.document._cachedCode = arr;\n    }\n    cleanOld = () => {\n        const arr = this.getCachedCode();\n        for (let o in arr) {\n            if (new Date().getTime() - arr[o] > this.lifeTime) {\n                delete arr[o];\n                delete window.document['__'+o];\n            }\n        }\n        this.setCachedCode(arr);\n    }\n    setCache = (code, data)=> {\n        const arr = this.getCachedCode();\n        window.document['__'+code] = data;\n        arr[code] = new Date().getTime();\n        this.setCachedCode(arr);\n    }\n    getCache = (code)=> {\n        this.cleanOld();\n        return window.document['__'+code];\n    }\n\n    /* --- iscache section ---*/\n    getIsCachedCode = ()=> {\n        return (!window.document._isCachedCode) ? {} : window.document._isCachedCode;\n    }\n\n    cleanOldIsCache = () => {\n        const arr = this.getIsCachedCode();\n        for (let o in arr) {\n            if (new Date().getTime() - arr[o] > this.lifeTime) {\n                delete arr[o]; \n            }\n        }\n        this.setIsCachedCode(arr);\n    }\n\n    setIsCachedCode = (arr)=> {\n        window.document._isCachedCode = arr;\n    }\n    \n    setIsCaching = (code)=> {\n        const arr = this.getIsCachedCode();\n        arr[code] = new Date().getTime();\n        this.setIsCachedCode(arr);\n    }\n    getIsCaching = (code)=> {\n        this.cleanOldIsCache();\n        const arr = this.getIsCachedCode();\n        return (arr[code]) ? true : false;\n    }\n}\nexport default CacheWindow;\n","import CacheLocalStorage from './CacheLocalStorage';\nimport CacheWindow from './CacheWindow';\n\nclass Cache {\n    constructor(code, lifeTime) {\n        switch (code.toLowerCase()) {\n            case 'localstorage': \n                this.Ins = new CacheLocalStorage(lifeTime);\n                break;\n            case 'window': \n                this.Ins = new CacheWindow(lifeTime);\n                break;\n            default:\n                this.Ins = null;\n        }\n    }\n    setCache = (code, data)=> {\n        if (this.Ins) this.Ins.setCache(code, data);\n    }\n    getCache = (code)=> {\n        return (!this.Ins) ? null : this.Ins.getCache(code);\n    }\n    \n    setIsCaching = (code)=> {\n        if (this.Ins) this.Ins.setIsCaching(code);\n    }\n\n    getIsCaching = (code)=> {\n        return (!this.Ins) ? null : this.Ins.getIsCaching(code);\n    }\n}\nexport default Cache;\n","import React from 'react';\n\nconst StarRating = ({ value, readOnly }) => {\n  const [rating, setRating] = React.useState(parseInt(value, 10) || 0);\n  const [selection, setSelection] = React.useState(0);\n\n  const Star = ({ marked, starId }) => { //'\\u2606'\n    return (\n      <span data-star-id={starId} className=\"star\" role=\"button\">\n        {marked ? '\\u2605' : '\\u2606'}\n      </span>\n    );\n  };\n\n  const hoverOver = event => {\n  let val = 0;\n    if (event && event.target && event.target.getAttribute('data-star-id'))\n    val = event.target.getAttribute('data-star-id');\n    setSelection(val);\n  };\n  return (!readOnly) ? (\n    <div\n      onMouseOut={() => hoverOver(null)}\n      onClick={e => setRating(e.target.getAttribute('data-star-id') || rating)}\n      onMouseOver={hoverOver}\n    >\n      {Array.from({ length: 5 }, (v, i) => (\n        <Star\n          starId={i + 1}\n          key={`star_${i + 1}`}\n          marked={selection ? selection >= i + 1 : rating >= i + 1}\n        />\n      ))}\n    </div>\n  ) : (\n    <div>\n      {Array.from({ length: 5 }, (v, i) => (\n        <Star\n          starId={i + 1}\n          key={`star_${i + 1}`}\n          marked={selection ? selection >= i + 1 : rating >= i + 1}\n        />\n      ))}\n    </div>\n  );\n};\nexport default StarRating;\n","import React from 'react';\nimport { Container } from 'react-bootstrap';\n\nconst Mssagebox = ({ message, title, className }) => {\n  return (<Container className={className + ' rounded p-3 message-box grid-bg'}>\n      <b style={{textTransform: 'capitalize'}}>{title}</b>\n      <h3 className=\"text-secondary m-3 p-3\">{message}</h3>\n    </Container>);\n};\nexport default Mssagebox;\n","import { createStore } from 'redux';\nimport { composeWithDevTools } from 'redux-devtools-extension';\n\nconst _sections = ['recipes', 'plates', 'orders', 'menus', 'focuses'];\nconst reducer = (state = {data: {recipes:[], plates:[], orders:[], menus:[], focuses:[]}, LastAction:null}, action) => {\n  state.LastAction = action.type;\n  const section = (_sections.indexOf(action.section) === -1) ? null : action.section;\n  switch(action.type) {\n    case 'updateLocal':\n    case 'updateApi':\n      if (section) {\n        if (action.data.id === 'new') {\n            action.data.id = new Date().getTime().toString();\n            state.data[section].push(action.data);\n        } else {\n            const idx = state.data[section].findIndex((v)=> v.id === action.data.id);\n            state.data[section][idx] = action.data;\n        }\n        localStorage.setItem('localData', JSON.stringify(state.data));\n      }\n      return state;\n    case 'deleteLocal':\n    case 'deleteApi':\n      if (section) {\n          const idx = state.data[section].findIndex((v)=>  v.id === action.data.id);\n          if  (idx !== -1 ) state.data[section].splice(idx, 1);\n          localStorage.setItem('localData', JSON.stringify(state.data));\n      }\n      return state;\n  \n    case 'publishPlate':\n      const idx = state.data.focuses.findIndex((v)=>  v.id === action.data.id);\n      if  (idx !== -1 ) {\n        delete state.data.focuses[idx].data;\n        // state.data.menus = [state.data.focuses[idx]]\n        state.data.menus.push(state.data.focuses[idx]);\n        state.data.focuses.splice(idx, 1);\n      }\n      localStorage.setItem('localData', JSON.stringify(state.data));\n      return state;\n\n    case 'loadLocal':\n    case 'loadApi':\n      state.data = action.data;\n      return state;\n    case 'publish':\n      \n      action.data.id = new Date().getTime().toString();\n      state.data.focuses.push(action.data);\n      localStorage.setItem('localData', JSON.stringify(state.data));\n      return state;\n\n    case 'addShoppingCartItem':\n      state.LastAction = 'shopping';\n      ((state)=>{\n        const idx = state.data.orders.findIndex((v)=>  v.code === action.data.code);\n        if  (idx === -1 ) {\n          state.data.orders.push({code: action.data.code, count: 1});\n        } else {\n          state.data.orders[idx].count = state.data.orders[idx].count + 1;\n        }\n        localStorage.setItem('localData', JSON.stringify(state.data));\n      })(state)\n      return state;\n\n    case 'updateShoppingCartItem':\n      state.LastAction = 'shopping';\n      return ((state)=>{\n        const idx = state.data.orders.findIndex((v)=>  v.code === action.data.code);\n        if  (idx !== -1 ) {\n          state.data.orders[idx].count = (action.data.count >= 0) ? action.data.count : state.data.orders[idx].count;\n        } \n        localStorage.setItem('localData', JSON.stringify(state.data));\n        return state;\n      })(state)\n\n    case 'removeShoppingCartItem':\n      state.LastAction = 'shopping';\n      return ((state)=>{\n        const idx = state.data.orders.findIndex((v)=> v.code === action.data.code);\n        if  (idx !== -1 )  state.data.orders.splice(idx, 1);\n        localStorage.setItem('localData', JSON.stringify(state.data));\n        return state;\n      })(state)\n\n    case 'initShoppingCart':\n      state.LastAction = 'shopping';\n      return ((state)=>{\n        state.data.orders = [];\n        localStorage.setItem('localData', JSON.stringify(state.data));\n        return state\n      })(state)\n\n    default:\n      return state;\n  }\n};\nconst DataStore = createStore(reducer, composeWithDevTools());\n\nexport default DataStore;\n","import { createStore } from 'redux';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport  FingerprintJS  from '@fingerprintjs/fingerprintjs'\n\nconsole.log('window.location.hostname-->', window.location.hostname);\nconst _defaultSetting = {ready: false, loading: {}, screenModel:{}, _watcher:'',\n      fp : '1234',\n      data : {roles:[], operationRole:'', screenModel:{}, auth:false, AuthInfo: {}},\n      allRoles : [\n        {id:1, code:'foodie', desc:'Foodie', description:'Foodie'},\n        {id:2, code:'supie', desc: 'Food supplier', description:'Food supplier / Restaurent / Grocery'}\n      ],\n      config: {\n        apiServer     : 'http://192.168.86.126:3001',\n        webServer     : 'http://192.168.86.126:3000',\n        sockerServer  : 'http://192.168.86.126:3001/dishFu',\n        ipfsServer    :  \"//gateway.ipfs.io/ipfs/\"\n      }\n  };\n\nconst reducer = (state = _defaultSetting, action) => {\n  state._watcher = '';\n  switch(action.type) {\n    /* --- Api action --> */\n    case 'saveRoles':\n      state.data.roles = action.roles;\n      state._watcher = 'role';\n      saveSettingApi(state.data);\n      return state;\n\n    case 'saveUserInfo':\n      state.data.userInfo = action.userInfo;\n      \n      saveSettingApi(state.data);\n      return state;\n\n    case 'saveAuthInfo':\n      state.data.authInfo = {...action.data};\n      delete state.data.authInfo.auth;\n      state.data.auth = action.data.auth;\n      state.data.roles = (!action.data || !action.data.roles) ? [] : action.data.roles;\n      state._watcher = 'auth';\n      saveSettingApi(state.data);\n      return state;\n\n\n    case 'updateOperationRole':\n      state._watcher = 'role';\n      state.data.operationRole = action.operationRole;\n      saveSettingApi(state.data);\n      return state;\n\n    /* --- None api action  --> */\n    case 'loadScreenModel':\n      state.screenModel = action.screenModel;\n      return state;\n\n    case 'addLoading':\n      state._watcher = 'loading';\n      state.loading[action.id] = new Date().getTime();\n      return state;\n    case 'removeLoading':\n      state._watcher = 'loading';\n      delete state.loading[action.id];\n      return state;\n\n    case 'initStore':\n      state.data = action.data;\n      state._watcher = 'afterInit';\n      return state;\n\n    default:\n      return state;\n  }\n};\nconst SettingStore = createStore(reducer, composeWithDevTools());\n\n/* --- simulated api ----> */\n\nconst loadSettingApi = async (callback) =>{\n  const fpPromise = FingerprintJS.load();\n  const fp = await fpPromise\n  const fpRecord = await fp.get()\n  setTimeout(\n    ()=>{\n      const storageName = 'localSettingData';\n      let v = _defaultSetting.data;\n      try {\n        v.visitorId = fpRecord.visitorId;\n        v = (!localStorage.getItem(storageName)) ? _defaultSetting.data : JSON.parse(localStorage.getItem(storageName))\n      } catch(e) {}\n      if (typeof callback === 'function') {\n        callback(v);\n      }\n    }, 200\n  );\n}\nconst saveSettingApi = (data) =>{\n  setTimeout(\n    ()=>{\n      localStorage.setItem('localSettingData',  JSON.stringify(data));\n    }, 500\n  );\n}\n\n/* <--- simulated api */\n\n\nloadSettingApi((data)=>{\n  SettingStore.dispatch({\n    type: 'initStore',\n    data : data\n  });\n});\n\n\n\nexport default SettingStore;\n","import React, {useState, useEffect} from 'react';\nimport { SettingStore } from \"../../stores\";\nimport { Messagebox } from \"../common\";\n\nfunction RoleSection({roles, exroles, comp, showException}) {\n  const [myRoles, setMyRoles] = useState([]);\n  const Exroles = (!exroles) ? [] : exroles;\n  \n  const isection = roles.filter(x => [...myRoles, 'all'].includes(x));\n  const exsection  = Exroles.filter(x => [...myRoles].includes(x));\n  \n  const loadMyRoles = () => {\n    setMyRoles( (!SettingStore.getState().data.authInfo || !SettingStore.getState().data.authInfo.roles) ? \n      [] : SettingStore.getState().data.authInfo.roles\n    );\n  }\n  useEffect(()=> {\n    const handleSubscribe =  SettingStore.subscribe(() => {\n        if (SettingStore.getState()._watcher === 'role' || SettingStore.getState()._watcher === 'auth') {\n          loadMyRoles();\n        }\n    });\n    loadMyRoles();\n    return ()=> {\n      handleSubscribe();\n    }\n  }, []);\n\n  const compException = (<div className=\"p-3\"><Messagebox message=\"Missing required roles\" /></div>)\n  return  (!isection.length || !!exsection.length) ? ((!showException) ? '' : compException) : comp\n}\nexport default RoleSection;\n","import React, { useState, useEffect} from 'react';\nimport { Spinner } from 'react-bootstrap';\nimport { SettingStore } from '../../stores/';\n\nfunction Loading() {\n  const [ sts, setSts] = useState(0);\n\n  useEffect(()=>{\n    const handleSubscribe = SettingStore.subscribe(() => {\n      if (SettingStore.getState()._watcher === 'loading') {\n         setSts(Object.keys(SettingStore.getState().loading).length);\n      }\n    });\n    return ()=> {\n      handleSubscribe();\n    }\n\n  },[]);\n  \n  return (\n  <div className={(sts) ? 'loading' : 'no-loading'}>\n      <Spinner animation=\"border\" size=\"md\" className=\"loading-text\"/>\n  </div>\n  )\n}\nexport { Loading }\n","import { SettingStore, DataStore } from '../../stores';\n\nclass Engine {\n    constructor(prop) {\n        this.id = new Date().getTime();\n        this.defaultData = {recipes:[], plates:[], orders:[], menus:[], focuses:[]};\n        this.server = SettingStore.getState().config.apiServer;\n    }\n    loadingOn = ()=> {\n        SettingStore.dispatch({type:'addLoading', id: this.id});\n    }\n    loadingOff = ()=> {\n        SettingStore.dispatch({type:'removeLoading', id: this.id});\n    }\n    fetchApi = async (cfg, callback)=>{\n        this.loadingOn();\n        const me = this;\n        fetch(cfg.url, {}).then((v)=> {\n            return v.json()\n        }).then((jsonData, err)=>{\n            if (jsonData.status === 200) {\n                me.loadingOff();\n                callback(jsonData.data);\n            } else {\n                me.loadingOff();\n            }\n        }).catch((error)=> {\n            me.loadingOff();\n          });;\n    }\n\n    setOperationRole = (role)=>{\n        SettingStore.dispatch({\n            type: 'updateOperationRole',\n            operationRole: role\n        });\n    }\n\n    saveLocalRecord = (dt, callback)=>{\n        const me = this;\n        me.loadingOn();\n        setTimeout(()=>{\n            DataStore.dispatch(dt);\n            setTimeout(()=> {\n                callback(DataStore.getState().data);\n                me.loadingOff();\n            }, 100)\n            \n        }, 3000)\n     }\n     saveLocalRecord = (dt, callback)=>{\n        const me = this;\n        me.loadingOn();\n        setTimeout(()=>{\n            DataStore.dispatch(dt);\n            setTimeout(()=> {\n                callback(DataStore.getState().data);\n                me.loadingOff();\n            }, 100)\n            \n        }, 3000)\n     }\n     DatabaseApi = (apiCode, dt, callback)=>{\n        const me = this;\n        fetch(me.server + '/api/' + apiCode, {\n            method: 'POST',\n            body: JSON.stringify(dt),\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            }\n        }).then(v=>v.json()).then((data)=> {\n            callback(data);\n        }).catch((err) => {\n            callback(err);\n        });\n     }\n\n    loadStorageData = (cfg, callback)=>{\n        const me = this;\n        this.loadingOn();\n        let data0 = this.defaultData;\n        try {\n            data0 =  (!localStorage.getItem('localData')) ? this.defaultData : JSON.parse(localStorage.getItem('localData'));\n        } catch (e) {}\n\n        DataStore.dispatch({\n            type: 'loadLocal',\n            data : data0\n        });\n        me.loadingOff();\n        callback();\n        return true;\n    }\n\n    getStorageData = (cfg, callback)=>{\n        const me = this;\n        const data = DataStore.getState();\n        me.loadingOff();\n        callback(data.data);\n        return true;\n    }\n}\n\nexport default Engine;","import Cache   from './Cache';\nimport IPFS from 'ipfs-mini';\nimport { SettingStore } from '../../stores';\n\nclass IPFSEngine {\n    constructor(prop) {\n        this.downloadUri = SettingStore.getState().config.ipfsServer;\n        this.uploadSVR = {\n            host: 'ipfs.infura.io',\n            port:5001,\n            protocal: 'https'\n        }\n        this.ses = ['cooking', 'ingredients', 'plates'];\n    }  \n    promiseIpfsJSON = async (code)=> {\n      return new Promise((resolve, reject) => {\n        fetch(this.downloadUri +code)\n        .then(res => {\n          return res.json()\n        })\n        .then(\n          (data) => {\n            resolve(data);\n          },\n          (err) => {\n            reject(err);\n            console.log('err=>', err);\n          }\n        )\n      });\n    } \n    promiseIpfsText = async (code)=> {\n      return new Promise((resolve, reject) => {\n        fetch(this.downloadUri +code)\n        .then(res => {\n          return res.text()\n        })\n        .then(\n          (data) => {\n            resolve(data);\n          },\n          (err) => {\n            reject(err);\n            console.log('err=>', err);\n          }\n        )\n      });\n    } \n    getIpfsAsync = async (code, callback)=> {\n      fetch(this.downloadUri +code)\n      .then(res => {\n        return res.text()\n      })\n      .then(\n        (data) => {\n          callback(data);\n        },\n        (err) => {\n          callback(false);\n        }\n      )\n    } \n    getIpfJsonsAsync = async (code, callback)=> {\n      fetch(this.downloadUri +code)\n      .then(res => {\n        return res.json()\n      })\n      .then(\n        (data) => {\n          callback(data);\n        },\n        (err) => {\n          callback(false);\n        }\n      )\n    } \n\n    promisePullQ = async (Q)=> {\n        const promiseQ = [];\n        for (let i=0; i < Q.length; i++) {\n            promiseQ[i] = new Promise((resolve, reject) => {\n            fetch(this.downloadUri +  Q[i].publishCode).then(v=>v.json()).then((data)=> {\n                Q[i].data = data;\n                resolve(Q[i]);\n            }).catch(err => { \n                reject('reject_' +  Q[i].recipe + '-'  + err.message);\n            });\n            });\n        }\n        const p = await Promise.all(promiseQ).then((values) => {\n            return values;\n        }).catch(error => {\n            console.error(error.message)\n            return [];\n        });\n        return p;\n    }\n    promiseSave = async (record)=> {\n        const ipfsCache = new Cache((document._cacheExist) ? 'window' : 'localStorage');\n        const ipfs = new IPFS({ host: this.uploadSVR.host, port: this.uploadSVR.port, protocol: this.uploadSVR.protocal });\n\n        const promiseQ = [];\n        const secs = this.ses;\n        \n        for (let s=0; s < secs.length; s++) {\n          const v = record[secs[s]];\n          if (v) {\n            for (let i=0; i < v.length; i++) {\n              for (let j=0; j < v[i].photos.length; j++) {\n                if (v[i].photos[j].base64) {\n                  \n                  const p = new Promise((resolve, reject) => {\n                    ipfs.add(v[i].photos[j].base64).then((code)=> {\n                      ipfsCache.setCache(code, v[i].photos[j].base64);\n                      v[i].photos[j] = { base64 :'', ipfs : code };\n                      resolve('resolve_' + secs[s] + '-' + code);\n                    }).catch(err => { \n                      reject('reject_' +  secs[s] + '-'  + err.message);\n                    });\n                  });\n                  promiseQ.push(p);\n                }\n              }\n            }\n          }\n        }\n        const p = await Promise.all(promiseQ).then((values) => {\n            return values;\n        }).catch(error => {\n            console.error(error.message)\n            return [];\n        });\n        return p;\n    }\n    promisePublish = async (record, callback)=> {\n        await this.promiseSave(record);\n        const ipfs = new IPFS({ host: this.uploadSVR.host, port: this.uploadSVR.port, protocol: this.uploadSVR.protocal });\n        ipfs.add(JSON.stringify(record)).then((code_record)=> {\n            callback(code_record);\n        });\n    }\n}\n\nexport default IPFSEngine;","import { SettingStore, DataStore } from '../../stores';\n// -- https://github.com/fingerprintjs/fingerprintjs\nimport  FingerprintJS  from '@fingerprintjs/fingerprintjs'\n\nclass FingerPrinter {\n    constructor(prop) {\n        this.visitorId = null;\n    }\n    load = async () => {\n        // Get the visitor identifier when you need it.\n        const fpPromise = FingerprintJS.load();\n        const fp = await fpPromise\n        const result = await fp.get()\n        \n        // This is the visitor identifier:\n        this.visitorId = result.visitorId\n        return this.visitorId;\n        console.log('a->', this.visitorId)\n    }\n}\n\nexport default FingerPrinter;","import React , { useState, useEffect } from 'react';\nimport { Form, Row, Col } from 'react-bootstrap';\nimport parser from 'parse-address-string';\n\nfunction AddressInput(props) {\n  const [inputAddress, setInputAddress] = useState(props.defaultValue);\n  const [validAddress, setValidAddress] = useState({});\n  const [isValid, setIsValid] = useState(false);\n  const [focused, setFocused] = useState(false);\n\n  const onAddressChange = (e)=> {\n    e.target.value = e.target.value\n    verifyAddress(e.target.value);\n  }\n  const onAddressBlur = (e)=> {\n    setFocused(false);\n    if (isValid) {\n      e.target.value=formatedAddress(validAddress);\n    } else {\n      e.target.value = '';\n    }\n    setInputAddress(formatedAddress(validAddress));\n  }\n  const capitalize = (str) => {\n    return !str? '' : str.charAt(0).toUpperCase() + str.slice(1)\n  }\n  const upcase = (str) => {\n    return !str? '' : str.toUpperCase()\n  }\n\n  const formatedAddress = (o) =>{\n    return (capitalize(o.street_address1)  +  ',' + capitalize(o.city) +  ',' + upcase(o.state) + ' ' + upcase(o.postal_code) +\n    upcase((o.country === 'USA') ? '' : o.country)).replace(/\\s+/ig, \" \");\n  }\n  const verifyAddress = (inputAddress)=> {\n    parser(inputAddress, function(err,o){\n      o.country = (!o.country) ? 'USA' : o.country;\n      setValidAddress(o)\n      if (!!o.street_address1 && !!o.city && !!o.postal_code && !!o.state && !err) {\n        props.passAddress(formatedAddress(o));\n        setIsValid(true);\n      } else {\n        props.passAddress('');\n        setIsValid(false);\n      }\n    })\n    return true;\n}\n  useEffect(()=> {\n   }, []);\n   return   (<Form.Group>\n      <Form.Control defaultValue={inputAddress} required placeholder=\"Input Your address\" as=\"textarea\" \n        rows=\"1\"\n        onChange={onAddressChange} \n        onFocus={()=>{ setFocused(true)}}\n        onBlur={onAddressBlur}\n        />\n      {(focused) && (<Form.Text className=\"p-3 mt-1 alert-secondary\">\n        <Row>\n          <Col sx={6} className=\"p-0 pl-2\">\n            Street Address: <b>{validAddress.street_address1}</b><br/>\n            City: <b>{validAddress.city}</b><br/>\n            {(isValid) ? (<span className=\"text-success\">Correct Format.</span>) : (<span  className=\"text-info\">Parsing ...</span>)}\n          </Col>\n          <Col sx={6}  className=\"p-0 pl-2\">\n            State: <b>{validAddress.state}</b><br/>\n            Postal: <b>{validAddress.postal_code}</b><br/>\n            Country: <b>{validAddress.country}</b><br/>\n          </Col>\n        </Row>  \n      </Form.Text>)}\n    </Form.Group>);\n}\n\nexport { AddressInput }","import React from 'react';\nimport { Navbar, Container } from 'react-bootstrap';\nimport { Logo } from '../common';\nfunction InfoHeader(props) {\n  return (\n    <Container className=\"bg-primary\" fluid={true}>\n      <Container>\n        <Navbar expand=\"lg\" className=\"p-1\">\n            <Navbar.Brand href=\"/\" ><Logo/></Navbar.Brand>\n            <Navbar.Brand className=\"menu-color\">\n              {props.comp}\n            </Navbar.Brand>\n        </Navbar>\n      </Container>\n    </Container>\n  )\n}\nexport { InfoHeader };\n","import React from 'react';\nfunction Logo() {\n  return (\n    <div className=\"border rounded p-1 m-0\" style={{color:'yellow', fontSize:'1.5rem'}}>\n    <span className=\"ml-1\" style={{fontSize:'1rem'}}>Dishfoodie</span>\n    </div>\n  )\n}\nexport { Logo };\n","import React , {useState, useEffect} from 'react';\nimport { IPFSEngine, Cache } from '../common';\nimport { Image } from 'react-bootstrap';\n\nfunction IPFSImg(props) {\n  const ipfsEngine = new IPFSEngine();\n\n  const ipfsCache = !props.isCache ?  new Cache('') : new Cache((document._cacheExist) ? 'window' : 'localStorage');\n  const [base64, setBase64] = useState('');\n\n  const loadIPFS = () => {\n    if (ipfsCache.getCache(props.ipfs)) {\n      setBase64(ipfsCache.getCache(props.ipfs));\n    } else {\n      if (!ipfsCache.getIsCaching(props.ipfs)) {\n        ipfsCache.setIsCaching(props.ipfs);\n        ipfsEngine.getIpfsAsync(props.ipfs, (data)=> {\n          if (data) {\n            setBase64(data);\n            ipfsCache.setCache(props.ipfs, data);\n          }\n        })  \n      } else {\n        setTimeout(loadIPFS, 100);\n      }\n    }\n  }\n  useEffect(()=> {\n    if (props.base64) {\n      setBase64(props.base64);\n    } else if (props.ipfs) {\n      loadIPFS();\n    }\n  }, []);\n  return (<Image src={!!base64 ? base64 : '/imgs/ipfs-caching.jpeg'} alt=\"uploaded File\" \n      className={props.className} style={props.style} />)\n}\nexport { IPFSImg };\n\n","\nimport React, {useEffect, useState} from 'react';\n\nimport { Badge } from 'react-bootstrap';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faShoppingCart } from '@fortawesome/free-solid-svg-icons'\nimport { DataStore } from '../../stores';\nimport { Engine } from '../common';\n\nfunction ShoppingCnt(props) {\n  const engine = new Engine();\n  const [cnt, setCnt] = useState(0);\n  \n  const getOrderCount = (orders)=> {\n    let cnt = 0;\n    for (let v in orders) {\n      cnt += (!orders[v] || !orders[v].count) ? 0 : orders[v].count;\n    }\n    setCnt(cnt);\n    return cnt;\n  }\n  useEffect(() => {\n    const shppingHandle = DataStore.subscribe(()=> {\n      if (DataStore.getState().LastAction === 'shopping') {\n        getOrderCount(DataStore.getState().data.orders);\n      }\n    });\n    engine.loadStorageData({}, ()=>{\n      getOrderCount(DataStore.getState().data.orders);\n    });\n    return ()=> {\n      shppingHandle();\n    }\n  }, []);\n\n  return (<span className={(props.className) ? props.className : 'text-light bg-primary'}>\n  <FontAwesomeIcon size=\"1x\" icon={faShoppingCart}/><Badge className=\"ml-1 alert-primary\" \n  style={{position:'relative', fontSize:'0.6rem', top:'-0.4rem'}}>{cnt}</Badge></span>);\n}\n\nexport default ShoppingCnt;\n","\nimport React, {useEffect, useState} from 'react';\nimport { Button } from 'react-bootstrap';\nimport { DataStore } from '../../stores';\n\nconst  AddOrder = (props) => {\n  const AddToOrders = ()=> {\n    DataStore.dispatch({\n      type: 'addShoppingCartItem',\n      data : { code : props.code, count: (!props.count) ? 1 :  props.count}\n    })\n  }\n  return  (\n    <Button onClick={ AddToOrders}>\n        Order\n    </Button>);\n}\n\nexport { AddOrder };\n","/*\nimport React, {useEffect, useState} from 'react';\nimport { DataStore } from '../../stores';\nimport { OrderDetails } from '../Orders'\n\nfunction MyOrdersList(props) {\n  const [list, setList] = useState([]);\n  const [tm, setTm] = useState(0);\n  useEffect(() => {\n    setList(DataStore.getState().data.orders);\n    setTm(new Date().getTime());\n  }, []);\n\n  return (<span>\n    {list.map((v, k)=> {\n      return (<span key={k}>{v.code}\n      -{tm}-\n        <OrderDetails record={v} tm={tm}/>\n      <br/></span>);\n    })}\n  </span>)\n}\n\nexport default MyOrdersList;\n*/\nimport { DataStore } from '../../stores';\nclass MyOrdersList {\n    constructor(prop) {\n    }\n    getList() {\n      return DataStore.getState().data.orders;\n    }\n}\nexport default MyOrdersList;;","\nimport React, {useEffect, useState} from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faPlus, faMinus, faTrashAlt, faShoppingCart } from '@fortawesome/free-solid-svg-icons'\nimport { Badge, Button } from 'react-bootstrap';\nimport { DataStore } from '../../stores';\nimport { Engine } from '../common';\n\nfunction ShoppingCartOprator(props) {\n  const engine = new Engine();\n  const [item, setItem] = useState(props.code);\n  const [cnt, setCnt] = useState(0);\n\n  const getOrderCount = ()=> {\n    const idx = DataStore.getState().data.orders.findIndex((v)=> v && v.code === item);\n    const order = (idx !== -1) ? DataStore.getState().data.orders[idx] : null;\n    setCnt(!order? 0 : order.count);\n  }\n\n  const isOrdersCount = ()=> {\n    return (DataStore.getState().data.orders.length) ? true : false;\n  }\n\n  const add = ()=> {\n    DataStore.dispatch({\n      type: 'updateShoppingCartItem',\n      data : { code : props.code, count: (cnt + 1)}\n    })\n  }\n  const minus = ()=> {\n    DataStore.dispatch({\n      type: 'updateShoppingCartItem',\n      data : { code : props.code, count: (cnt > 0) ? (cnt - 1) : 0}\n    })\n  }\n  const remove = ()=> {\n    DataStore.dispatch({\n      type: 'removeShoppingCartItem',\n      data : { code : props.code}\n    })\n  }\n  const cleanShoppingCart = ()=> {\n    DataStore.dispatch({\n      type: 'initShoppingCart'\n    })   \n  }\n\n  useEffect(() => {\n    setItem(props.code);\n    const shppingHandle = DataStore.subscribe(()=> {\n      if (DataStore.getState().LastAction === 'shopping') {\n        getOrderCount();\n      }\n    });\n    engine.loadStorageData({}, ()=>{\n      getOrderCount();\n    });\n    return ()=> {\n      shppingHandle();\n    }\n  }, []);\n\n  return (<span className={(props.className) ? props.className : 'text-light bg-primary'}>\n  {(props.operater === 'minus') && (<FontAwesomeIcon size=\"1x\" icon={faMinus} onClick={minus} />)}\n  {(props.operater === 'plus') && (<FontAwesomeIcon size=\"1x\" icon={faPlus} onClick={add} />)}\n  {(props.operater === 'remove') && (<FontAwesomeIcon size=\"1x\" icon={faTrashAlt} onClick={remove} />)}\n  {(props.operater === 'initShoppingCart' && isOrdersCount()) && \n      (<Button variant =\"link\" onClick={cleanShoppingCart} >\n        <FontAwesomeIcon size=\"1x\" icon={faShoppingCart} className=\"mr-2\" />{(!props.caption) ? '' : props.caption}\n      </Button>)}\n\n  {(props.operater === 'showCount') && \n      (<Badge className=\"text-primary alert-primary p-2\">\n        {cnt}\n      </Badge>)\n  }\n  {(props.operater === 'showTotal') && \n       (<div className=\"p-2 text-center text-dark\">${cnt * props.price}</div>)\n  }\n  </span>);\n}\n\nexport default  ShoppingCartOprator;\n","import {useEffect, useState} from 'react';\nimport { DataStore } from '../../stores';\n\nfunction ShoppingCartWatcher (props) {\n\n  useEffect(() => {\n    const shppingHandle = DataStore.subscribe(()=> {\n      if (DataStore.getState().LastAction === 'shopping') {\n        if (props.changed)  {\n          props.changed();\n        }\n      }\n    });\n    return ()=> {\n      shppingHandle();\n    }\n  }, []);\n\n  return '';\n}\n\nexport default ShoppingCartWatcher;\n","import React , { useState, useEffect } from 'react';\nimport { Container, Form, Button, Alert } from 'react-bootstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faQrcode, faUnlockAlt } from '@fortawesome/free-solid-svg-icons';\n\nimport { SettingStore } from '../../stores';\n\nfunction AuthHeadItem(props) {\n    const [isAuth, setIsAuth ] = useState(false);\n    useEffect(() => {\n        const handleSubscribe = SettingStore.subscribe(() => {\n          if (SettingStore.getState()._watcher === 'auth') {\n            setIsAuth(SettingStore.getState().data.auth);\n          }\n          return false;\n        });\n        setIsAuth(SettingStore.getState().data.auth);\n        return ()=> {\n          handleSubscribe();\n      }\n      }, []);\n\n    return (<div className=\"rounded p-1 m-0\" style={{fontSize:'1.1rem'}}>\n        <span className={(!isAuth) ? '  menu-color ' : ' text-light  '}>\n        <FontAwesomeIcon size=\"1x\" icon={(!isAuth) ? faQrcode : faUnlockAlt} className=\"mr-1\" /> Auth\n        </span>\n    </div>)\n}\n\nexport { AuthHeadItem }","import React , { useState, useEffect } from 'react';\nimport { Container, Image, Alert, Button } from 'react-bootstrap';\nimport QRCode from 'qrcode'\nimport socketClient  from 'socket.io-client';\nimport { SettingStore } from '../../stores';\n\nfunction AuthBody(props) {\n    const [qr, setQr] =  useState('');\n    const [sockedId, setSockedId] =  useState('');\n    const SOCKET_URL = SettingStore.getState().config.sockerServer;\n\n    const [isAuth, setIsAuth] = useState(null);\n    const [authInfo, setAuthInfo] = useState({});\n\n    const saveAuthInfo = (data)=> {\n        const rec = {...data}\n        rec.auth = true;\n        rec.signInTime = new Date().getTime();\n       SettingStore.dispatch({\n           type: 'saveAuthInfo',\n           data: rec\n       });\n    }\n    const signOutAuth = ()=> {\n        const rec = {auth : false}\n        SettingStore.dispatch({\n           type: 'saveAuthInfo',\n           data: rec\n       });\n    }\n    const getAuthInfo = (data)=> {\n        setAuthInfo(SettingStore.getState().data.authInfo);\n        setIsAuth(SettingStore.getState().data.auth);\n    }\n\n    useEffect(()=> {\n        getAuthInfo();\n        const handleSubscribe = SettingStore.subscribe(() => {\n            if (SettingStore.getState()._watcher === 'auth' || SettingStore.getState()._watcher === 'role') {\n                getAuthInfo();\n            }\n            return false;\n        }); \n        return ()=> {\n            handleSubscribe();\n        }\n    }, [])\n    useEffect(()=> {\n        if (isAuth === false) {\n            const socket = socketClient.connect(SOCKET_URL);\n            socket.on('connect', () => {\n                socket.on('afterTransfer', (fromSocket, body) =>{\n                    // console.log('afterTransfer, from->',fromSocket);\n                    // console.log('afterTransfer,  body->', body);\n                    saveAuthInfo(body);\n                    socket.disconnect();\n                });\n                setSockedId(socket.id.replace('/dishFu#', ''));\n            });\n            socket.on('disconnect', () => {\n                \n            });\n            return ()=> {\n                socket.disconnect();\n            }\n        }\n\n    }, [isAuth]);\n\n    useEffect(()=> {\n        if (sockedId) {\n            QRCode.toDataURL(SettingStore.getState().config.webServer  + '/MobileAuth/' + sockedId,\n            { \n                width:338,\n                type: 'image/png',\n                quality: 1.0,\n                color: {\n                    dark: '#000000',  \n                    light: '#0000'\n                }\n            }, (err, str)=>{\n                setQr(str)\n            });\n        }\n    }, [sockedId]);\n\n\n    const authPage =  (<Container className=\"content-body mt-3\">\n            <h4>Scan it with an authrized phone.</h4><br/>\n            {SettingStore.getState().config.webServer + '/MobileAuth/' + sockedId}\n            <br/>\n            <Image src={qr} className=\"border border-primary\"/>\n        </Container>)\n\n    const infoPage =  (<Container className=\"content-body mt-3\">\n        <Alert variant=\"secondary mt-3\">\n            <Alert.Heading>Current Authentication</Alert.Heading>\n                {(authInfo) && (<p className=\"pb-3 pt-3 m-3\">\n                    Address: <b>{ authInfo.address}</b><br/>\n                    Roles: <b>{ ( !authInfo.roles) ? '' : authInfo.roles.join(',')}</b><br/>\n                    Sign in time: <b>{ new Date(authInfo.signInTime).toLocaleDateString()} </b><br/>\n                </p>)}\n                <Button onClick={signOutAuth} className=\"m-3\">\n                    Sign out this equipment\n                </Button>\n            </Alert>\n        </Container>)\n    return !(isAuth) ? authPage : infoPage;\n}\n\nexport {  AuthBody }","import React , { useEffect, useState } from 'react';\nimport {useParams } from \"react-router-dom\";\nimport { Container, Alert, Button } from 'react-bootstrap';\nimport socketClient  from \"socket.io-client\";\nimport { SettingStore } from '../../stores';\nimport { InfoHeader } from '../common';\n\nfunction MobileAuth(props) {\n  const {SocketID } = useParams();\n  const SOCKET_URL = SettingStore.getState().config.sockerServer;\n  const [success, setSuccess ] = useState(false);\n  const [isContinue, setIsContinue ] = useState(true);\n  const [isAuth, setIsAuth] = useState(SettingStore.getState().data.auth);\n\n  const permit = ()=> {\n\n    const socket = socketClient.connect(SOCKET_URL);\n    socket.on('connect', function(){\n        socket.emit(\"transfer\",SocketID, socket.id, \n        SettingStore.getState().data.authInfo);\n        socket.disconnect();\n        setSuccess(true);\n    });\n  }\n  useEffect(() => {}, []);\n\n\nconst infoSection = (data) => (!!data) && (<div>\n  Auth Code: <b>{data.authCode}</b><br/>\n  Address: <b>{data.address}</b><br/>\n  Roles: <b>{(!data.roles) ? '' : data.roles.join(',')}</b><br/>\n</div>)\n\n  const Frame = (info) => (<Container fluid={true} className=\"m-0 p-0\">\n  <InfoHeader comp={'Auth with Mobile'}/>\n  <Container>\n    <Alert variant={!info.variant ? 'light mt-3' :  info.variant}>\n    <Alert.Heading>{info.title}</Alert.Heading>\n      {info.body}\n    </Alert>\n  </Container>\n  </Container>)\n\nconst warningPage = (<Frame title=\"Warning\" \n  body={(<Container fluid={true}>\n    <p className=\"text-danger\">\n      The authentication on this mobile will send to the target equipment. Please confirm!\n    </p>\n    <p className=\"alert-secondary p-2\">\n      {infoSection(SettingStore.getState().data.authInfo)}\n    </p>\n    <Button onClick={permit} className=\"m-2\">\n        Continue Anyway\n    </Button>\n    <Button onClick={ ()=> { setIsContinue(false)} } variant=\"danger\" className=\"m-2\">\n        Stop\n    </Button> \n  </Container>\n  )} />);\n  \n  const unAuthentication = (<Frame title=\"Warning!\" body=\"The mobile has not been authenticated!\" variant=\"danger m-3 p-3\" />);  \n  const successPage = (<Frame title=\"succeed!\" body=\"The mobile authentication completed!!\" />);  \n  const stopContinuePage = (<Frame title=\"Stop!\" body=\"No worry. The mobile authentication is not going through!\" />);\n  \n  return (!isAuth) ? unAuthentication : (!isContinue) ? stopContinuePage : (success) ? successPage : warningPage;\n}\nexport { MobileAuth};","import React , { useEffect } from 'react';\nimport {useParams } from \"react-router-dom\";\nimport { Container } from 'react-bootstrap';\nimport socketClient  from \"socket.io-client\";\n\n\n\nfunction InfoCatch(props) {\n  const { InfoCode } = useParams();\n  const SOCKET_URL = '/dishFu';\n\n  useEffect(() => {\n    const socket = socketClient.connect(SOCKET_URL);\n    /*\n    socket.on('connect', function(){\n        socket.emit(\"transfer\",InfoCode , socket.id, 'BODY BODY');\n        history.push('/');\n    });*/\n    return ()=> {\n        socket.disconnect();\n    }\n  }, []);\n\n  return (\n    <Container fluid={true} className=\"m-0 p-0\">\n        <h1>Mobile InfoCatch--AAA-</h1>\n        {InfoCode}\n    </Container>\n  );\n}\nexport { InfoCatch };\n","import React , { useEffect, useState } from 'react';\nimport {useParams } from \"react-router-dom\";\nimport { Container, Alert, Button } from 'react-bootstrap';\nimport { InfoHeader, Engine, } from '../common';\nimport { SettingStore } from '../../stores';\n// import { Engine, IPFSEngine, IpfsDoc, DisplayRecipe  } from '../../common';\n\nfunction ScanSignin (props) {\n  const { RequestID } = useParams();\n  const [ inComeInfo, setIncomeInfo ] = useState({});\n  const [ isContinue, setIsContinue ] = useState(true);\n  const [ success, setSuccess ] = useState(false);\n  const [ isAuth, setIsAuth ] = useState(false);\n  const [ cAuth, setCAuth ] = useState(SettingStore.getState().data.authInfo);\n  const [ error, setError ] = useState(false);\n  \n  const engine = new Engine();\n\n  const loadData = ()=> {\n    const url = SettingStore.getState().config.apiServer + '/api/application/getAuthUserByAuthCode';\n    engine.loadingOn();\n\n    engine.DatabaseApi('auth', {\n      action: 'getAuthUserByAuthCode',\n      RequestID : RequestID \n    }, (result)=>{\n      engine.loadingOff();\n      setIncomeInfo(result.data);\n    });\n  }\n  useEffect(() => {\n    setIsAuth(SettingStore.getState().data.auth);\n    loadData ();\n    const handleSubscribe = SettingStore.subscribe(() => {\n        if (SettingStore.getState()._watcher === 'auth') {\n          // alert(SettingStore.getState()._watcher);\n          // SettingStore.getState().auto == true;\n          console.log('SettingStore.getState()=AA=>', SettingStore.getState().data);\n            setSuccess(true);\n          // setloadReady(true);\n          //  getAuthInfo();\n        }\n        return false;\n    }); \n\n    return ()=> {\n        handleSubscribe();\n    }\n\n  }, []);\n  const saveAuthInfo = (data)=> {\n    const rec = {...data};\n    rec.signInTime = new Date().getTime();\n    rec.auth = true;\n\n    SettingStore.dispatch({\n        type: 'saveAuthInfo',\n        data: rec\n    });\n  }\n  const approveSignin = ()=> {\n    saveAuthInfo(inComeInfo);\n  }\n\n  const AuthSection = (data) => (!!data) && (<div>\n    Auth Code: <b>{data.authCode}</b><br/>\n    Address: <b>{data.address}</b><br/>\n    Roles: <b>{(!data.roles) ? '' : data.roles.join(',')}</b><br/>\n    Sign In Time: <b>{!data.signInTime ? '' : new Date(data.signInTime).toLocaleDateString()}</b><hr/>\n  </div>)\n\n\nconst ComingInfoSection = (data) => (!!data) && (<div>\n  Auth Code: <b>{data.authCode}</b><br/>\n  Address: <b>{data.address}</b><br/>\n  Roles: <b>{(!data.roles) ? '' : data.roles.join(',')}</b><br/>\n</div>)\n\n  const Frame = (info) => (<Container fluid={true} className=\"m-0 p-0\">\n      <InfoHeader comp={'Scan Signin'}/>\n      <Container>\n        <Alert variant=\"light mt-3\">\n        <Alert.Heading>{info.title}</Alert.Heading>\n          {info.body}\n        </Alert>\n      </Container>\n    </Container>)\n\n  const errorPage = (<Frame title=\"Error!\" body={error} />);\n  const stopContinuePage = (<Frame title=\"Stop!\" body=\"The scan signin is not going through!\" />);\n  const successPage = (<Frame title=\"succeed!\" body=\"The scan signin completed!!\" />);\n\n  const itIsAuthedPage = (<Frame title=\"Your equipment is authorized by\" \n      body={(<div className=\"d-grid gap-2\">\n          <b>Exist auth:</b>\n          {AuthSection(cAuth)}\n          <b>Switch to</b>\n          {ComingInfoSection (inComeInfo)}\n          <Button onClick={approveSignin } className=\"m-2\">\n              Continue Anyway\n          </Button>\n          <Button onClick={ ()=> { setIsContinue(false)} } variant=\"danger\" className=\"m-2\">\n              Stop\n          </Button>\n          </div>)}/>);\n\n  const infoPage = (<Frame title=\"Coming authentication is\" \n      body={(<div className=\"d-grid gap-2\">\n          <b>Equempent Setup to</b>\n          {ComingInfoSection(inComeInfo)}\n          <Button onClick={approveSignin } className=\"m-2\">\n              Continue Anyway\n          </Button>\n          <Button onClick={ ()=> { setIsContinue(false)} } variant=\"danger\" className=\"m-2\">\n              Stop\n          </Button>\n          </div>)}/>);\n\n \n\n  return  (error) ? errorPage:\n        (!isContinue) ? stopContinuePage : \n        (success) ? successPage : (isAuth)? itIsAuthedPage : infoPage\n      \n}\nexport { ScanSignin };\n","\nimport React, {useEffect, useState} from 'react';\nimport { Nav, /* NavDropdown, */ Navbar, Container, Badge } from 'react-bootstrap';\nimport { Link, useLocation  } from \"react-router-dom\";\nimport { RoleSection } from './common';\nimport { ShoppingCnt }  from './shoppingCart';\nimport { AuthHeadItem  }  from './mobileAuth';\nimport { Logo } from './common';\n\nfunction Header(props) {\nconst [expanded, setExpanded] = useState(\"\")\n\n  const navItem = {\n    design:  {caption: 'Workshop', role: ['foodie', 'supie'], linkTo: '/workshop'},\n    focus:  {caption: 'Community', role: ['foodie', 'supie'], linkTo: '/community'},\n    menus: {caption: 'Menu', role: ['all'], linkTo: '/menus'},\n    foodie: {caption: 'Become a foodie', role: ['all'], linkTo: '/becomeFoodie', exrole: ['foodie']},\n    supie: {caption: 'Become a supie', role: ['all'], linkTo: '/becomeSupie', exrole: ['supie']},\n    orders:  {caption: (<ShoppingCnt/>), role: ['all'], linkTo: '/orders'},\n  };\n  const SelectedClass = (v)=> {\n    const location = useLocation(); \n    return (location.pathname !== navItem[v].linkTo) ? 'menu-color' : 'menu-color-select';\n  }\n  const getNavLink = (v)=> {\n    const item = !navItem[v] ? {role: []} : navItem[v],\n          itemRole = (!item || !item.role) ? [] : item.role,\n          itemExRole = (!item || !item.exrole) ? [] : item.exrole;\n    const comp = ((item)=>(<Nav.Link as={Link} to={item.linkTo} className={SelectedClass(v)}\n        onClick={()=> {  setExpanded(false); }}>{item.caption}</Nav.Link>))(item);\n\n    return (<RoleSection roles={itemRole} comp={comp} exroles={itemExRole}  />);\n  }\n  useEffect(() => {\n  }, []);\n\n  return (\n    <Container className=\"bg-primary\" fluid={true}>\n      <Container>\n        <Navbar expand=\"lg\" className=\"p-1\" expanded={expanded}>\n            <Navbar.Brand as={Link} to=\"/\" className=\"menu_color\"><Logo/></Navbar.Brand>\n            <Navbar.Brand as={Link} to=\"/auth\" className=\"menu_color\">\n                <AuthHeadItem />\n            </Navbar.Brand>\n            <Navbar.Toggle aria-controls=\"basic-navbar-nav\" onClick={() => setExpanded(expanded ? false : \"expanded\")} />\n            <Navbar.Collapse id=\"basic-navbar-nav\">\n            <Nav className=\"me-auto\">\n                \n                {getNavLink('menus')}\n                {getNavLink('foodie')}\n                {getNavLink('supie')}\n                {getNavLink('design')}\n                {getNavLink('focus')}\n                {getNavLink('orders')}\n                \n            </Nav>\n            </Navbar.Collapse>\n\n        </Navbar>\n      </Container>\n    </Container>\n  );\n}\n\nexport default Header;\n","import { Container } from 'react-bootstrap';\nimport React from 'react';\nimport { Link } from \"react-router-dom\";\n\nfunction Footer() {\n  const Year = new Date().getFullYear();\n  return (\n    <Container fluid={true} className=\"footer\">\n        <div className=\"float-left alert-secondary footer-tag\">\n          &copy; {Year} Dishfu &nbsp;\n          &nbsp;<Link to=\"/privacy\">Privacy</Link>\n          &nbsp;|&nbsp;<Link to=\"/terms\">Term</Link>\n          \n          &nbsp;|&nbsp;<Link to=\"/setting\">setting</Link>\n        </div>\n        <div className=\"clearfix p-0 m-0\"></div>\n    </Container>\n    \n  );\n}\nexport default Footer;\n","import React , { useState, useEffect } from 'react';\nimport { Container, Button, Badge  } from 'react-bootstrap';\n\nimport { DataStore } from '../../../stores';\n\nimport { Link } from \"react-router-dom\";\nimport { IPFSImg, Engine } from '../../common';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faPlus, faTrashAlt, faEdit } from '@fortawesome/free-solid-svg-icons';\n\nfunction RecipeList(props) {\n  const engine = new Engine();\n  const [items, setItems] = useState([]);\n  const [cnt, setCnt] = useState(0);\n  // const [tm, setTm ] = useState(new Date().getTime());\n\n  const showPhotoList = (photos) => {\n    return (<span className=\"clearfix\">\n        {photos.map((o, k)=>{\n          return (<IPFSImg ipfs={o.ipfs} isCache={true} key={k} className=\"float-left m-1 bg-secondary iconsImage\"/>)   \n        })}\n    </span>)\n  }\n  const recordPhotos = (rec) => {\n    let photos = [], secs=['plates', 'cooking', 'ingredients'];\n    for (let i = 0; i < secs.length; i++) {\n      if (rec[secs[i]]) {\n        rec[secs[i]].map((v)=> {\n          photos = [...photos, ...v.photos];\n        })\n      }\n    }\n    return photos;\n  }\n\n  const deleteRecipe = (id)=> {\n    engine.loadingOn();\n    engine.saveLocalRecord({\n      type: 'deleteLocal',\n      section:'recipes',\n      data: {id: id}\n    }, (data)=>{\n      const list = DataStore.getState().data.recipes;\n      const cnt = list.length;\n      setItems(list);\n      setCnt(cnt);\n   //   setTm(new Date().getTime());\n      engine.loadingOff();\n    });\n  }\n  \n  const loadList = ()=> {\n    const list = DataStore.getState().data.recipes;\n    const cnt = list.length;\n    setItems(list);\n    setCnt(cnt);\n   // setTm(new Date().getTime());\n  } \n  \n\n  useEffect(()=> { \n    engine.loadStorageData({}, ()=>{\n      loadList();\n    });\n  }, [])\n\n  const showNothing = ()=> (\n    <Container fluid={true} className=\"rounded p-3 message-box grid-bg\">\n      <h3 className=\"text-secondary m-3 p-3\">There is not recipe avaliable.</h3>\n    </Container>\n  );\n  const showList= (cnt)=> {\n    return (<Container fluid={true}  className=\"p-0 m-0\">\n    {items.map((rec, key) => {\n        return !rec ? '' : (\n        <Container fluid={true} key={key} className=\"border shadow-sm p-0 mt-2 mb-3\">\n          <div className=\"float-right mr-2 p-2\">\n            <Button variant=\"link\" as={Link} to={'/editRecipe/'+ rec.id} className=\"p-0 ml-3\">\n              <FontAwesomeIcon size=\"1x\" icon={faEdit} /> Edit\n            </Button>\n            <Button variant=\"link\" onClick={()=>{ deleteRecipe(rec.id) }} className=\"p-0 ml-3\">\n              <FontAwesomeIcon size=\"1x\" icon={faTrashAlt} /> Delete\n            </Button>\n          </div>\n          <b className=\"float-left p-2 pl-3 pr-3 pb-0 m-0\">{rec.name}</b>\n          <div className=\"clearfix p-0 m-0\"></div>\n          <Container fluid={true}  className=\"p-0 pl-3 pr-3 pb-1\">\n            <div>\n              <p className=\"float-right\" style={{maxWidth:'200px'}}>\n                 {showPhotoList(recordPhotos(rec))}\n              </p>  \n              <span className=\"text-primary\">Ingredients:</span>\n              {rec.ingredients.map((v, k)=>{  return v.text })}\n              <br/>\n              <span className=\"text-primary\">Instruction:</span>\n              {rec.cooking.map((v, k)=>{ return v.text })}\n            </div>\n            <div className=\"clearfix p-1 m-0\"></div>\n          </Container>\n        </Container>);\n      })}</Container>);\n  }\n  return (\n    <Container fluid={true} className=\"content-body p-0 m-0\">\n        <h4 className=\"float-left\">Recipes</h4>\n        <Badge className=\"float-left ml-1 mr-3 alert-primary\">{cnt}</Badge>\n        <Link to=\"/editRecipe/new\"  className=\"float-left ml-3 mt-1\"><FontAwesomeIcon size=\"1x\" icon={faPlus} /> Add a new recipe</Link>\n      <div className=\"clearfix p-0 m-0\"></div>\n      {(cnt) ? showList(cnt) : showNothing()}\n    </Container>\n  );\n}\nexport default RecipeList;","\nimport React , { useState, useEffect, useRef} from 'react';\nimport { Container, Form, Button, InputGroup } from 'react-bootstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faPaperclip, faTrashAlt, faTimesCircle } from '@fortawesome/free-solid-svg-icons'\nimport { IPFSImg } from '../../common';\n\nfunction RecipeSection(props) {\n  const [record, setRecord] = useState(props.record);\n  const inputFileHandle = useRef(null); \n  const uploadFile = (e) => {\n    inputFileHandle.current.click();\n  }\n\n  const handleFileChange = async (e) => {\n    const list = [];\n    for (let i = 0; i <  e.target.files.length; i++) {\n        list.push({base64:await convertBase64(e.target.files[i])});\n        e.target.value = null;\n    }\n    record.photos = [...record.photos, ...list];\n    setRecord(record);\n    syncRec();\n  }\n\n  const removeSection = () => {\n    props.callParent.removeSection(props.idx);\n  }\n\n  const removePhoto = async (key) => {\n    record.photos.splice(key,1);\n    setRecord(record);\n    syncRec();\n  }\n\n  const convertBase64 = (file) => {\n    return new Promise((resolve, reject) => {\n      const fileReader = new FileReader();\n      fileReader.readAsDataURL(file)\n      fileReader.onload = () => {\n        resolve(fileReader.result);\n      }\n      fileReader.onerror = (error) => {\n        reject(error);\n      }\n    })\n  }\n\n  const syncRec = ()=> {\n    props.callParent.syncRec(props.idx, record);\n  }\n\n  const handleTextChange = async (e) => {\n    const rec = record;\n    rec.text=e.target.value;\n    setRecord(rec);\n    syncRec();\n  }\n\n  useEffect(()=> {\n\n  }, []);\n  \n  return (\n    <Container fluid=\"true\" className=\"p-2\">\n      <InputGroup className=\"m-2\">\n        {(record.idx) ? (<InputGroup.Text className=\"bg-light\">{record.idx}</InputGroup.Text>) : ''}\n        <Form.Control as=\"textarea\" defaultValue={(!props.record) ? '' : props.record.text} \n                  rows=\"2\" onChange={handleTextChange}/>\n      </InputGroup>\n      <Form.Control type=\"file\" hidden ref={inputFileHandle} onChange={handleFileChange}/>\n      <div className=\"clearfix p-1\">\n          <div  className=\"float-right\">\n            {props.isdelete && (<Button variant=\"link\" className=\"ml-3\" onClick={removeSection}>\n              <FontAwesomeIcon size=\"1x\" icon={faTrashAlt} className=\"m-0\" /> Remove\n            </Button>)}\n\n            <Button variant=\"link\" className=\"ml-3\" onClick={uploadFile}>\n              <FontAwesomeIcon size=\"1x\" icon={faPaperclip} className=\"m-0\" /> Upload Photo\n            </Button>\n          </div>\n        {record.photos.map((fa, key)=>{\n            return (\n            <div  key={key}  className=\"m-1 rounded shadow sahdow-sm alert-secondary bg-light float-left\">\n              \n              <IPFSImg base64={fa.base64} ipfs={fa.ipfs} isCache={true} className=\"iconsImage\" />\n              <FontAwesomeIcon size=\"2x\" icon={faTimesCircle} \n                onClick={()=>removePhoto(key)}\n            className=\"m-1 align-bottom\" />\n            </div>\n            )\n          })}\n      </div>\n    </Container>\n  );\n}\nexport default RecipeSection;\n","import React , { useState, useEffect } from 'react';\nimport { Container, Form, Button,  Row, Col } from 'react-bootstrap';\nimport { RecipeSection } from './';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faPlus, faSave, faUndo, faUpload } from '@fortawesome/free-solid-svg-icons'\nimport { DataStore, SettingStore } from '../../../stores';\n\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { Engine, IPFSEngine, IpfsDoc, DisplayRecipe  } from '../../common';\n\n\nfunction RecipeEdit(props) {\n  const engine = new Engine();\n  const ipfsEngine = new IPFSEngine();\n  const [tm, setTm] = useState(new Date().getTime());\n\n  const [record, setRecord] = useState(null);\n\n  const {id, recipeCode} = useParams();\n  const history = useHistory();\n\n  useEffect(()=> {\n    const engine = new Engine();\n    engine.loadStorageData({}, ()=>{\n      const idx = DataStore.getState().data.recipes.findIndex((v)=> v.id === id);\n      setRecord((id === 'new') ? {\n        id : 'new',\n        name:'', userId: SettingStore.getState().userId, \n        referenceCode : recipeCode,\n        cooking: [{text:'', photos:[]}], \n        ingredients:[{idx:'', text:'', photos:[]}]}\n       : (idx === -1) ? false : DataStore.getState().data.recipes[idx]\n      );\n    });\n\n   }, []);\n\n  const exit = ()=> {\n    engine.setOperationRole('foodie');\n    history.push('/workshop');\n  } \n  const save = async ()=> {\n    engine.loadingOn();\n    await ipfsEngine.promiseSave(record);\n    engine.saveLocalRecord({\n      type: 'updateLocal',\n      section:'recipes',\n      data: record\n    }, ()=>{\n      engine.loadingOff();\n      engine.setOperationRole('foodie');\n      exit();\n    });\n  }\n\n\n  const publish = async ()=> {\n    engine.loadingOn();\n    await ipfsEngine.promiseSave(record);\n    ipfsEngine.promisePublish(record,(code)=> {\n      engine.DatabaseApi('community', {\n        action: 'publish',\n        data: {\n          publishCode:  code, \n          docType:      'recipe', \n          publisher:    SettingStore.getState().fp, \n          authCode:     SettingStore.getState().data.authInfo.authCode\n        }\n      }, ()=>{\n        engine.loadingOff();\n        exit();\n      } )\n    });\n  }  \n\n\n  const removeSection = (section) => {\n    return (idx) => {\n      if (record[section]) {\n        record[section].splice(idx,1)\n        setRecord(record);\n        resetIdx(section);\n        setTm(new Date().getTime())\n      }\n    }\n  }\n  const resetIdx = (section) => {\n    const set = 'ABCDE';\n    if (!record[section]) return true;\n    for (let i = 0; i < record[section].length; i++) {\n      record[section][i].idx = set[i];\n    }\n    setRecord(record);\n  }\n  const addSection = (section)=> {\n    return ()=> {\n      const rec = record;\n      if ((rec[section]) && rec[section].length < 3) {\n        rec[section].push({idx:'', text:'', photos:[]});\n        resetIdx(section)\n        setRecord(rec);\n        setTm(new Date().getTime())\n      }\n    }\n  }\n  const syncRec = (section)=> {\n    return (idx, data) => {\n      const rec = record;\n      if (rec[section]) {\n        rec[section][idx] = data;\n        setRecord(rec);\n        setTm(new Date().getTime())\n      }\n    }\n  }\n  const onNameChange = async (e)=>{\n    const rec = record;\n    rec.name = e.target.value;\n    console.log('rec.name=>', rec.name, rec);\n    setRecord(rec);\n    console.log('onNameChange=>', e.target.value)\n  }\n  const referenceRecipe = (code)=> {\n    return (!code) ? '': (<Form.Text className=\"border border-secondary  alert-warning p-2 m-0\"\n    style={{height:'8rem',overflowY:'scroll', overflowX:'hidden', inline:'block'}}>\n      <Form.Text><i>Original Recipe</i></Form.Text>\n      <IpfsDoc ipfs={code} tpl={(props)=>(<DisplayRecipe record={props.record} className=\"p-0 m-0\" />)}/>\n    </Form.Text>)\n  }\n  return (record === null) ? \n  (<Container className=\"p-3 content-body\">\n    Loading ...\n  </Container>)\n  : (!record.id) ? \n    (<Container className=\"p-3 content-body\">\n      <div className=\"alert alert-danger\">Wrong recipe id -{id}-</div>\n    </Container>)\n    : \n    (\n    <Container className=\"p-3 content-body\">\n      <div className=\"p-3 border border-secondary\">\n        <Form>\n          <div className=\"m-1 ml-2\">\n              <b>{(id === 'new') ? \"New Foodie's Recip\" : (`Foodie's Recip `+ record.id)}</b>\n              &nbsp;(By user {record.userId}) {record.recipeCode}\n          </div>\n          {referenceRecipe(record.referenceCode)}\n\n          <Form.Group controlId=\"formFileSm\" className=\"p-2 m-1\">\n            <Form.Control defaultValue={record.name} required placeholder=\"Input Your Recipe Name\" type=\"textarea\" onChange={onNameChange} />\n          </Form.Group>\n\n          <div className=\"m-1 ml-2 mb-3\">\n              <b>Ingredients</b>\n              {record.ingredients.length < 3 && (<Button variant=\"link\" className=\"ml-3\" onClick={addSection('ingredients')}>\n                <FontAwesomeIcon size=\"1x\" icon={faPlus}  /> Add a Ingredient\n              </Button>)}\n\n              {record.ingredients.map((v, key)=>(<span key={key} >\n              <RecipeSection caption={'Section'} key={key}  idx={key} callParent={{syncRec:syncRec('ingredients'), removeSection: removeSection('ingredients')}}\n              record = {v}\n              isdelete={(record.ingredients.length < 2) ? false : true}/></span>))}\n\n          </div>\n\n          <div className=\"m-1 ml-2 mt-2\">\n              <b>Cooking Instruction</b>\n              {record.cooking.map((v, key)=>(<span key={key}>\n                <RecipeSection caption={''} key={key}  idx={key} callParent={{syncRec:syncRec('cooking'), removeSection: removeSection('cooking')}} \n                record = {v}\n                isdelete={(record.cooking.length < 2) ? false : true}/></span>))}   \n          </div>\n\n          <Row>\n            <Col xs=\"12\" align=\"center\" className=\"m-1 ml-2\">\n              <Button  type=\"button\" className=\"btn btn-primary m-1 mr-3\" onClick={save}>\n                <FontAwesomeIcon size=\"1x\" icon={faSave} className=\"m-0\" /> Save\n              </Button>\n              {(record.id !== 'new') && (<Button  type=\"button\" className=\"btn btn-primary m-1 mr-3\" onClick={publish}>\n                <FontAwesomeIcon size=\"1x\" icon={faUpload} className=\"m-0\" /> Publish\n              </Button>)}\n\n              <Button className=\"btn btn-secondary m-1 mr-3\" onClick={exit}>\n                <FontAwesomeIcon size=\"1x\" icon={faUndo} className=\"m-0\" /> Exit\n              </Button> \n            </Col>\n          </Row>\n        </Form>\n      </div>\n    </Container>\n  );\n}\nexport default RecipeEdit;\n","import React , { useState, useEffect } from 'react';\nimport { SettingStore } from '../../stores';\nimport { Container, Button, Form, Row, Col } from 'react-bootstrap';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCheck, faSave, faTimes } from '@fortawesome/free-solid-svg-icons';\n\nfunction Setting(props) {\n    const roles = [\n        {code:'foodie', description:'Foodie'},\n        {code:'supie', description:'Food supplier / Restaurent / Grocery'}\n    ];\n    const [myRole, setMyRole] = useState([]);\n    const [userInfo, setUserInfo] = useState({address:''});\n    const [tm, setTm] = useState(new Date().getTime());\n    if (tm) {}\n\n    const changeAddress = (e)=> {\n        setUserInfo({\n            address : e.target.value\n        });\n    }\n\n    const changeRole = (code)=> {\n\n        const idx = myRole.indexOf(code);\n        if (idx === -1) {\n            myRole.push(code);\n        } else {\n            myRole.splice(idx, 1);\n        }\n        setMyRole(myRole);\n        setTm(new Date().getTime());\n    }\n    \n\n\n    const save = ()=> {\n        SettingStore.dispatch({\n            type: 'saveUserInfo',\n            userInfo: userInfo\n        });\n        SettingStore.dispatch({\n            type: 'saveRoles',\n            roles: myRole\n        });\n    }\n\n\n    useEffect(()=> { \n        const handleSubscribe = SettingStore.subscribe(() => {\n            if (SettingStore.getState()._watcher === 'role') {\n                setMyRole(SettingStore.getState().data.roles);\n                setUserInfo(SettingStore.getState().data.userInfo);\n                setTm(new Date().getTime());\n            }\n            return false;\n        }); \n        \n        setMyRole(SettingStore.getState().data.roles);\n        setUserInfo(SettingStore.getState().data.userInfo);\n        setTm(new Date().getTime());\n        return ()=> {\n            handleSubscribe();\n        }\n    },[])\n    return (\n        <Container className=\"p-3\">\n            <h5>Setting</h5>\n            <Container className=\"m-2 mr-3 p-2 alert-secondary\">\n            <b className=\"p-0 mb-3\">My roles</b>\n            {roles.map((v, k)=> {\n                return (<div key={k} className=\"p-0 pl-3 pr-3 text-primary\" onClick={()=>{\n                    changeRole(v.code);\n                }}>\n                    {v.description}\n                    {(myRole.indexOf(v.code) !== -1) && \n                        (\n                            <Button variant=\"link\" className=\"p-0 pl-3\">\n                                <FontAwesomeIcon size=\"1x\" icon={faCheck} className=\"ml-2 text-danger\"/>\n                            </Button>\n                        )}\n                    {(myRole.indexOf(v.code) === -1) && \n                        (\n                            <Button variant=\"link\" className=\"p-0 pl-3\">\n                                <FontAwesomeIcon size=\"1x\" icon={faTimes} className=\"ml-2 text-secondary\"/>\n                            </Button>\n                        )}\n                </div>);\n            })}\n            </Container>\n            <Container className=\"m-2 mr-3 p-2 alert-secondary\">\n            <b>My address</b>\n                <Form>\n                    <Form.Group controlId=\"formFileSm\" className=\"p-0 pl-3\">\n                        <Form.Label><b>Country:</b></Form.Label>\n                        {['USA', 'CANADA'].map((v, k)=> {\n                            return (myRole.indexOf(v.code) !== -1) ?\n                            (\n                                <Button variant=\"link\" key={k} className=\"p-0 pl-3\">{v}\n                                    <FontAwesomeIcon size=\"1x\" icon={faCheck} className=\"ml-1 mr-2 text-danger\"/>\n                                </Button>\n                            ) :\n                            (\n                                <Button variant=\"link\" key={k} className=\"p-0 pl-3\">{v}\n                                    <FontAwesomeIcon size=\"1x\" icon={faTimes} className=\"ml-1 mr-2  text-secondary\"/>\n                                </Button>\n                            )\n                        })}\n                    </Form.Group>\n                    <Form.Group className=\"p-0 pl-3\">\n                        <Form.Label><b>Street:</b></Form.Label>\n                        <Form.Control placeholder=\"Address, City\" \n                            as=\"textarea\" rows=\"3\"\n                            value={userInfo.address}\n                            onChange={changeAddress}/>\n                    </Form.Group>\n                </Form>\n            </Container>\n            <Row>\n            <Col xs=\"12\" align=\"center\" className=\"m-1 ml-2\">    \n              <Button  type=\"button\" className=\"btn btn-primary m-1 mr-3\" onClick={save}>\n              <FontAwesomeIcon size=\"1x\" icon={faSave} className=\"m-0\" /> Save\n              </Button>\n            </Col>\n          </Row>\n        </Container>\n    );\n}\nexport default Setting;","\nimport React , { useState, useEffect } from 'react';\nimport { Container, Row, Col, Button, Image } from 'react-bootstrap';\nimport { StarRating,  IconsImage,  IPFSImg   } from '../common';\nimport {  AddOrder } from '../shoppingCart';\n\nfunction MenuItem(props) {\n  const [record, setRecord] = useState(false);\n  const getContents = (rec)=>{\n    const list = [];\n    ['cooking', 'ingredients', 'plates'].map((v)=> {\n        const r = (!rec.data || !rec.data[v]) ? [] : rec.data[v];\n        r.map((v2)=>  list.push(v2.text + '; '));\n        return true;\n    });\n    return list.join(' ');\n  }\n  const getImages = (rec)=>{\n    const list = [];\n    ['cooking', 'ingredients', 'plates'].map((v)=> {\n        const r = (!rec.data || !rec.data[v] || !rec.data[v]) ? [] : rec.data[v];\n        r.map((v1) => {\n          const photos = (!v1.photos) ? [] : v1.photos;\n          photos.map((v2)=> {\n            if (v2 && v2.ipfs) {\n              list.push(v2.ipfs);\n            } \n            return true;\n          });\n          return true;\n        })\n        return true;\n    });\n    return list;\n  }\n\n  useEffect(()=> {\n    setRecord(props.rec);\n  }, []);\n\n\n\n  return  (!record.data) ? '' : (\n    <Container className=\"p-1\"  fluid={true}>\n      <Row>\n        <Col xs={2} style={{textAlign: \"center\"}} className=\"p-0 \">\n          <div  className=\"border bg-light\">\n          <IPFSImg ipfs={getImages(record)[0]} isCache={true}\n          style={{ maxHeight:'120px', objectFit: 'cover'}}/>\n          </div>\n        </Col>\n        <Col xs={8}  className=\"p-3\">\n          <b>{!record.data ? '' : record.data.name}</b><br/>\n          <span>{getContents(record)}\n          </span>\n          <b>{record.published}</b>\n          \n        </Col>\n        <Col xs={2} style={{textAlign: \"center\"}} className=\"p-0\">\n          <p className=\"text-center p-0\" style={{fontSize:'11px'}}>{record.publisher}</p>\n              <StarRating value=\"5\" readOnly=\"true\"/>\n          <h4 className=\"p-2\">{(!record.data || !record.data.price) ? 'Call Foodie' : ('$' + record.data.price)}</h4>\n\n          <AddOrder code={record.publishCode}/>\n          <hr/>\n        </Col>\n        <br/>\n      </Row>\n    </Container>\n  );\n}\nexport default MenuItem;\n","import React , { useState, useEffect } from 'react';\nimport { Container } from 'react-bootstrap';\n\nimport { RestfulAPI } from '../setting';\nimport { Engine, IPFSEngine } from '../common';\n\nimport { MenuItem,  MenuSection } from '../tpl';\n\nfunction MenuItems(props) {\n  const engine = new Engine();\n  const ipfsEngine = new IPFSEngine();\n  const [items, setItems] = useState([]);\n  const [itemsMenu, setItemsMenu] = useState([]);\n  const [tm, setTm] = useState(0);\n\n  const loadData = ()=> {\n    engine.loadingOn();\n    engine.DatabaseApi('menu', {\n      action: 'getList'\n    }, (result)=>{\n      engine.loadingOff();\n      (async ()=> {\n        // setItems(await ipfsEngine.promisePullQ(result.data));\n        console.log('==result.data===>', result);\n        setItems(await ipfsEngine.promisePullQ((!result.data) ? []:result.data));\n        setTm(new Date().getTime());\n      })();\n      console.log('menu--list->', result);\n    });\n      /*\n      (async ()=> {\n        // setItems(await ipfsEngine.promisePullQ(result.data));\n        console.log('==result.data===>', result.data);\n        setItems(await ipfsEngine.promisePullQ(result.data));\n        setTm(new Date().getTime());\n      })();\n*/\n/*\n    engine.loadingOn();\n    engine.getApiData({code:'menu'}, (data)=>{\n      setItems(data);\n      processItems(data);\n      engine.loadingOff();\n    });\n    return true;\n*/\n  }\n  const processItems = async (data)=>{\n    const p = await ipfsEngine.promisePullQ(data);\n    setItems(p);\n  }\n  useEffect(()=> { \n    \n    engine.loadStorageData({}, ()=>{\n      engine.getStorageData({},\n        (data)=> {\n         //  processData(data.menus);\n        }\n      );\n      loadData();\n    });\n\n  }, [])\n  return (\n    <Container className=\"p-3 content-body\">\n      <div className=\"p-3\">\n      <h5>Menus This Week</h5>\n      {items.map((v, k) => {\n        return (<MenuItem key={k} rec={v}/>)\n        // return (<MenuSection key={k} rec={v} />);\n      })}\n      </div>\n    </Container>\n  );\n}\nexport default MenuItems;\n","import React , { useEffect } from 'react';\nimport { Container } from 'react-bootstrap';\n\nfunction About(props) {\n  useEffect(() => {\n  }, []);\n  return (\n    <Container className=\"content-body\">\n      <h5 className=\"p-3\">About Us</h5>\n    </Container>\n  );\n}\n\nexport default About;\n","import React , { useEffect } from 'react';\nimport { Container } from 'react-bootstrap';\n\nfunction Contact(props) {\n  useEffect(() => {\n  }, []);\n  return (\n    <Container className=\"content-body\">\n      <h5 className=\"p-3\">Contact Us</h5>\n    </Container>\n  );\n}\n\nexport default Contact;\n","import React , { useEffect, useState } from 'react';\nimport { Container } from 'react-bootstrap';\nimport { Engine, StarRating,  IPFSImg } from '../common';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faEgg } from '@fortawesome/free-solid-svg-icons';\n\nfunction Home(props) {\n  const [items, setItems] = useState([]);\n  const engine = new Engine();\n\n  useEffect(() => {\n    engine.loadingOn();\n    engine.DatabaseApi('ad', {\n      action: 'homeList'\n    }, (result)=>{\n      engine.loadingOff();\n      setItems(!result || !result.data || !result.data.promotion ? [] : result.data.promotion);\n    });\n  }, []);\n  return (\n    <Container fluid={true} className=\"p-0 m-0 content-body wood-bg\">\n      <Container fluid={true} className=\"p-0 m-0 content-body pic-bg\">\n      <div className=\"master-bg-video-frame bg-secondary\">\n        <video className=\"master-bg-video\"\n          poster=\"\" \n          preload=\"auto\" autoPlay loop muted>\n            <source src=\"\" type=\"video/mp4\"/>\n          </video>\n      </div>\n        <div style={{'minHeight':\"100%\"}}>\n        <div className=\"text-center\" style={{position: 'relative', height:'360px', top:'68px'}}>\n          <p><b className=\"p-1 text-light\" style={{fontSize: '3.8em', lineHeight:'2.8rem'}}>Community Workshops</b></p>\n          <p><b className=\"p-3 text-success\" style={{fontSize: '2.6em', lineHeight:'2.5rem'}}>Foodies together</b></p>\n          <p className=\"text-warning p-3\" style={{fontSize: '1.5em', lineHeight:'2rem'}}><b>\n            Cooking<FontAwesomeIcon size=\"1x\" icon={faEgg} className=\"m-1\" style={{fontSize:'0.5rem'}}/>\n            Eating<FontAwesomeIcon size=\"1x\" icon={faEgg} className=\"m-1\" style={{fontSize:'0.5rem'}}/>\n            Sharing<FontAwesomeIcon size=\"1x\" icon={faEgg} className=\"m-1\" style={{fontSize:'0.5rem'}}/>\n            Saving<FontAwesomeIcon size=\"1x\" icon={faEgg} className=\"m-1\" style={{fontSize:'0.5rem'}}/>\n            Enjoying!</b></p>\n        </div>\n        <Container fluid={true} className=\"alert-light\" \n            style={{position: 'relative',\n            marginBottom: '0px',\n            minHeight:'1024px',\n            textAlign: 'center'}}>\n          \n          <Container className=\"text-left pt-3\"><h3>Weekly Promotion:</h3></Container>\n          <Container className=\"text-left p-0\">\n            {items.map((record, k)=> {\n                return (<div key={k} className=\"float-left p-2 m-0 text-center\">\n                    <IPFSImg ipfs={record.ipfs} isCache={true} \n                    className=\"\"\n                    style={{width:'200px', height:'200px', minHeight:'180px', objectFit: 'cover'}}\n                    />\n                    <div>{record.name}\n                      <br/>\n                      <StarRating value={record.rating} readOnly=\"true\"/>\n                    </div>\n\n                </div>)})}\n              <div className=\"clearfix p-0 m-0\"></div>\n            </Container>\n        </Container>\n      </div>\n      </Container>\n    </Container>\n  );\n}\nexport default Home;\n","import React from 'react';\nimport { Messagebox } from '../common';\nimport { useParams } from \"react-router-dom\";\n\nfunction ComingSoon(props) {\n  const param = useParams();\n  return (\n    <div className=\"m-0 p-0\">\n        <Messagebox message=\"Coming soon...\" title={param.title} />\n    </div>\n   \n  );\n}\n\nexport default ComingSoon;\n","import React , { useState, useEffect } from 'react';\nimport { Container, Badge } from 'react-bootstrap';\nimport { Engine, IPFSEngine  } from '../common';\nimport { DataStore } from '../../stores';\nimport  { CommunitySection }  from '.';\n\nfunction CommunityList(props) {\n  const engine = new Engine();\n  const ipfsEngine = new IPFSEngine();\n  const [items, setItems] = useState([]);\n  const [itm, setTm] = useState(new Date().getTime());\n\n  const loadList = ()=> {\n    console.log('.load list .' +  new Date().getTime())\n    engine.loadingOn();\n\n    engine.DatabaseApi('community', {\n      action: 'getList'\n    }, (result)=>{\n      engine.loadingOff();\n      console.log(result.data);\n      (async ()=> {\n        // setItems(await ipfsEngine.promisePullQ(result.data));\n        setItems(await ipfsEngine.promisePullQ(!result.data ? [] : result.data));\n        setTm(new Date().getTime());\n      })();\n     // setItems(await ipfsEngine.promisePullQ(result.data));\n    });\n  }\n\n  useEffect(()=> { \n    loadList();\n  },[]);\n\n  const deleteRecord = (publishCode)=> {\n    engine.loadingOn();\n    engine.DatabaseApi('community', {\n      action : 'delete',\n      data : {publishCode: publishCode}\n    }, (result)=>{\n      engine.loadingOff();\n      loadList();\n    });\n  }\n  \n  const  publishPlate = (rec) => {\n    engine.loadingOn();\n    engine.DatabaseApi('menu', {\n        action :'add',\n        data : {type: 'plate', publishCode: rec.publishCode}\n      }, (result)=>{\n        console.log(result)\n        loadList();\n        engine.loadingOff();\n      });\n  }\n\n  return (\n    <Container className=\"p-3 content-body\">\n       <h5>My community: <Badge bg=\"primary\" className=\"alert-primary ml-2\">{items.length}</Badge></h5>\n      <hr className=\"border border-danger\"/>\n      {items.map((v, k)=> {\n        return (<CommunitySection key={k} record={v} parent={{deleteRecord: deleteRecord, publishPlate:publishPlate}} />)\n      })}\n    </Container>\n  );\n}\nexport default CommunityList;","import React , { useState, useEffect } from 'react';\nimport { Container, Button } from 'react-bootstrap';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faArrowCircleRight, faTrashAlt} from '@fortawesome/free-solid-svg-icons';\nimport { Link } from \"react-router-dom\";\nimport { IPFSImg } from '../common';\n\nfunction CommunitySection(props) {\n  const [record, setRecord] = useState(props.record);\n  \n  useEffect(()=> {\n    setRecord(props.record);\n  }, []);\n\n  const showPhotoList = (photos) => {\n    return (<span className=\"clearfix\">\n        {photos.map((o, k)=>(<IPFSImg ipfs={o.ipfs} isCache={true}  key={k}\n            className=\"m-1 float-left  bg-secondary iconsImage\"/>)\n        )}\n    </span>)\n  }\n  const recordPhotos = (rec) => {\n    let photos = [], secs=['plates', 'cooking', 'ingredients'];\n    for (let i = 0; i < secs.length; i++) {\n      if (rec[secs[i]]) {\n        rec[secs[i]].map((v)=> {\n          photos = [...photos, ...v.photos];\n        })\n      }\n    }\n    return photos;\n  }\n\n\n\n  return (\n    <Container fluid={true} className=\"border shadow-sm p-2 mt-2 mb-3\">\n      <p className=\"float-right\" style={{maxWidth:'200px'}}>\n          {showPhotoList(recordPhotos(record.data))}\n      </p>  \n      <div className=\"p-0\">\n          <p className=\"p-0 pl-0 m-1\">\n            <b>{record.data.name}</b>\n            <Link to={'/communityResponse/' + record.publishCode} className=\"ml-3\">Details\n              <FontAwesomeIcon size=\"1x\" icon={faArrowCircleRight} className=\"ml-2\"/>\n            </Link>\n            <Button variant=\"link\" onClick={()=>{ props.parent.deleteRecord(record.publishCode, 'community') }} className=\"p-0 ml-3\">\n              <FontAwesomeIcon size=\"1x\" icon={faTrashAlt} /> Delete\n            </Button>\n            <br/>\n            <span><i style={{fontSize:'0.8rem'}}>Record id-: {record.id}, Publisher {record.publisher}</i></span>\n          </p>\n          {record.data.ingredients &&  (<p className=\"text-secondary p-1 pl-2 m-0\">\n            <i className=\"text-primary\">Ingredients:</i> \n            {record.data.ingredients.map((v, k)=>{  return v.text })}\n          </p>)}\n          {record.data.plates &&  (<p className=\"text-secondary p-1 pl-2 m-0\">\n            <i className=\"text-primary\">Plates:</i> \n            {record.data.plates.map((v, k)=>{  return v.text })}\n          </p>)}\n          {record.data.cooking &&  (<p className=\"text-secondary p-1 pl-2 m-0\">\n            <i className=\"text-primary\">Instruction:</i> \n            {record.data.cooking.map((v, k)=>{  return v.text })}\n          </p>)}\n          <p className=\"text-secondary p-1 pl-2 m-0\">\n            <i className=\"text-primary mr-2\">Published:</i> \n            {new Date(record.created).toISOString().slice(0, 19)}\n            {/*new Date(record.published).toISOString().slice(0, 19)*/}\n            <br/>\n            <i className=\"text-primary\">Id:</i> {record.id}\n            <br/>\n            <i className=\"text-primary\">Price:</i> {record.data.price}  \n            <br/>\n            <i className=\"text-primary\">Document type:</i> {record.docType}  \n          </p>\n          {(record.docType === 'plate') &&  \n          (<Button onClick={()=>{ props.parent.publishPlate(record) }} className=\"btn-promary m-1\">\n             Foodie approve\n          </Button>)}\n\n          {(record.docType === 'recipe') && \n            (<Button as={Link} to={'/editPlate/' + record.publishCode + '/new'} className=\"btn-warning m-1\">\n              Add my plate\n            </Button>)}\n\n          {(record.docType === 'recipe' && !record.data.referenceCode) &&\n            (<Button as={Link} to={'/editRecipe/' + record.publishCode + '/new'} className=\"btn-success m-1\">\n              Reference to a new recipe\n            </Button>)}\n      </div>\n      <div className=\"clearfix p-0 m-0\"></div>\n    </Container>\n  );\n}\nexport default CommunitySection;\n","import React , { useState, useEffect } from 'react';\nimport { Container } from 'react-bootstrap';\nimport { Engine } from '../common';\nimport { DataStore } from '../../stores';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faArrowCircleRight} from '@fortawesome/free-solid-svg-icons';\nimport { useParams, Link } from \"react-router-dom\";\nimport { IPFSEngine, IPFSImg } from '../common';\n\nfunction CommunityResponse(props) {\n  const engine = new Engine();\n  const ipfsEngine = new IPFSEngine();\n\n  const [record, setRecord] = useState(null);\n  // const [tm, setTm] = useState(0);\n  const { publishCode } = useParams();\n\n  const promiseIpfsQuery = (Q)=> {\n    console.log('Q==>', Q)\n    \n    return new Promise((resolve, reject) => {\n      fetch('http://209.94.90.1/ipfs/' + Q.recipe).then(v=>v.json()).then((data)=> {\n        const new_data = {\n          id : Q.id,\n          recipe : data,\n          ipfsCode: Q.recipe,\n          published: Q.published,\n          publisher: Q.publisher\n        } \n        resolve(new_data);\n      }).catch(err => { \n        reject('reject_' +  Q.recipe + '-'  + err.message);\n      });\n   })}\n\n  const showPhotoList = (photos, g) => {\n    return  photos.map((o, k)=> (<IPFSImg ipfs={o.ipfs} isCache={true}  key={k}  \n      className=\"m-1 bg-secondary iconsImage\"/>))\n  }\n  const recordPhotos = (rec, group) => {\n    let photos = [];\n    if (rec[group]) {\n      rec[group].map((v)=> {\n        photos = [...photos, ...v.photos];\n        return true;\n      })\n    }\n    return photos;\n  }\n/*\n  const showPhotoList = (photos) => {\n    return (<span className=\"clearfix\">\n        {photos.map((o, k)=>(<IPFSImg ipfs={o.ipfs} isCache={true}  key={k}\n            className=\"m-1 float-left  bg-secondary iconsImage\"/>)\n        )}\n    </span>)\n  }\n  const recordPhotos = (rec) => {\n    let photos = [], secs=['plates', 'cooking', 'ingredients'];\n    for (let i = 0; i < secs.length; i++) {\n      if (rec[secs[i]]) {\n        rec[secs[i]].map((v)=> {\n          photos = [...photos, ...v.photos];\n        })\n      }\n    }\n    return photos;\n  }\n*/\n\n  useEffect(()=> { \n    console.log(publishCode);\n    ipfsEngine.getIpfJsonsAsync(publishCode, (data)=> {\n\n      setRecord(data);\n      console.log('IPFSEngine.getIpfJsonsAsync==>',data);\n    })\n\n\n    engine.loadStorageData({}, ()=>{\n      const list = DataStore.getState().data.focuses.filter(v=>v.id === publishCode);\n      if (list[0]) {\n        promiseIpfsQuery(list[0]).then((v)=>{\n         // setRecord(v);\n         // setTm(new Date().getTime());\n        })\n      }\n\n    });\n  },[]);\n  \n  const showRecrd = (record) => (<Container fluid={true} className=\"border shadow-sm p-2 mt-2 mb-3\">\n      <p>\n          {record.name}\n      </p> \n      <div className=\"clearfix p-0 m-0\"></div>\n    </Container>)\n\n  return (!record)? '==' : (\n    <Container className=\"p-3 content-body\">\n       <h5>Focus - {publishCode}</h5>\n       {JSON.stringify(record)}\n       <hr/>\n       {showRecrd(record)}\n    </Container>\n  );\n}\nexport default CommunityResponse;","import React , { useState, useEffect } from 'react';\nimport { Container} from 'react-bootstrap';\nimport { SettingStore } from '../../stores';\n\nfunction DesignHead(props) {\n  const [myRoles, setMyRoles] = useState([]);\n  const [operationRole, setOperationRole] = useState(null);\n  const roles = SettingStore.getState().allRoles.sort((a, b)=> (b.id) && (a.id) &&  a.id - b.id);\n  const changeRole = (code)=> {\n    setOperationRole(code);\n    SettingStore.dispatch({\n      type: 'updateOperationRole',\n      operationRole: code\n    });\n  }\n\n  const showDesc = (code) => {\n    for (let o in roles) {\n      if (roles[o].code === code) {\n        return roles[o].desc;\n      }\n    }\n    return '';\n  }\n  const loadRoles = () => {\n    const myR = !SettingStore.getState() || \n                !SettingStore.getState().data || \n                !SettingStore.getState().data.authInfo ? [] : SettingStore.getState().data.authInfo.roles;\n    let operationRole = !SettingStore.getState() || \n                        !SettingStore.getState().data ? '' : SettingStore.getState().data.operationRole;\n\n    if (myR.indexOf(operationRole) === -1) {\n      operationRole = (!!myR.length) ?  myR[0] : '';\n      changeRole(operationRole); \n    }\n    setOperationRole((!operationRole && !!myR.length) ?  myR[0] : operationRole);\n    setMyRoles(myR.sort((a, b)=> (a.id && (a.id - b.id))));\n  }\n  useEffect(()=> {\n    loadRoles();\n  }, []);\n  const opertionAsLink = (v)=> {\n    return 'p-3 mr-1 text-secondary ' + ((operationRole === v) ? 'operation-as-link-checked' : 'operation-as-link');\n  }\n  const setCurrentRole = ()=> (<Container fluid={true} className=\"p-0 m-0 text-right\">\n      <span className=\"p-2 m-0 text-primary pl-2 border\">\n          {JSON.stringify(myRoles)} -- {operationRole}<b> Swith role:</b>\n          {roles.map((v, k)=> {\n            return (myRoles.indexOf(v.code) === -1) ? '' : \n            (<span key={k}  onClick={ ()=>{ changeRole(v.code); }}  className={opertionAsLink(v.code)}> {showDesc(v.code)}</span>)\n          })}\n      </span>\n  </Container>)\n\n  return (myRoles.length > 1) ? setCurrentRole() : ''\n}\nexport default DesignHead;","import React , { useState, useEffect } from 'react';\nimport { Container, Button, Badge  } from 'react-bootstrap';\n\nimport { DataStore } from '../../../stores';\n\nimport { Link } from \"react-router-dom\";\nimport { IPFSImg, Engine } from '../../common';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {  faTrashAlt, faEdit } from '@fortawesome/free-solid-svg-icons';\n\nfunction PlateList(props) {\n  const engine = new Engine();\n  const [items, setItems] = useState([]);\n  const [cnt, setCnt] = useState(0);\n  // const [tm, setTm ] = useState(new Date().getTime());\n\n  const showPhotoList = (photos) => {\n    return (<span className=\"clearfix\">\n        {photos.map((o, k)=>{\n          return (<IPFSImg ipfs={o.ipfs} isCache={true} key={k} className=\"float-left m-1 bg-secondary iconsImage\"/>)          \n        })}\n    </span>)\n  }\n  const recordPhotos = (rec) => {\n    let photos = [], secs=['plates', 'cooking', 'ingredients'];\n    for (let i = 0; i < secs.length; i++) {\n      if (rec[secs[i]]) {\n        rec[secs[i]].map((v)=> {\n          photos = [...photos, ...v.photos];\n        })\n      }\n    }\n    return photos;\n  }\n  const deleteRecord = (id, code)=> {\n    engine.loadingOn();\n    engine.saveLocalRecord({\n      type: 'deleteLocal',\n      section:code,\n      data: {id: id}\n    }, (data)=>{\n      loadList();\n      engine.loadingOff();\n    });\n  }\n  \n  const loadList = ()=> {\n    const list = DataStore.getState().data.plates;\n    const cnt = list.length;\n    setItems(list);\n    setCnt(cnt);\n  //  setTm(new Date().getTime());\n  } \n  \n  useEffect(()=> { \n      engine.loadStorageData({}, ()=>{\n        loadList();\n      });\n  }, [])\n\n  const showNothing = ()=> (\n    <Container fluid={true} className=\"rounded p-3 message-box grid-bg\">\n      <h3 className=\"text-secondary m-3 p-3\">There is not plate avaliable.</h3>\n    </Container>\n  );\n  const showList= (cnt)=> {\n    return (<Container fluid={true}  className=\"p-0 m-0\">\n    {items.map((rec, key) => {\n        return !rec ? '' : (\n        <Container fluid={true} key={key} className=\"border shadow-sm p-0 mt-2 mb-3\">\n          <div className=\"float-right mr-2 p-2\">\n            <Button variant=\"link\" as={Link} to={'/editPlate/' + rec.recipeCode + '/'+ rec.id} className=\"p-0 ml-3\">\n              <FontAwesomeIcon size=\"1x\" icon={faEdit} /> Edit\n            </Button>\n            <Button variant=\"link\" onClick={()=>{ deleteRecord(rec.id, 'plates') }} className=\"p-0 ml-3\">\n              <FontAwesomeIcon size=\"1x\" icon={faTrashAlt} /> Delete\n            </Button>\n          </div>\n          <b className=\"float-left p-2 pl-3 pr-3 pb-0 m-0\">{rec.name}</b>\n          <div className=\"clearfix p-0 m-0\"></div>\n          <Container fluid={true}  className=\"p-0 pl-3 pr-3 pb-1\">\n            <div>\n              <p className=\"float-right\" style={{maxWidth:'200px'}}>\n                 {showPhotoList(recordPhotos(rec))}\n              </p>  \n              <span className=\"text-primary\">Plates:</span>\n              {rec.plates.map((v, k)=>{  return v.text })}\n              <br/>\n              <span className=\"text-primary\">Instruction:</span>\n              {rec.cooking.map((v, k)=>{ return v.text })}\n            </div>\n            {(rec.price) && (<span className=\"text-primary\">Price : ${rec.price}</span>)}\n            <div className=\"clearfix p-1 m-0\"></div>\n          </Container>\n        </Container>);\n      })}</Container>);\n  }\n  return (\n    <Container fluid={true} className=\"content-body p-0 m-0\">\n        <h4 className=\"float-left\">Plates</h4>\n        <Badge className=\"float-left ml-1 mr-3 alert-primary\">{cnt}</Badge>\n      <div className=\"clearfix p-0 m-0\"></div>\n      {(cnt) ? showList(cnt) : showNothing()}\n    </Container>\n  );\n}\nexport default PlateList;","\nimport React , { useState, useEffect, useRef} from 'react';\nimport { Container, Form, Button, InputGroup } from 'react-bootstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faPaperclip, faTrashAlt, faTimesCircle } from '@fortawesome/free-solid-svg-icons'\nimport { IPFSImg } from '../../common';\n\nfunction PlateSectioon(props) {\n  const [record, setRecord] = useState(props.record);\n  const inputFileHandle = useRef(null); \n  const uploadFile = (e) => {\n    inputFileHandle.current.click();\n  }\n\n  const handleFileChange = async (e) => {\n    const list = [];\n    for (let i = 0; i <  e.target.files.length; i++) {\n        list.push({base64:await convertBase64(e.target.files[i])});\n        e.target.value = null;\n    }\n    record.photos = [...record.photos, ...list];\n    setRecord(record);\n    syncRec();\n  }\n\n  const removeSection = () => {\n    props.callParent.removeSection(props.idx);\n  }\n\n  const removePhoto = async (key) => {\n    record.photos.splice(key,1);\n    setRecord(record);\n    syncRec();\n  }\n\n  const convertBase64 = (file) => {\n    return new Promise((resolve, reject) => {\n      const fileReader = new FileReader();\n      fileReader.readAsDataURL(file)\n      fileReader.onload = () => {\n        resolve(fileReader.result);\n      }\n      fileReader.onerror = (error) => {\n        reject(error);\n      }\n    })\n  }\n\n  const syncRec = ()=> {\n    props.callParent.syncRec(props.idx, record);\n  }\n\n  const handleTextChange = async (e) => {\n    const rec = record;\n    rec.text=e.target.value;\n    setRecord(rec);\n    syncRec();\n  }\n\n  useEffect(()=> {\n\n  }, []);\n  \n  return (\n    <Container fluid=\"true\" className=\"p-2\">\n      <InputGroup className=\"m-2\">\n        {(record.idx) ? (<InputGroup.Text className=\"bg-light\">{record.idx}</InputGroup.Text>) : ''}\n        <Form.Control as=\"textarea\" defaultValue={(!props.record) ? '' : props.record.text} \n                  rows=\"2\" onChange={handleTextChange}/>\n      </InputGroup>\n      <Form.Control type=\"file\" hidden ref={inputFileHandle} onChange={handleFileChange}/>\n      <div className=\"clearfix p-1\">\n          <div  className=\"float-right\">\n            {props.isdelete && (<Button variant=\"link\" className=\"ml-3\" onClick={removeSection}>\n              <FontAwesomeIcon size=\"1x\" icon={faTrashAlt} className=\"m-0\" /> Remove\n            </Button>)}\n\n            <Button variant=\"link\" className=\"ml-3\" onClick={uploadFile}>\n              <FontAwesomeIcon size=\"1x\" icon={faPaperclip} className=\"m-0\" /> Upload Photo\n            </Button>\n          </div>\n        {record.photos.map((fa, key)=>{\n            return (\n            <div  key={key}  className=\"m-1 rounded shadow sahdow-sm alert-secondary bg-light float-left\">\n\n              <IPFSImg base64={fa.base64} ipfs={fa.ipfs} isCache={true} className=\"iconsImage\" />\n\n              <FontAwesomeIcon size=\"2x\" icon={faTimesCircle} \n                onClick={()=>removePhoto(key)}\n                className=\"m-1 align-bottom\" />\n            </div>\n            )\n          })}\n      </div>\n    </Container>\n  );\n}\nexport default PlateSectioon;\n","import React , { useState, useEffect } from 'react';\nimport { Form, Button,  Row, Col, Container } from 'react-bootstrap';\nimport PlateSection from './PlateSection';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faPlus, faSave, faUndo } from '@fortawesome/free-solid-svg-icons'\n\nimport { DataStore, SettingStore } from '../../../stores';\nimport { useHistory, useParams } from \"react-router-dom\";\n\nimport { Engine, IPFSEngine, IpfsDoc, DisplayRecipe } from '../../common';\n\nfunction EditPlate(props) {\n  const engine = new Engine();\n  const ipfsEngine = new IPFSEngine();\n  const history = useHistory();\n\n  const [tm, setTm] = useState(new Date().getTime());\n  const [record, setRecord] = useState(null);\n\n  const {id, recipeCode} = useParams();\n  if (tm) {}\n\n  useEffect(()=> {\n    const engine = new Engine();\n    \n    engine.loadStorageData({}, ()=>{\n      console.log(DataStore.getState().data);\n      const idx = DataStore.getState().data.plates.findIndex((v)=> v.id === id);\n      setRecord((id === 'new') ? {\n        id : 'new',\n        recipeCode: recipeCode,\n        name:'plate ' + recipeCode, \n        userId: SettingStore.getState().userId, \n        cooking: [{text:'', photos:[]}], \n        plates:[{idx:'', text:'', photos:[]}]}\n       : (idx === -1) ? false : DataStore.getState().data.plates[idx]\n      );\n    });\n  }, [])\n\n  const exit = ()=> {\n    engine.setOperationRole('supie');\n    history.push('/workshop');\n  } \n  \n  const save = async ()=> {\n    engine.loadingOn();\n    await ipfsEngine.promiseSave(record);\n    console.log(\"DataStore.getState()\", DataStore.getState());\n\n    engine.saveLocalRecord({\n      type: 'updateLocal',\n      section:'plates',\n      data: record\n    }, ()=>{\n      engine.setOperationRole('supie');\n      engine.loadingOff();\n      exit();\n    });\n  }\n\n  const publish = async ()=> {\n    engine.loadingOn();\n    await ipfsEngine.promiseSave(record);\n    ipfsEngine.promisePublish(record,(code)=> {\n      engine.DatabaseApi('community', {\n        action: 'publish',\n        data: {\n          publishCode:  code, \n          docType:      'plate', \n          publisher:    SettingStore.getState().fp, \n          authCode:     SettingStore.getState().data.authInfo.authCode\n        }\n      }, ()=>{\n        engine.loadingOff();\n        exit();\n      } )\n    });\n  }  \n  const removeSection = (section) => {\n    return (idx) => {\n      if (record[section]) {\n        record[section].splice(idx,1)\n        setRecord(record);\n        resetIdx(section);\n        setTm(new Date().getTime())\n      }\n    }\n  }\n  const resetIdx = (section) => {\n    const set = 'ABCDE';\n    if (!record[section]) return true;\n    for (let i = 0; i < record[section].length; i++) {\n      record[section][i].idx = set[i];\n    }\n    setRecord(record);\n  }\n  const addSection = (section)=> {\n    return ()=> {\n      const rec = record;\n      if ((rec[section]) && rec[section].length < 3) {\n        rec[section].push({idx:'', text:'', photos:[]});\n        resetIdx(section)\n        setRecord(rec);\n        setTm(new Date().getTime())\n      }\n    }\n  }\n  const syncRec = (section)=> {\n    return (idx, data) => {\n      const rec = record;\n      if (rec[section]) {\n        rec[section][idx] = data;\n        setRecord(rec);\n        setTm(new Date().getTime())\n      }\n    }\n  }\n  const referenceRecipe = (code)=> {\n    return (!code) ? '': (<Form.Text className=\"border border-secondary  alert-warning p-2 m-0\"\n    style={{height:'6rem',overflowY:'scroll', overflowX:'hidden', inline:'block'}}>\n      <Form.Text><i>Original Recipe</i></Form.Text>\n      <IpfsDoc ipfs={code} tpl={(props)=>(<DisplayRecipe record={props.record} className=\"p-0 m-0\" />)}/>\n    </Form.Text>)\n  }\n\n  const onPriceChange = (e)=> {\n    record.price=e.target.value;\n    setRecord(record);\n  }\n  return (record === null) ? \n  (<Container className=\"p-3 content-body\">\n    Loading ...\n  </Container>)\n  : (!record.id) ? \n    (<Container className=\"p-3 content-body\">\n      <div className=\"alert alert-danger\">Wrong recipe id -{id}-</div>\n    </Container>)\n    : (\n    <Container className=\"p-3 content-body\">\n      <div className=\"p-3 border border-secondary\">\n      <Form>\n        <Form.Group className=\"m-1 ml-2 mb-3\">\n          <Form.Label><b>Plate Design:</b></Form.Label>\n          {referenceRecipe(record.recipeCode)}\n        </Form.Group>\n\n        <div className=\"m-1 ml-2 mb-3\">\n          <b>Plats Description</b> {record.recipeCode}\n          {record.plates.length < 3 && (<Button variant=\"link\" className=\"float-right mr-3 button-link\" onClick={addSection('plates')}>\n            <FontAwesomeIcon size=\"1x\" icon={faPlus}  /> Add a Plate\n          </Button>)}\n\n          {record.plates.map((v, key)=>(<span key={key} >\n          <PlateSection caption={'Section'} key={key}  idx={key} callParent={{syncRec:syncRec('plates'), removeSection: removeSection('plates')}}\n          record = {v}\n          isdelete={(record.plates.length < 2) ? false : true}/></span>))}\n        </div>\n\n        <div className=\"m-1 ml-2\"><b>Cooking Instruction</b></div>\n\n        {record.cooking.map((v, key)=>(<span key={key} >\n          <PlateSection caption={''} key={key}  idx={key} callParent={{syncRec:syncRec('cooking'), removeSection: removeSection('cooking')}} \n          record = {v}\n          isdelete={(record.cooking.length < 2) ? false : true}/></span>))}\n\n        <Form.Group className=\"m-1 ml-2 mb-3\">\n          <Form.Label><b>Plate Price:</b></Form.Label>\n          <Form.Control defaultValue={record.price}  placeholder=\"Input price\" type=\"text\" onChange={onPriceChange} />\n        </Form.Group>\n\n        <Row>\n          <Col xs=\"12\" align=\"center\" className=\"m-1 ml-2\">    \n            <Button  type=\"button\" className=\"btn btn-primary m-1 mr-3\" onClick={save}>\n            <FontAwesomeIcon size=\"1x\" icon={faSave} className=\"m-0\" /> Save\n            </Button>\n            <Button  type=\"button\" className=\"btn btn-primary m-1 mr-3\" onClick={publish}>\n            <FontAwesomeIcon size=\"1x\" icon={faSave} className=\"m-0\" /> Response to Foodie\n            </Button>\n            <Button className=\"btn btn-secondary m-1 mr-3\" onClick={exit}>\n            <FontAwesomeIcon size=\"1x\" icon={faUndo} className=\"m-0\" /> Exit\n            </Button> \n          </Col>\n        </Row>\n      </Form>\n      </div>\n    </Container>\n  );\n}\nexport default EditPlate;\n","import React , { useState, useEffect } from 'react';\nimport { Container} from 'react-bootstrap';\nimport { OperationSection } from '.';\nimport { SettingStore } from '../../stores';\n\nimport { RecipeList } from './recipes';\nimport { PlateList } from './plates';\nimport { useLocation  } from \"react-router-dom\";\n\nfunction Workshop(props) {\n  const [operationRole, setOperationRole] = useState('');\n  const location = useLocation();\n  useEffect(()=> { \n    const handleSubscribe = SettingStore.subscribe(() => {\n      if (SettingStore.getState()._watcher === 'role') {\n        console.log('===role changed', SettingStore.getState().data.operationRole);\n       setOperationRole(SettingStore.getState().data.operationRole);\n      }\n    });\n    setOperationRole(SettingStore.getState().data.operationRole);\n    return ()=> {\n      handleSubscribe();\n    }\n  }, []);\n\n  return (\n    <Container className=\"p-3\">{props.tm}\n      <OperationSection/>\n      <div className=\"clearfix p-1 m-0\"></div>\n      {JSON.stringify(SettingStore.getState())}\n      =={operationRole}==\n      {(operationRole === 'foodie') && (<RecipeList/>)}\n      {(operationRole === 'supie') && (<PlateList/>)}\n    </Container>\n  );\n}\nexport default Workshop;","import React , {  useEffect, useState } from 'react';\nimport { Container } from 'react-bootstrap';\nimport { MyCartList } from '../shoppingCart';\nimport { OrderItem, OrderInfo } from '../Orders';\nimport { ShoppingCartOprator, ShoppingCartWatcher } from '../shoppingCart';\nimport { Messagebox } from '../common';\nfunction MyOrder() {\n  const myList = new MyCartList();\n  \n  const [list, setList] = useState([]);\n  const [tm, setTm] = useState(new Date().getTime());\n\n  const ShoppingCartChanged = ()=> {\n    setList(myList.getList());\n    setTm(new Date().getTime());\n  }\n  useEffect(()=> {\n    setList(myList.getList());\n   }, []);\n   return (<Container className=\"mt-3 pt-3\">\n    <ShoppingCartWatcher changed={ShoppingCartChanged}/>\n    <ShoppingCartOprator operater=\"initShoppingCart\" caption=\"Clean up the cart\" className=\"text-primary ml-3\"/>\n    {(!list.length) ? '' : list.map((v, k)=> {\n      return (v === null) ? '' : (<span key={k}>\n        <OrderItem record={v} tm={tm}/>\n      <br/></span>);\n    })}\n    {(!list.length)? (<Messagebox message=\"Empty shopping cart!\" />) : ''}\n  </Container>)\n}\nexport default MyOrder;\n","import React , {  useEffect, useState } from 'react';\nimport { Container} from 'react-bootstrap';\nimport { OrderDetails, OrderInfo } from '../Orders';\nimport { IPFSEngine } from '../common';\nimport { ShoppingCartOprator } from '../shoppingCart';\n\nfunction OrderItem(props) {\n\n  const ipfsEngine = new IPFSEngine();\n\n  const itemCode  = props.record.code;\n  const [ record, setRecord ] = useState({});\n  const [tm, setTm] = useState(0);\n\n  const processData = async (code, callback)=>{\n    const p = await ipfsEngine.promiseIpfsJSON(code);\n    callback(p)\n  }\n\n  useEffect(()=> {\n    const p = processData(itemCode, (p)=>{\n      setRecord(p);\n      setTm(new Date().getTime());\n\n    });\n    \n   }, []);\n\n  return (\n    <Container  fluid={true}>\n      <OrderInfo rec={record} itemCode={itemCode} version={tm}/>\n    </Container>\n  );\n}\nexport default OrderItem;\n","\nimport React , { useState, useEffect } from 'react';\nimport { Container, Row, Col, Button, Image } from 'react-bootstrap';\nimport { IPFSImg  } from '../common';\nimport { ShoppingCartOprator } from '../shoppingCart';\n\nfunction OrderInfo(props) {\n  const [record, setRecord] = useState(props.rec);\n  const [photos, setPhotos] = useState([]);\n  const [content, setContent] = useState('');\n  const itemCode = props.itemCode;\n  const getContents = (rec)=>{\n    const list = [];\n    ['cooking', 'ingredients', 'plates'].map((v)=> {\n        const r = (!rec || !rec[v]) ? [] : rec[v];\n        r.map((v2)=>  list.push(v2.text + '; '));\n        return true;\n    });\n    setContent(list.join(' '));\n    \n  }\n  const getImages = (rec)=>{\n    const list = [];\n    ['cooking', 'ingredients', 'plates'].map((v)=> {\n        const r = (!rec || !rec[v]) ? [] : rec[v];\n        r.map((v1) => {\n          const photos = (!v1.photos) ? [] : v1.photos;\n          photos.map((v2)=> {\n            if (v2 && v2.ipfs) {\n              list.push(v2.ipfs);\n            } \n            return true;\n          });\n          return true;\n        })\n        return true;\n    });\n    setPhotos(list);\n  }\n\n  useEffect(()=> {\n    setRecord(props.rec);\n    getImages(props.rec);\n    getContents(props.rec);\n  }, []);\n\n  useEffect(()=> {\n    setRecord(props.rec);\n    getImages(props.rec);\n    getContents(props.rec);\n  }, [props.version]);\n\n  return  (!record.id || !photos[0]) ? '' :  (\n  <Container className=\"p-1\"  fluid={true} >\n    <div className=\"float-right p-2 m-1 border rounded right\">\n      <ShoppingCartOprator code={itemCode} operater=\"minus\" className=\"text-primary mr-3\"/>\n      <ShoppingCartOprator code={itemCode} operater=\"showCount\" className=\"text-primary\"/>\n      <ShoppingCartOprator code={itemCode} operater=\"plus\"  className=\"text-primary ml-3\"/>\n      <ShoppingCartOprator code={itemCode} operater=\"remove\"  className=\"text-primary ml-3\"/>\n      <br/>\n      <ShoppingCartOprator code={itemCode} operater=\"showTotal\" price={record.price} className=\"text-primary\"/>\n    </div>\n    <Container className=\"p-1\"  fluid={true} >\n      <Row>\n        <Col xs={1} style={{textAlign: \"center\"}} className=\"p-0\">\n          <div  className=\"border bg-light\">\n          <IPFSImg ipfs={photos[0]} isCache={true} className=\"m-3\" \n           style={{maxWidth:'48px', maxHeight:'48px', objectFit: 'cover'}}/>\n          </div>\n        </Col>\n        <Col xs={11}  className=\"p-3\">\n          {record && record.name}\n        </Col>\n        <br/>\n      </Row>\n    </Container>\n     <div className=\"clearfix p-0 m-0\"></div>\n  </Container>\n  );\n}\nexport default OrderInfo;\n","import React , { useState, useEffect } from 'react';\nimport { Container, Form, Button, Alert } from 'react-bootstrap';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faSearch } from '@fortawesome/free-solid-svg-icons';\n\nimport { AddressInput, Engine } from '../common';\nimport { SettingStore } from '../../stores';\n\nfunction BecomeFoodie(props) {\n  const engine = new Engine();\n  const [address, setAddress] = useState('');\n  const [description, setDescription] = useState('');\n  const [phone, setPhone] = useState('');\n  const [success, setSuccess] = useState(false);\n\n  const submitApplication = ()=> {\n    engine.loadingOn();\n    engine.DatabaseApi('application', {\n      action: 'save',\n      data: {\n        type:'foodie', \n        visitorId: SettingStore.getState().fp, \n        address:address,\n        phone : phone,\n        description: description\n      }\n    }, ()=>{\n      engine.loadingOff();\n      setSuccess(true);\n    });\n  }\n  const onDescriptionChanged = (e)=> {\n    setDescription(e.target.value);\n  }\n  const onPhoneChanged = (e)=> {\n    const patt = /^\\(?([0-9]{3})\\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/;\n    if (patt.test(e.target.value)) {\n      e.target.value = e.target.value.replace(patt, '($1)$2-$3');\n      setPhone(e.target.value.replace(patt, '($1)$2-$3'));\n    } else {\n      setPhone('');\n    }\n  }\n  const isSubmit = () => {\n    return (!address) ? false : true;\n  }\n\n  useEffect(()=> {}, []);\n\n  const successForm = () =>  (\n    <Container>\n      <Alert variant=\"success mt-3\">\n        <Alert.Heading>You application submitted!</Alert.Heading>\n          <span>\n            You might become a foodie automatically upon our AI valification. or you will be contacted sooner. \n          </span>\n        </Alert>\n    </Container>);\n\n  const inputForm = () => (\n   <Container className=\"mb-3 pb-3\">\n      <Alert variant=\"secondary mt-3\">\n        <Alert.Heading>If you have the Foodie role:</Alert.Heading>\n        <ul>\n          <li>You can be a housewife who wants to share her cooking hobby with neighbours, \n            while making a side income. Foodie can be a restaurant owner, to extend their business objectives. </li>\n          <li>You needs to provide a real address (not PO box), can create receipts, and contact supplies. </li>\n          <li>You drives the following workflow: create receipt -> contact supplier and confirm the plate -> \n            publish the plate to menu</li>\n          <li>You authentication requires a barcode provided by DishFoo via mail. \n            Once the barcode is scanned, then Foodie can publish the plate to the menu.</li>\n        </ul>\n      </Alert>\n      <Form>\n      <Form.Group>\n          <Form.Label><b>Foodie Address:</b> <span className=\"form_notice_info\">* Required</span></Form.Label>\n          <AddressInput passAddress={setAddress} defaultValue={address}/>\n        </Form.Group>\n        <Form.Group>\n          <Form.Label><b>Application Description:</b> <span className=\"form_notice_info\">(Option)</span> </Form.Label>\n          <Form.Control defaultValue={description} placeholder=\"Input Description\" as=\"textarea\" \n            rows=\"3\"\n            onChange={onDescriptionChanged } />\n        </Form.Group>\n        <Form.Group>\n          <Form.Label><b>Contact Phone:</b> <span className=\"form_notice_info\">(Option)</span></Form.Label>\n          <Form.Control defaultValue={phone} placeholder=\"Input Contact Phone\" as=\"textarea\" \n            rows=\"1\"\n            onChange={onPhoneChanged} />\n        </Form.Group>\n        <Button className=\"btn btn-info m-0 mr-3\" disabled={!isSubmit()}  onClick={submitApplication}>\n          <FontAwesomeIcon size=\"1x\" icon={faSearch} className=\"m-0\" /> Submit\n        </Button>\n      </Form>\n   </Container>);\n   return (!success) ? inputForm() : successForm();\n}\n\nexport { BecomeFoodie }","import React , { useState, useEffect } from 'react';\nimport { Container, Form, Button, Alert } from 'react-bootstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCloudUploadAlt } from '@fortawesome/free-solid-svg-icons';\nimport { AddressInput, Engine } from '../common';\nimport { SettingStore } from '../../stores';\n\nfunction BecomeSupie(props) {\n  const engine = new Engine();\n  const [address, setAddress] = useState('');\n  const [qualification, setQualification] = useState('');\n  const [description, setDescription] = useState('');\n  const [phone, setPhone] = useState('');\n  const [success, setSuccess] = useState(false);\n\n  const submitApplication = ()=> {\n    engine.loadingOn();\n    engine.DatabaseApi('application', {\n      action: 'save',\n      data: {\n        type:'supie', \n        visitorId: SettingStore.getState().fp, \n        address:address, \n        phone : phone,\n        qualification: qualification,\n        description: description\n      }\n    }, ()=>{\n      engine.loadingOff();\n      setSuccess(true);\n    });\n  }\n  const onQualificationChanged = (e)=> {\n    setQualification(e.target.value);\n  }\n  const onDescriptionChanged = (e)=> {\n    setDescription(e.target.value);\n  }\n\n  const isSubmit = () => {\n    return (!phone || !address || !qualification) ? false : true;\n  }\n  const onPhoneChanged = (e)=> {\n    const patt = /^\\(?([0-9]{3})\\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/;\n    if (patt.test(e.target.value)) {\n      e.target.value = e.target.value.replace(patt, '($1)$2-$3');\n      setPhone(e.target.value.replace(patt, '($1)$2-$3'));\n    } else {\n      setPhone('');\n    }\n  }\n  useEffect(()=> {}, []);\n\n  const successForm = () =>  (\n    <Container>\n    <Alert variant=\"success mt-3\">\n      <Alert.Heading>You application submitted!</Alert.Heading>\n        <span>\n          You might become a supie automatically upon our AI valification. or you will be contacted sooner. \n        </span>\n      </Alert>\n    </Container>);\n/*\n  const errorBox = () => {\n    const title = (<span className=\"text-success\">You application submitted! </span>)\n    const message = (<span className=\"text-success\">\n    You might become a supie automatically upon our AI valification. or you will be contacted sooner. </span>)\n    return (<alert message={message} title={title} className=\"mt-3\"/>)\n  }\n*/\n  const inputForm = ()=> (\n   <Container className=\"mb-3 pb-3\">\n      <Alert variant=\"secondary mt-3\">\n        <Alert.Heading>If you have the Supie role</Alert.Heading>\n        <ul>\n          <li>You can be grocery stores, farms or restaurants.</li>\n          <li>You can make plate based on receipt and send back to Foodie for validation.</li>\n          <li> You needs to provide a real address (not PD box), can view the receipts from Foodie.</li>\n        </ul>\n      </Alert>\n\n      <Form>\n        <Form.Group>\n          <Form.Label><b>Supie Address:</b> <span className=\"form_notice_info\">* Required</span></Form.Label>\n          <AddressInput passAddress={setAddress} defaultValue={address}/>\n        </Form.Group>\n        <Form.Group>\n          <Form.Label><b>Contact Phone:</b> <span className=\"form_notice_info\">* Required</span></Form.Label>\n          <Form.Control defaultValue={phone} placeholder=\"Input Contact Phone\" as=\"textarea\" \n            rows=\"1\"\n            onChange={onPhoneChanged} />\n        </Form.Group>\n        <Form.Group>\n          <Form.Label><b>Your Qualification:</b> <span className=\"form_notice_info\">* Required</span></Form.Label>\n          <Form.Control defaultValue={qualification} placeholder=\"Input Qualification\" as=\"textarea\" \n            rows=\"1\"\n            onChange={onQualificationChanged } />\n        </Form.Group>\n        <Form.Group>\n          <Form.Label><b>Application Description:</b> <span className=\"form_notice_info\">(Option)</span> </Form.Label>\n          <Form.Control defaultValue={description} placeholder=\"Input Description\" as=\"textarea\" \n            rows=\"3\"\n            onChange={onDescriptionChanged } />\n        </Form.Group>\n        <Button className=\"btn btn-info m-0 mr-3\" disabled={!isSubmit()} onClick={submitApplication}>\n          <FontAwesomeIcon size=\"1x\" icon={faCloudUploadAlt} className=\"m-0\" /> Submit\n        </Button>\n      </Form>\n   </Container>);\n\n   return (!success) ? inputForm() : successForm()\n}\n\nexport { BecomeSupie }","import React , { useEffect } from 'react';\nimport RecipeEdit from './workshop/recipes/RecipeEdit';\nimport MenuItems from './menu/Items';\n\nimport { Switch, Route } from \"react-router-dom\";\nimport { Container } from 'react-bootstrap';\n\nimport { About, Contact, Home } from \"./content\";\nimport { RoleSection } from './common';\nimport  ComingSoon from './content/ComingSoon';\nimport {  CommunityList, CommunityResponse } from './community';\nimport { Setting } from './setting';\n\nimport { Workshop } from \"./workshop\";\nimport {  MyOrders} from \"./Orders\";\nimport {  EditPlate } from './workshop/plates';\nimport { BecomeFoodie, BecomeSupie } from './application';\nimport { AuthBody  }  from './mobileAuth';\n\nfunction Body(props) {\n  useEffect(() => {\n  }, []);\n\n  return (\n    <Container fluid={true} className=\"m-0 p-0\">\n        <Switch>\n\n          <Route exact path=\"/workshop\">\n            <RoleSection roles={['foodie', 'supie']} \n              comp={(<Workshop />)}\n                showException={false} />\n          </Route>\n\n          <Route exact path=\"/community\">\n            <CommunityList/>\n            <RoleSection roles={[['foodie', 'supie']]} \n              comp={<CommunityList/>}\n              showException={false} />\n          </Route>\n\n          <Route  exact path=\"/orders\">\n            <MyOrders/>\n          </Route>\n\n          <Route  exact path=\"/auth\">\n            <AuthBody/>\n          </Route>\n\n          <Route  exact path=\"/editRecipe/:id\">\n            <RecipeEdit/>\n          </Route>\n          \n          <Route  exact path=\"/editRecipe/:recipeCode/:id\">\n            <RecipeEdit/>\n          </Route>\n\n          <Route  exact path=\"/communityResponse/:publishCode\">\n            <CommunityResponse/>\n          </Route>\n\n          <Route  exact path=\"/editPlate/:recipeCode/:id\">\n            <EditPlate/>\n          </Route>\n\n          <Route exact path=\"/becomeFoodie\">\n            {<RoleSection roles={['all']} exroles={['foodie']}\n              comp={<BecomeFoodie/>}\n              showException={false} />}\n          </Route>\n\n          <Route exact path=\"/becomeSupie\">\n            {<RoleSection roles={['all']} exroles={['supie']}\n              comp={<BecomeSupie/>}\n              showException={false} />}\n          </Route>\n          \n\n          <Route  exact path=\"/about\">\n            <About/>\n          </Route>\n          <Route  exact path=\"/contact\">\n            <Contact/>\n          </Route>\n          <Route  exact path=\"/\">\n            <Home/>\n          </Route>\n          <Route  exact path=\"/menus\">\n            <MenuItems/>\n          </Route>\n\n          <Route  exact path=\"/setting\">\n            <Setting/>\n          </Route>\n\n          <Route path=\"/:title\">\n            <Container fluid=\"true\" className=\"p-3 content-body\">\n              <ComingSoon/>\n            </Container>\n          </Route>\n        </Switch>\n    </Container>\n   \n  );\n}\n\nexport default Body;\n","import React , { useEffect, useState } from 'react';\nimport { BrowserRouter as Router, Route, Switch} from \"react-router-dom\";\nimport  Header  from './modules/Header';\nimport  Footer  from './modules/Footer';\nimport  Body from './modules/Body';\nimport { Spinner } from 'react-bootstrap';\nimport { MobileAuth, InfoCatch, ScanSignin } from './modules/mobileAuth'\nimport './App.css';\nimport { useMediaQuery } from 'react-responsive';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { SettingStore } from './stores/';\nimport { Loading, FingerPrinter, InfoHeader } from './modules/common';\n\n\nconst App = (props) => {\n  const fp = new FingerPrinter();\n  const [loadReady, setloadReady] = useState(false);\n\n  const screenModel = {\n    isDesktopOrLaptop : useMediaQuery({ query: '(min-width: 1224px)'}),\n    isBigScreen : useMediaQuery({ query: '(min-width: 1824px)' }),\n    isTabletOrMobile : useMediaQuery({ query: '(max-width: 1224px)' }),\n    isPortrait : useMediaQuery({ query: '(orientation: portrait)' }),\n    isRetina : useMediaQuery({ query: '(min-resolution: 2dppx)' })\n  };\n\n  useEffect(() => {\n    const handleSubscribe = SettingStore.subscribe(() => {\n      if (SettingStore.getState()._watcher === 'afterInit') {\n        setloadReady(true);\n      }\n      return false;\n    }); \n\n    (async()=>{\n      console.log(await fp.load());\n    })();\n    \n    setTimeout(\n      ()=> {\n        console.log('==fp.visitorId==', fp.visitorId);\n        SettingStore.getState().fp = fp.visitorId;\n        console.log(SettingStore.getState().fp);\n      }, 1000\n    )\n    SettingStore.dispatch({ type: 'loadScreenModel',\n      screenModel: screenModel\n    });\n\n    return ()=> {\n      handleSubscribe();\n  }\n  }, []);\n  // localStorage.clear();\n  console.log('called localStorage.clear()');\n\n  const pageLoading = (<InfoHeader comp={(<Spinner animation=\"border\" size=\"md\" className=\"loading-text\"/>)} />);  \n\n  const pageReady = (\n      <Router className=\"p-0 m-0\">\n        <Switch>\n          <Route exact path=\"/MobileAuth/:SocketID\">\n            <MobileAuth/>\n          </Route>\n          <Route exact path=\"/ScanSignin/:RequestID\">\n            <ScanSignin/>\n          </Route>\n          <Route exact path=\"/InfoCatch/:InfoCode\">\n            <InfoCatch/>\n          </Route>\n          <Route>\n            <Header/>\n            <Loading/>\n            <Body/>\n            <Footer/>\n          </Route>\n        </Switch>\n      </Router>)\n\n    return (!loadReady) ? pageLoading : pageReady;\n}\n\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\ndocument._cacheExist = true;\nReactDOM.render(\n  <React.StrictMode>\n    <App/>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}