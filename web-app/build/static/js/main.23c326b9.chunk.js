(this["webpackJsonpweb-app"]=this["webpackJsonpweb-app"]||[]).push([[0],{149:function(e,t){},157:function(e,t,a){},159:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),i=a(35),s=a.n(i),r=(a(93),a(8)),o=a.n(r),d=a(10),l=a(7),u=a(14),j=a(9),b=a(167),h=a(161),f=a(168),O=(a(36),a(1));var p=a(16),g=a(40),m=a(50),x=["recipes","plates","orders","menus","focuses"],v=Object(g.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:{recipes:[],plates:[],orders:[],menus:[],focuses:[]},LastAction:null},t=arguments.length>1?arguments[1]:void 0;e.LastAction=t.type;var a=-1===x.indexOf(t.section)?null:t.section;switch(t.type){case"updateLocal":case"updateApi":if(a){if("new"===t.data.id)t.data.id=(new Date).getTime().toString(),e.data[a].push(t.data);else{var n=e.data[a].findIndex((function(e){return e.id===t.data.id}));e.data[a][n]=t.data}localStorage.setItem("localData",JSON.stringify(e.data))}return e;case"deleteLocal":case"deleteApi":if(a){var c=e.data[a].findIndex((function(e){return e.id===t.data.id}));-1!==c&&e.data[a].splice(c,1),localStorage.setItem("localData",JSON.stringify(e.data))}return e;case"publishPlate":var i=e.data.focuses.findIndex((function(e){return e.id===t.data.id}));return-1!==i&&(delete e.data.focuses[i].data,e.data.menus.push(e.data.focuses[i]),e.data.focuses.splice(i,1)),localStorage.setItem("localData",JSON.stringify(e.data)),e;case"loadLocal":case"loadApi":return e.data=t.data,e;case"publish":return t.data.id=(new Date).getTime().toString(),e.data.focuses.push(t.data),localStorage.setItem("localData",JSON.stringify(e.data)),e;case"addShoppingCartItem":return e.LastAction="shopping",function(e){var a=e.data.orders.findIndex((function(e){return e.code===t.data.code}));-1===a?e.data.orders.push({code:t.data.code,count:1}):e.data.orders[a].count=e.data.orders[a].count+1,localStorage.setItem("localData",JSON.stringify(e.data))}(e),e;case"updateShoppingCartItem":return e.LastAction="shopping",function(e){var a=e.data.orders.findIndex((function(e){return e.code===t.data.code}));return-1!==a&&(e.data.orders[a].count=t.data.count>=0?t.data.count:e.data.orders[a].count),localStorage.setItem("localData",JSON.stringify(e.data)),e}(e);case"removeShoppingCartItem":return e.LastAction="shopping",function(e){var a=e.data.orders.findIndex((function(e){return e.code===t.data.code}));return-1!==a&&e.data.orders.splice(a,1),localStorage.setItem("localData",JSON.stringify(e.data)),e}(e);case"initShoppingCart":return e.LastAction="shopping",function(e){return e.data.orders=[],localStorage.setItem("localData",JSON.stringify(e.data)),e}(e);default:return e}}),Object(m.composeWithDevTools)()),S=a(33),y=a(53);console.log("window.location.hostname--\x3e",window.location.hostname);var I={ready:!1,loading:{},screenModel:{},_watcher:"",fp:"1234",data:{roles:[],operationRole:"",screenModel:{},auth:!1,AuthInfo:{}},allRoles:[{id:1,code:"foodie",desc:"Foodie",description:"Foodie"},{id:2,code:"supie",desc:"Food supplier",description:"Food supplier / Restaurent / Grocery"}],config:{apiServer:"http://192.168.86.126:3001",webServer:"http://192.168.86.126:3000",sockerServer:"http://192.168.86.126:3001/dishFu",ipfsServer:"//gateway.ipfs.io/ipfs/"}},N=Object(g.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(e._watcher="",t.type){case"saveRoles":return e.data.roles=t.roles,e._watcher="role",w(e.data),e;case"saveUserInfo":return e.data.userInfo=t.userInfo,w(e.data),e;case"saveAuthInfo":return e.data.authInfo=Object(S.a)({},t.data),delete e.data.authInfo.auth,e.data.auth=t.data.auth,e.data.roles=t.data&&t.data.roles?t.data.roles:[],e._watcher="auth",w(e.data),e;case"updateOperationRole":return e._watcher="role",e.data.operationRole=t.operationRole,w(e.data),e;case"loadScreenModel":return e.screenModel=t.screenModel,e;case"addLoading":return e._watcher="loading",e.loading[t.id]=(new Date).getTime(),e;case"removeLoading":return e._watcher="loading",delete e.loading[t.id],e;case"initStore":return e.data=t.data,e._watcher="afterInit",e;default:return e}}),Object(m.composeWithDevTools)()),w=function(e){setTimeout((function(){localStorage.setItem("localSettingData",JSON.stringify(e))}),500)};(function(){var e=Object(d.a)(o.a.mark((function e(t){var a,n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=y.a.load(),e.next=3,a;case 3:return n=e.sent,e.next=6,n.get();case 6:c=e.sent,setTimeout((function(){var e="localSettingData",a=I.data;try{a.visitorId=c.visitorId,a=localStorage.getItem(e)?JSON.parse(localStorage.getItem(e)):I.data}catch(n){}"function"===typeof t&&t(a)}),200);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}})()((function(e){N.dispatch({type:"initStore",data:e})}));var D=N;var A=a(162);function C(){var e=Object(n.useState)(0),t=Object(l.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){var e=D.subscribe((function(){"loading"===D.getState()._watcher&&c(Object.keys(D.getState().loading).length)}));return function(){e()}}),[]),Object(O.jsx)("div",{className:a?"loading":"no-loading",children:Object(O.jsx)(A.a,{animation:"border",size:"md",className:"loading-text"})})}var T=function e(t){var a=this;Object(p.a)(this,e),this.loadingOn=function(){D.dispatch({type:"addLoading",id:a.id})},this.loadingOff=function(){D.dispatch({type:"removeLoading",id:a.id})},this.fetchApi=function(){var e=Object(d.a)(o.a.mark((function e(t,n){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.loadingOn(),c=a,fetch(t.url,{}).then((function(e){return e.json()})).then((function(e,t){200===e.status?(c.loadingOff(),n(e.data)):c.loadingOff()})).catch((function(e){c.loadingOff()}));case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.setOperationRole=function(e){D.dispatch({type:"updateOperationRole",operationRole:e})},this.saveLocalRecord=function(e,t){var n=a;n.loadingOn(),setTimeout((function(){v.dispatch(e),setTimeout((function(){t(v.getState().data),n.loadingOff()}),100)}),3e3)},this.saveLocalRecord=function(e,t){var n=a;n.loadingOn(),setTimeout((function(){v.dispatch(e),setTimeout((function(){t(v.getState().data),n.loadingOff()}),100)}),3e3)},this.DatabaseApi=function(e,t,n){fetch(a.server+"/api/"+e,{method:"POST",body:JSON.stringify(t),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){n(e)})).catch((function(e){n(e)}))},this.loadStorageData=function(e,t){var n=a;a.loadingOn();var c=a.defaultData;try{c=localStorage.getItem("localData")?JSON.parse(localStorage.getItem("localData")):a.defaultData}catch(i){}return v.dispatch({type:"loadLocal",data:c}),n.loadingOff(),t(),!0},this.getStorageData=function(e,t){var n=a,c=v.getState();return n.loadingOff(),t(c.data),!0},this.id=(new Date).getTime(),this.defaultData={recipes:[],plates:[],orders:[],menus:[],focuses:[]},this.server=D.getState().config.apiServer},k=(a(64),function e(t){var a=this;Object(p.a)(this,e),this.load=Object(d.a)(o.a.mark((function e(){var t,n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.a.load(),e.next=3,t;case 3:return n=e.sent,e.next=6,n.get();case 6:return c=e.sent,a.visitorId=c.visitorId,e.abrupt("return",a.visitorId);case 10:case"end":return e.stop()}}),e)}))),this.visitorId=null});a(166),a(163),a(83),a(82);function L(e){return Object(O.jsx)(h.a,{className:"bg-primary",fluid:!0,children:Object(O.jsx)(h.a,{children:Object(O.jsxs)(f.a,{expand:"lg",className:"p-1",children:[Object(O.jsx)(f.a.Brand,{href:"/",children:Object(O.jsx)(R,{})}),Object(O.jsx)(f.a.Brand,{className:"menu-color",children:e.comp})]})})})}function R(){return Object(O.jsxs)("div",{className:"border rounded p-1 m-0",style:{color:"yellow",fontSize:"1.5rem"},children:["\u83dc\u8b5c",Object(O.jsx)("span",{className:"ml-1",style:{fontSize:"1rem"},children:"Dishfu"})]})}a(164);var z=a(26),M=a(21);var E=a(169),J=a(165),_=(a(86),a(30)),F=a.n(_);function q(e){var t=Object(j.g)().SocketID,a=D.getState().config.sockerServer,c=Object(n.useState)(!1),i=Object(l.a)(c,2),s=i[0],r=i[1],o=Object(n.useState)(!0),d=Object(l.a)(o,2),u=d[0],b=d[1],f=Object(n.useState)(D.getState().data.auth),p=Object(l.a)(f,2),g=p[0];p[1];Object(n.useEffect)((function(){}),[]);var m,x=function(e){return Object(O.jsxs)(h.a,{fluid:!0,className:"m-0 p-0",children:[Object(O.jsx)(L,{comp:"Auth with Mobile"}),Object(O.jsx)(h.a,{children:Object(O.jsxs)(E.a,{variant:e.variant?e.variant:"light mt-3",children:[Object(O.jsx)(E.a.Heading,{children:e.title}),e.body]})})]})},v=Object(O.jsx)(x,{title:"Warning",body:Object(O.jsxs)(h.a,{fluid:!0,children:[Object(O.jsx)("p",{className:"text-danger",children:"The authentication on this mobile will send to the target equipment. Please confirm!"}),Object(O.jsx)("p",{className:"alert-secondary p-2",children:(m=D.getState().data.authInfo,!!m&&Object(O.jsxs)("div",{children:["Auth Code: ",Object(O.jsx)("b",{children:m.authCode}),Object(O.jsx)("br",{}),"Address: ",Object(O.jsx)("b",{children:m.address}),Object(O.jsx)("br",{}),"Roles: ",Object(O.jsx)("b",{children:m.roles?m.roles.join(","):""}),Object(O.jsx)("br",{})]}))}),Object(O.jsx)(J.a,{onClick:function(){var e=F.a.connect(a);e.on("connect",(function(){e.emit("transfer",t,e.id,D.getState().data.authInfo),e.disconnect(),r(!0)}))},className:"m-2",children:"Continue Anyway"}),Object(O.jsx)(J.a,{onClick:function(){b(!1)},variant:"danger",className:"m-2",children:"Stop"})]})}),S=Object(O.jsx)(x,{title:"Warning!",body:"The mobile has not been authenticated!",variant:"danger m-3 p-3"});return g?u?s?Object(O.jsx)(x,{title:"succeed!",body:"The mobile authentication completed!!"}):v:Object(O.jsx)(x,{title:"Stop!",body:"No worry. The mobile authentication is not going through!"}):S}function B(e){var t=Object(j.g)().InfoCode;return Object(n.useEffect)((function(){var e=F.a.connect("/dishFu");return function(){e.disconnect()}}),[]),Object(O.jsxs)(h.a,{fluid:!0,className:"m-0 p-0",children:[Object(O.jsx)("h1",{children:"Mobile InfoCatch--AAA-"}),t]})}function P(e){var t=Object(j.g)().RequestID,a=Object(n.useState)({}),c=Object(l.a)(a,2),i=c[0],s=c[1],r=Object(n.useState)(!0),o=Object(l.a)(r,2),d=o[0],u=o[1],b=Object(n.useState)(!1),f=Object(l.a)(b,2),p=f[0],g=f[1],m=Object(n.useState)(!1),x=Object(l.a)(m,2),v=x[0],y=x[1],I=Object(n.useState)(D.getState().data.authInfo),N=Object(l.a)(I,2),w=N[0],A=(N[1],Object(n.useState)(!1)),C=Object(l.a)(A,2),k=C[0],R=(C[1],new T);Object(n.useEffect)((function(){y(D.getState().data.auth),D.getState().config.apiServer,R.loadingOn(),R.DatabaseApi("auth",{action:"getAuthUserByAuthCode",RequestID:t},(function(e){R.loadingOff(),s(e.data)}));var e=D.subscribe((function(){return"auth"===D.getState()._watcher&&(console.log("SettingStore.getState()=AA=>",D.getState().data),g(!0)),!1}));return function(){e()}}),[]);var z,M=function(){!function(e){var t=Object(S.a)({},e);t.signInTime=(new Date).getTime(),t.auth=!0,D.dispatch({type:"saveAuthInfo",data:t})}(i)},_=function(e){return!!e&&Object(O.jsxs)("div",{children:["Auth Code: ",Object(O.jsx)("b",{children:e.authCode}),Object(O.jsx)("br",{}),"Address: ",Object(O.jsx)("b",{children:e.address}),Object(O.jsx)("br",{}),"Roles: ",Object(O.jsx)("b",{children:e.roles?e.roles.join(","):""}),Object(O.jsx)("br",{})]})},F=function(e){return Object(O.jsxs)(h.a,{fluid:!0,className:"m-0 p-0",children:[Object(O.jsx)(L,{comp:"Scan Signin"}),Object(O.jsx)(h.a,{children:Object(O.jsxs)(E.a,{variant:"light mt-3",children:[Object(O.jsx)(E.a.Heading,{children:e.title}),e.body]})})]})},q=Object(O.jsx)(F,{title:"Error!",body:k}),B=Object(O.jsx)(F,{title:"Stop!",body:"The scan signin is not going through!"}),P=Object(O.jsx)(F,{title:"succeed!",body:"The scan signin completed!!"}),H=Object(O.jsx)(F,{title:"Your equipment is authorized by",body:Object(O.jsxs)("div",{className:"d-grid gap-2",children:[Object(O.jsx)("b",{children:"Exist auth:"}),(z=w,!!z&&Object(O.jsxs)("div",{children:["Auth Code: ",Object(O.jsx)("b",{children:z.authCode}),Object(O.jsx)("br",{}),"Address: ",Object(O.jsx)("b",{children:z.address}),Object(O.jsx)("br",{}),"Roles: ",Object(O.jsx)("b",{children:z.roles?z.roles.join(","):""}),Object(O.jsx)("br",{}),"Sign In Time: ",Object(O.jsx)("b",{children:z.signInTime?new Date(z.signInTime).toLocaleDateString():""}),Object(O.jsx)("hr",{})]})),Object(O.jsx)("b",{children:"Switch to"}),_(i),Object(O.jsx)(J.a,{onClick:M,className:"m-2",children:"Continue Anyway"}),Object(O.jsx)(J.a,{onClick:function(){u(!1)},variant:"danger",className:"m-2",children:"Stop"})]})}),Q=Object(O.jsx)(F,{title:"Coming authentication is",body:Object(O.jsxs)("div",{className:"d-grid gap-2",children:[Object(O.jsx)("b",{children:"Equempent Setup to"}),_(i),Object(O.jsx)(J.a,{onClick:M,className:"m-2",children:"Continue Anyway"}),Object(O.jsx)(J.a,{onClick:function(){u(!1)},variant:"danger",className:"m-2",children:"Stop"})]})});return k?q:d?p?P:v?H:Q:B}var H=function(e){var t=Object(n.useState)(""),a=Object(l.a)(t,2),c=a[0],i=a[1];return Object(n.useEffect)((function(){}),[]),Object(O.jsx)(h.a,{className:"bg-primary",fluid:!0,children:Object(O.jsx)(h.a,{children:Object(O.jsxs)(f.a,{expand:"lg",className:"p-1",expanded:c,children:[Object(O.jsx)(f.a.Brand,{as:u.b,to:"/",className:"menu_color",children:Object(O.jsx)(R,{})}),Object(O.jsx)(f.a.Brand,{as:u.b,to:"/auth",className:"menu-color",children:Object(O.jsx)("span",{style:{fontSize:"1.8rem"},children:"Support Center"})}),Object(O.jsx)(f.a.Toggle,{"aria-controls":"basic-navbar-nav",onClick:function(){return i(!c&&"expanded")}}),Object(O.jsx)(f.a.Collapse,{id:"basic-navbar-nav",children:Object(O.jsx)(b.a,{className:"me-auto"})})]})})})};var Q=function(){var e=(new Date).getFullYear();return Object(O.jsxs)(h.a,{fluid:!0,className:"footer",children:[Object(O.jsxs)("div",{className:"float-left alert-secondary footer-tag",children:["\xa9 ",e," Dishfu \xa0 \xa0",Object(O.jsx)(u.b,{to:"/privacy",children:"Privacy"}),"\xa0|\xa0",Object(O.jsx)(u.b,{to:"/terms",children:"Term"})]}),Object(O.jsx)("div",{className:"clearfix p-0 m-0"})]})};var W=function(e){var t=Object(n.useState)([]),a=Object(l.a)(t,2),c=(a[0],a[1]),i=new T;return Object(n.useEffect)((function(){i.loadingOn(),i.DatabaseApi("ad",{action:"homeList"},(function(e){i.loadingOff(),c(e&&e.data&&e.data.promotion?e.data.promotion:[])}))}),[]),Object(O.jsx)(h.a,{fluid:!0,className:"p-0 m-0 content-body wood-bg",children:Object(O.jsxs)(h.a,{fluid:!0,className:"p-0 m-0 content-body pic-bg",children:[Object(O.jsx)("div",{className:"master-bg-video-frame bg-secondary",children:Object(O.jsx)("video",{className:"master-bg-video",poster:"",preload:"auto",autoPlay:!0,loop:!0,muted:!0,children:Object(O.jsx)("source",{src:"",type:"video/mp4"})})}),Object(O.jsxs)("div",{style:{minHeight:"100%"},children:[Object(O.jsxs)("div",{className:"text-center",style:{position:"relative",height:"360px",top:"68px"},children:[Object(O.jsx)("p",{children:Object(O.jsx)("b",{className:"p-1 text-light",style:{fontSize:"3.8em",lineHeight:"2.8rem"},children:"Community Workshops"})}),Object(O.jsx)("p",{children:Object(O.jsx)("b",{className:"p-3 text-success",style:{fontSize:"2.6em",lineHeight:"2.5rem"},children:"Foodies together"})}),Object(O.jsx)("p",{className:"text-warning p-3",style:{fontSize:"1.5em",lineHeight:"2rem"},children:Object(O.jsxs)("b",{children:["Cooking",Object(O.jsx)(z.a,{size:"1x",icon:M.a,className:"m-1",style:{fontSize:"0.5rem"}}),"Eating",Object(O.jsx)(z.a,{size:"1x",icon:M.a,className:"m-1",style:{fontSize:"0.5rem"}}),"Sharing",Object(O.jsx)(z.a,{size:"1x",icon:M.a,className:"m-1",style:{fontSize:"0.5rem"}}),"Saving",Object(O.jsx)(z.a,{size:"1x",icon:M.a,className:"m-1",style:{fontSize:"0.5rem"}}),"Enjoying!"]})})]}),Object(O.jsx)(h.a,{fluid:!0,className:"alert-light",style:{position:"relative",marginBottom:"0px",minHeight:"1024px",textAlign:"center"}})]})]})})};var U=function(e){return Object(n.useEffect)((function(){}),[]),Object(O.jsx)(h.a,{fluid:!0,className:"m-0 p-0",children:Object(O.jsx)(j.c,{children:Object(O.jsx)(j.a,{exact:!0,path:"/",children:Object(O.jsx)(W,{})})})})},Y=(a(157),a(37)),G=(a(158),function(e){var t=new k,a=Object(n.useState)(!1),c=Object(l.a)(a,2),i=c[0],s=c[1],r={isDesktopOrLaptop:Object(Y.useMediaQuery)({query:"(min-width: 1224px)"}),isBigScreen:Object(Y.useMediaQuery)({query:"(min-width: 1824px)"}),isTabletOrMobile:Object(Y.useMediaQuery)({query:"(max-width: 1224px)"}),isPortrait:Object(Y.useMediaQuery)({query:"(orientation: portrait)"}),isRetina:Object(Y.useMediaQuery)({query:"(min-resolution: 2dppx)"})};Object(n.useEffect)((function(){var e=D.subscribe((function(){return"afterInit"===D.getState()._watcher&&s(!0),!1}));return Object(d.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=console,e.next=3,t.load();case 3:e.t1=e.sent,e.t0.log.call(e.t0,e.t1);case 5:case"end":return e.stop()}}),e)})))(),setTimeout((function(){console.log("==fp.visitorId==",t.visitorId),D.getState().fp=t.visitorId,console.log(D.getState().fp)}),1e3),D.dispatch({type:"loadScreenModel",screenModel:r}),function(){e()}}),[]),console.log("called localStorage.clear()");var b=Object(O.jsx)(L,{comp:Object(O.jsx)(A.a,{animation:"border",size:"md",className:"loading-text"})}),h=Object(O.jsx)(u.a,{className:"p-0 m-0",children:Object(O.jsxs)(j.c,{children:[Object(O.jsx)(j.a,{exact:!0,path:"/MobileAuth/:SocketID",children:Object(O.jsx)(q,{})}),Object(O.jsx)(j.a,{exact:!0,path:"/ScanSignin/:RequestID",children:Object(O.jsx)(P,{})}),Object(O.jsx)(j.a,{exact:!0,path:"/InfoCatch/:InfoCode",children:Object(O.jsx)(B,{})}),Object(O.jsxs)(j.a,{children:[Object(O.jsx)(H,{}),Object(O.jsx)(C,{}),Object(O.jsx)(U,{}),Object(O.jsx)(Q,{})]})]})});return i?h:b}),K=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,170)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,i=t.getLCP,s=t.getTTFB;a(e),n(e),c(e),i(e),s(e)}))};document._cacheExist=!0,s.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(G,{})}),document.getElementById("root")),K()},93:function(e,t,a){}},[[159,1,2]]]);
//# sourceMappingURL=main.23c326b9.chunk.js.map