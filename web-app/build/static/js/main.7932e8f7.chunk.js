(this["webpackJsonpweb-app"]=this["webpackJsonpweb-app"]||[]).push([[0],{150:function(e,t){},158:function(e,t,a){},160:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),s=a(36),r=a.n(s),i=(a(94),a(6)),o=a.n(i),l=a(12),d=a(2),u=a(13),j=a(15),b=a(170),p=a(162),h=a(171),f=a(14),m=a(0);var O=function(e){var t=Object(n.useState)(null),a=Object(d.a)(t,2),c=a[0],s=a[1],r=function(e,t){return e.map((function(e,t){return Object(m.jsx)(Z,{ipfs:e.ipfs,isCache:!0,className:"m-1 bg-secondary iconsImage"},t)}))},i=function(e,t){var a=[];return e[t]&&e[t].map((function(e){return a=[].concat(Object(f.a)(a),Object(f.a)(e.photos)),!0})),a};return Object(n.useEffect)((function(){s(e.record)}),[]),function(t){return t?Object(m.jsxs)(p.a,{fluid:!0,className:e.className,style:e.style,children:[Object(m.jsxs)("div",{className:"p-0",children:[Object(m.jsxs)("p",{className:"p-0 pl-0 m-1",children:[Object(m.jsx)("b",{children:t.name}),Object(m.jsx)("br",{}),Object(m.jsx)("span",{children:Object(m.jsxs)("i",{style:{fontSize:"0.8rem"},children:["Record id-: ",t.id,", Publisher "]})})]}),Object(m.jsxs)("p",{className:"text-secondary p-1 pl-2 m-0",children:[Object(m.jsx)("i",{className:"text-primary",children:"Ingredients:"}),t.ingredients.map((function(e,t){return e.text})),Object(m.jsx)("br",{}),r(i(t,"ingredients"))]}),Object(m.jsxs)("p",{className:"text-secondary p-1 pl-2 m-0",children:[Object(m.jsx)("i",{className:"text-primary",children:"Instruction:"}),t.cooking.map((function(e,t){return e.text})),Object(m.jsx)("br",{}),r(i(t,"cooking"))]}),Object(m.jsx)("p",{className:"text-secondary p-1 pl-2 m-0",children:Object(m.jsx)("span",{className:"text-secondary mr-2",children:"Published:"})})]}),Object(m.jsx)("div",{className:"clearfix p-0 m-0"})]}):"=="}(c)};var x=function(e){var t=Object(n.useState)(null),a=Object(d.a)(t,2),c=a[0],s=a[1],r=new U,i=e.tpl;return Object(n.useEffect)((function(){Object(l.a)(o.a.mark((function t(){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.promiseIpfsJSON(e.ipfs);case 2:a=t.sent,s(a);case 4:case"end":return t.stop()}}),t)})))()}),[]),c?i({record:c,className:e.className,style:e.style}):e.ipfs},g=a(17),v=function e(t){var a=this;Object(g.a)(this,e),this.getCachedCode=function(){var e={};try{var t=localStorage.getItem("cachedCode");e=t?JSON.parse(t):{}}catch(a){}return e},this.setCachedCode=function(e){localStorage.setItem("cachedCode",JSON.stringify(e))},this.cleanOld=function(){var e=a.getCachedCode();for(var t in e)(new Date).getTime()-e[t]>a.lifeTime&&(delete e[t],localStorage.removeItem(t));a.setCachedCode(e)},this.cleanNotInArr=function(e){a.getCachedCode()[e]||localStorage.removeItem(e)},this.setCache=function(e,t){var n=a.getCachedCode();localStorage.setItem(e,t),n[e]=(new Date).getTime(),a.setCachedCode(n)},this.getCache=function(e){return a.cleanOld(),a.cleanNotInArr(e),localStorage.getItem(e)},this.getIsCachedCode=function(){var e={};try{var t=localStorage.getItem("IsCachedCode");e=t?JSON.parse(t):{}}catch(a){}return e},this.cleanOldIsCache=function(){var e=a.getIsCachedCode();for(var t in e)(new Date).getTime()-e[t]>a.lifeTime&&delete e[t];a.setIsCachedCode(e)},this.setIsCachedCode=function(e){localStorage.setItem("isCachedCode",JSON.stringify(e))},this.setIsCaching=function(e){var t=a.getIsCachedCode();t[e]=(new Date).getTime(),a.setIsCachedCode(t)},this.getIsCaching=function(e){return a.cleanOldIsCache(),!!a.getIsCachedCode()[e]},this.lifeTime=t||3e4},S=function e(t){var a=this;Object(g.a)(this,e),this.getCachedCode=function(){return window.document._cachedCode?window.document._cachedCode:{}},this.setCachedCode=function(e){window.document._cachedCode=e},this.cleanOld=function(){var e=a.getCachedCode();for(var t in e)(new Date).getTime()-e[t]>a.lifeTime&&(delete e[t],delete window.document["__"+t]);a.setCachedCode(e)},this.setCache=function(e,t){var n=a.getCachedCode();window.document["__"+e]=t,n[e]=(new Date).getTime(),a.setCachedCode(n)},this.getCache=function(e){return a.cleanOld(),window.document["__"+e]},this.getIsCachedCode=function(){return window.document._isCachedCode?window.document._isCachedCode:{}},this.cleanOldIsCache=function(){var e=a.getIsCachedCode();for(var t in e)(new Date).getTime()-e[t]>a.lifeTime&&delete e[t];a.setIsCachedCode(e)},this.setIsCachedCode=function(e){window.document._isCachedCode=e},this.setIsCaching=function(e){var t=a.getIsCachedCode();t[e]=(new Date).getTime(),a.setIsCachedCode(t)},this.getIsCaching=function(e){return a.cleanOldIsCache(),!!a.getIsCachedCode()[e]},this.lifeTime=t||6e4},N=function e(t,a){var n=this;switch(Object(g.a)(this,e),this.setCache=function(e,t){n.Ins&&n.Ins.setCache(e,t)},this.getCache=function(e){return n.Ins?n.Ins.getCache(e):null},this.setIsCaching=function(e){n.Ins&&n.Ins.setIsCaching(e)},this.getIsCaching=function(e){return n.Ins?n.Ins.getIsCaching(e):null},t.toLowerCase()){case"localstorage":this.Ins=new v(a);break;case"window":this.Ins=new S(a);break;default:this.Ins=null}},y=function(e){var t=e.value,a=e.readOnly,n=c.a.useState(parseInt(t,10)||0),s=Object(d.a)(n,2),r=s[0],i=s[1],o=c.a.useState(0),l=Object(d.a)(o,2),u=l[0],j=l[1],b=function(e){var t=e.marked,a=e.starId;return Object(m.jsx)("span",{"data-star-id":a,className:"star",role:"button",children:t?"\u2605":"\u2606"})},p=function(e){var t=0;e&&e.target&&e.target.getAttribute("data-star-id")&&(t=e.target.getAttribute("data-star-id")),j(t)};return a?Object(m.jsx)("div",{children:Array.from({length:5},(function(e,t){return Object(m.jsx)(b,{starId:t+1,marked:u?u>=t+1:r>=t+1},"star_".concat(t+1))}))}):Object(m.jsx)("div",{onMouseOut:function(){return p(null)},onClick:function(e){return i(e.target.getAttribute("data-star-id")||r)},onMouseOver:p,children:Array.from({length:5},(function(e,t){return Object(m.jsx)(b,{starId:t+1,marked:u?u>=t+1:r>=t+1},"star_".concat(t+1))}))})},w=function(e){var t=e.message,a=e.title,n=e.className;return Object(m.jsxs)(p.a,{className:n+" rounded p-3 message-box grid-bg",children:[Object(m.jsx)("b",{style:{textTransform:"capitalize"},children:a}),Object(m.jsx)("h3",{className:"text-secondary m-3 p-3",children:t})]})},C=a(40),I=a(50),k=["recipes","plates","orders","menus","focuses"],D=Object(C.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:{recipes:[],plates:[],orders:[],menus:[],focuses:[]},LastAction:null},t=arguments.length>1?arguments[1]:void 0;e.LastAction=t.type;var a=-1===k.indexOf(t.section)?null:t.section;switch(t.type){case"updateLocal":case"updateApi":if(a){if("new"===t.data.id)t.data.id=(new Date).getTime().toString(),e.data[a].push(t.data);else{var n=e.data[a].findIndex((function(e){return e.id===t.data.id}));e.data[a][n]=t.data}localStorage.setItem("localData",JSON.stringify(e.data))}return e;case"deleteLocal":case"deleteApi":if(a){var c=e.data[a].findIndex((function(e){return e.id===t.data.id}));-1!==c&&e.data[a].splice(c,1),localStorage.setItem("localData",JSON.stringify(e.data))}return e;case"publishPlate":var s=e.data.focuses.findIndex((function(e){return e.id===t.data.id}));return-1!==s&&(delete e.data.focuses[s].data,e.data.menus.push(e.data.focuses[s]),e.data.focuses.splice(s,1)),localStorage.setItem("localData",JSON.stringify(e.data)),e;case"loadLocal":case"loadApi":return e.data=t.data,e;case"publish":return t.data.id=(new Date).getTime().toString(),e.data.focuses.push(t.data),localStorage.setItem("localData",JSON.stringify(e.data)),e;case"addShoppingCartItem":return e.LastAction="shopping",function(e){var a=e.data.orders.findIndex((function(e){return e.code===t.data.code}));-1===a?e.data.orders.push({code:t.data.code,count:1}):e.data.orders[a].count=e.data.orders[a].count+1,localStorage.setItem("localData",JSON.stringify(e.data))}(e),e;case"updateShoppingCartItem":return e.LastAction="shopping",function(e){var a=e.data.orders.findIndex((function(e){return e.code===t.data.code}));return-1!==a&&(e.data.orders[a].count=t.data.count>=0?t.data.count:e.data.orders[a].count),localStorage.setItem("localData",JSON.stringify(e.data)),e}(e);case"removeShoppingCartItem":return e.LastAction="shopping",function(e){var a=e.data.orders.findIndex((function(e){return e.code===t.data.code}));return-1!==a&&e.data.orders.splice(a,1),localStorage.setItem("localData",JSON.stringify(e.data)),e}(e);case"initShoppingCart":return e.LastAction="shopping",function(e){return e.data.orders=[],localStorage.setItem("localData",JSON.stringify(e.data)),e}(e);default:return e}}),Object(I.composeWithDevTools)()),A=a(34),T=a(53);console.log("window.location.hostname--\x3e",window.location.hostname);var R={ready:!1,loading:{},screenModel:{},_watcher:"",fp:"1234",data:{roles:[],operationRole:"",screenModel:{},auth:!1,AuthInfo:{}},allRoles:[{id:1,code:"foodie",desc:"Foodie",description:"Foodie"},{id:2,code:"supie",desc:"Food supplier",description:"Food supplier / Restaurent / Grocery"}],config:{apiServer:"http://192.168.86.126:3001",webServer:"http://192.168.86.126:3000",sockerServer:"http://192.168.86.126:3001/dishFu",ipfsServer:"//gateway.ipfs.io/ipfs/"}},E=Object(C.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(e._watcher="",t.type){case"saveRoles":return e.data.roles=t.roles,e._watcher="role",P(e.data),e;case"saveUserInfo":return e.data.userInfo=t.userInfo,P(e.data),e;case"saveAuthInfo":return e.data.authInfo=Object(A.a)({},t.data),delete e.data.authInfo.auth,e.data.auth=t.data.auth,e.data.roles=t.data&&t.data.roles?t.data.roles:[],e._watcher="auth",P(e.data),e;case"updateOperationRole":return e._watcher="role",e.data.operationRole=t.operationRole,P(e.data),e;case"loadScreenModel":return e.screenModel=t.screenModel,e;case"addLoading":return e._watcher="loading",e.loading[t.id]=(new Date).getTime(),e;case"removeLoading":return e._watcher="loading",delete e.loading[t.id],e;case"initStore":return e.data=t.data,e._watcher="afterInit",e;default:return e}}),Object(I.composeWithDevTools)()),P=function(e){setTimeout((function(){localStorage.setItem("localSettingData",JSON.stringify(e))}),500)};(function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=T.a.load(),e.next=3,a;case 3:return n=e.sent,e.next=6,n.get();case 6:c=e.sent,setTimeout((function(){var e="localSettingData",a=R.data;try{a.visitorId=c.visitorId,a=localStorage.getItem(e)?JSON.parse(localStorage.getItem(e)):R.data}catch(n){}"function"===typeof t&&t(a)}),200);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}})()((function(e){E.dispatch({type:"initStore",data:e})}));var _=E;var z=function(e){var t=e.roles,a=e.exroles,c=e.comp,s=e.showException,r=Object(n.useState)([]),i=Object(d.a)(r,2),o=i[0],l=i[1],u=a||[],j=t.filter((function(e){return[].concat(Object(f.a)(o),["all"]).includes(e)})),b=u.filter((function(e){return Object(f.a)(o).includes(e)})),p=function(){l(_.getState().data.authInfo&&_.getState().data.authInfo.roles?_.getState().data.authInfo.roles:[])};Object(n.useEffect)((function(){var e=_.subscribe((function(){"role"!==_.getState()._watcher&&"auth"!==_.getState()._watcher||p()}));return p(),function(){e()}}),[]);var h=Object(m.jsx)("div",{className:"p-3",children:Object(m.jsx)(w,{message:"Missing required roles"})});return!j.length||b.length?s?h:"":c},L=a(163);function F(){var e=Object(n.useState)(0),t=Object(d.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){var e=_.subscribe((function(){"loading"===_.getState()._watcher&&c(Object.keys(_.getState().loading).length)}));return function(){e()}}),[]),Object(m.jsx)("div",{className:a?"loading":"no-loading",children:Object(m.jsx)(L.a,{animation:"border",size:"md",className:"loading-text"})})}var J=function e(t){var a=this;Object(g.a)(this,e),this.loadingOn=function(){_.dispatch({type:"addLoading",id:a.id})},this.loadingOff=function(){_.dispatch({type:"removeLoading",id:a.id})},this.fetchApi=function(){var e=Object(l.a)(o.a.mark((function e(t,n){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.loadingOn(),c=a,fetch(t.url,{}).then((function(e){return e.json()})).then((function(e,t){200===e.status?(c.loadingOff(),n(e.data)):c.loadingOff()})).catch((function(e){c.loadingOff()}));case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.setOperationRole=function(e){_.dispatch({type:"updateOperationRole",operationRole:e})},this.saveLocalRecord=function(e,t){var n=a;n.loadingOn(),setTimeout((function(){D.dispatch(e),setTimeout((function(){t(D.getState().data),n.loadingOff()}),100)}),3e3)},this.saveLocalRecord=function(e,t){var n=a;n.loadingOn(),setTimeout((function(){D.dispatch(e),setTimeout((function(){t(D.getState().data),n.loadingOff()}),100)}),3e3)},this.DatabaseApi=function(e,t,n){fetch(a.server+"/api/"+e,{method:"POST",body:JSON.stringify(t),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){n(e)})).catch((function(e){n(e)}))},this.loadStorageData=function(e,t){var n=a;a.loadingOn();var c=a.defaultData;try{c=localStorage.getItem("localData")?JSON.parse(localStorage.getItem("localData")):a.defaultData}catch(s){}return D.dispatch({type:"loadLocal",data:c}),n.loadingOff(),t(),!0},this.getStorageData=function(e,t){var n=a,c=D.getState();return n.loadingOff(),t(c.data),!0},this.id=(new Date).getTime(),this.defaultData={recipes:[],plates:[],orders:[],menus:[],focuses:[]},this.server=_.getState().config.apiServer},M=a(64),q=a.n(M),U=function e(t){var a=this;Object(g.a)(this,e),this.promiseIpfsJSON=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){fetch(a.downloadUri+t).then((function(e){return e.json()})).then((function(t){e(t)}),(function(e){n(e),console.log("err=>",e)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.promiseIpfsText=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){fetch(a.downloadUri+t).then((function(e){return e.text()})).then((function(t){e(t)}),(function(e){n(e),console.log("err=>",e)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getIpfsAsync=function(){var e=Object(l.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch(a.downloadUri+t).then((function(e){return e.text()})).then((function(e){n(e)}),(function(e){n(!1)}));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.getIpfJsonsAsync=function(){var e=Object(l.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch(a.downloadUri+t).then((function(e){return e.json()})).then((function(e){n(e)}),(function(e){n(!1)}));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.promisePullQ=function(){var e=Object(l.a)(o.a.mark((function e(t){var n,c,s,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=[],c=function(e){n[e]=new Promise((function(n,c){fetch(a.downloadUri+t[e].publishCode).then((function(e){return e.json()})).then((function(a){t[e].data=a,n(t[e])})).catch((function(a){c("reject_"+t[e].recipe+"-"+a.message)}))}))},s=0;s<t.length;s++)c(s);return e.next=5,Promise.all(n).then((function(e){return e})).catch((function(e){return console.error(e.message),[]}));case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.promiseSave=function(){var e=Object(l.a)(o.a.mark((function e(t){var n,c,s,r,i,l,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=new N(document._cacheExist?"window":"localStorage"),c=new q.a({host:a.uploadSVR.host,port:a.uploadSVR.port,protocol:a.uploadSVR.protocal}),s=[],r=a.ses,i=function(e){var a=t[r[e]];if(a)for(var i=function(t){for(var i=function(i){if(a[t].photos[i].base64){var o=new Promise((function(s,o){c.add(a[t].photos[i].base64).then((function(c){n.setCache(c,a[t].photos[i].base64),a[t].photos[i]={base64:"",ipfs:c},s("resolve_"+r[e]+"-"+c)})).catch((function(t){o("reject_"+r[e]+"-"+t.message)}))}));s.push(o)}},o=0;o<a[t].photos.length;o++)i(o)},o=0;o<a.length;o++)i(o)},l=0;l<r.length;l++)i(l);return e.next=8,Promise.all(s).then((function(e){return e})).catch((function(e){return console.error(e.message),[]}));case 8:return d=e.sent,e.abrupt("return",d);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.promisePublish=function(){var e=Object(l.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.promiseSave(t);case 2:new q.a({host:a.uploadSVR.host,port:a.uploadSVR.port,protocol:a.uploadSVR.protocal}).add(JSON.stringify(t)).then((function(e){n(e)}));case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.downloadUri=_.getState().config.ipfsServer,this.uploadSVR={host:"ipfs.infura.io",port:5001,protocal:"https"},this.ses=["cooking","ingredients","plates"]},V=function e(t){var a=this;Object(g.a)(this,e),this.load=Object(l.a)(o.a.mark((function e(){var t,n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=T.a.load(),e.next=3,t;case 3:return n=e.sent,e.next=6,n.get();case 6:return c=e.sent,a.visitorId=c.visitorId,e.abrupt("return",a.visitorId);case 10:case"end":return e.stop()}}),e)}))),this.visitorId=null},Y=a(169),$=a(164),B=a(83),G=a(82),H=a.n(G);function W(e){var t=Object(n.useState)(e.defaultValue),a=Object(d.a)(t,2),c=a[0],s=a[1],r=Object(n.useState)({}),i=Object(d.a)(r,2),o=i[0],l=i[1],u=Object(n.useState)(!1),j=Object(d.a)(u,2),b=j[0],p=j[1],h=Object(n.useState)(!1),f=Object(d.a)(h,2),O=f[0],x=f[1],g=function(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""},v=function(e){return e?e.toUpperCase():""},S=function(e){return(g(e.street_address1)+","+g(e.city)+","+v(e.state)+" "+v(e.postal_code)+v("USA"===e.country?"":e.country)).replace(/\s+/gi," ")},N=function(t){return H()(t,(function(t,a){a.country=a.country?a.country:"USA",l(a),a.street_address1&&a.city&&a.postal_code&&a.state&&!t?(e.passAddress(S(a)),p(!0)):(e.passAddress(""),p(!1))})),!0};return Object(n.useEffect)((function(){}),[]),Object(m.jsxs)(Y.a.Group,{children:[Object(m.jsx)(Y.a.Control,{defaultValue:c,required:!0,placeholder:"Input Your address",as:"textarea",rows:"1",onChange:function(e){e.target.value=e.target.value,N(e.target.value)},onFocus:function(){x(!0)},onBlur:function(e){x(!1),e.target.value=b?S(o):"",s(S(o))}}),O&&Object(m.jsx)(Y.a.Text,{className:"p-3 mt-1 alert-secondary",children:Object(m.jsxs)($.a,{children:[Object(m.jsxs)(B.a,{sx:6,className:"p-0 pl-2",children:["Street Address: ",Object(m.jsx)("b",{children:o.street_address1}),Object(m.jsx)("br",{}),"City: ",Object(m.jsx)("b",{children:o.city}),Object(m.jsx)("br",{}),b?Object(m.jsx)("span",{className:"text-success",children:"Correct Format."}):Object(m.jsx)("span",{className:"text-info",children:"Parsing ..."})]}),Object(m.jsxs)(B.a,{sx:6,className:"p-0 pl-2",children:["State: ",Object(m.jsx)("b",{children:o.state}),Object(m.jsx)("br",{}),"Postal: ",Object(m.jsx)("b",{children:o.postal_code}),Object(m.jsx)("br",{}),"Country: ",Object(m.jsx)("b",{children:o.country}),Object(m.jsx)("br",{})]})]})})]})}function Q(e){return Object(m.jsx)(p.a,{className:"bg-primary",fluid:!0,children:Object(m.jsx)(p.a,{children:Object(m.jsxs)(h.a,{expand:"lg",className:"p-1",children:[Object(m.jsx)(h.a.Brand,{href:"/",children:Object(m.jsx)(X,{})}),Object(m.jsx)(h.a.Brand,{className:"menu-color",children:e.comp})]})})})}function X(){return Object(m.jsxs)("div",{className:"border rounded p-1 m-0",style:{color:"yellow",fontSize:"1.5rem"},children:["\u7f8e\u98df\u5bb6",Object(m.jsx)("span",{className:"ml-1",style:{fontSize:"1rem"},children:"Dishfoodie"})]})}var K=a(165);function Z(e){var t=new U,a=e.isCache?new N(document._cacheExist?"window":"localStorage"):new N(""),c=Object(n.useState)(""),s=Object(d.a)(c,2),r=s[0],i=s[1],o=function n(){a.getCache(e.ipfs)?i(a.getCache(e.ipfs)):a.getIsCaching(e.ipfs)?setTimeout(n,100):(a.setIsCaching(e.ipfs),t.getIpfsAsync(e.ipfs,(function(t){t&&(i(t),a.setCache(e.ipfs,t))})))};return Object(n.useEffect)((function(){e.base64?i(e.base64):e.ipfs&&o()}),[]),Object(m.jsx)(K.a,{src:r||"/imgs/ipfs-caching.jpeg",alt:"uploaded File",className:e.className,style:e.style})}var ee=a(166),te=a(9),ae=a(8);var ne=function(e){var t=new J,a=Object(n.useState)(0),c=Object(d.a)(a,2),s=c[0],r=c[1],i=function(e){var t=0;for(var a in e)t+=e[a]&&e[a].count?e[a].count:0;return r(t),t};return Object(n.useEffect)((function(){var e=D.subscribe((function(){"shopping"===D.getState().LastAction&&i(D.getState().data.orders)}));return t.loadStorageData({},(function(){i(D.getState().data.orders)})),function(){e()}}),[]),Object(m.jsxs)("span",{className:e.className?e.className:"text-light bg-primary",children:[Object(m.jsx)(te.a,{size:"1x",icon:ae.l}),Object(m.jsx)(ee.a,{className:"ml-1 alert-primary",style:{position:"relative",fontSize:"0.6rem",top:"-0.4rem"},children:s})]})},ce=a(167),se=function(e){return Object(m.jsx)(ce.a,{onClick:function(){D.dispatch({type:"addShoppingCartItem",data:{code:e.code,count:e.count?e.count:1}})},children:"Order"})},re=a(86),ie=function(){function e(t){Object(g.a)(this,e)}return Object(re.a)(e,[{key:"getList",value:function(){return D.getState().data.orders}}]),e}();var oe=function(e){var t=new J,a=Object(n.useState)(e.code),c=Object(d.a)(a,2),s=c[0],r=c[1],i=Object(n.useState)(0),o=Object(d.a)(i,2),l=o[0],u=o[1],j=function(){var e=D.getState().data.orders.findIndex((function(e){return e&&e.code===s})),t=-1!==e?D.getState().data.orders[e]:null;u(t?t.count:0)};return Object(n.useEffect)((function(){r(e.code);var a=D.subscribe((function(){"shopping"===D.getState().LastAction&&j()}));return t.loadStorageData({},(function(){j()})),function(){a()}}),[]),Object(m.jsxs)("span",{className:e.className?e.className:"text-light bg-primary",children:["minus"===e.operater&&Object(m.jsx)(te.a,{size:"1x",icon:ae.f,onClick:function(){D.dispatch({type:"updateShoppingCartItem",data:{code:e.code,count:l>0?l-1:0}})}}),"plus"===e.operater&&Object(m.jsx)(te.a,{size:"1x",icon:ae.h,onClick:function(){D.dispatch({type:"updateShoppingCartItem",data:{code:e.code,count:l+1}})}}),"remove"===e.operater&&Object(m.jsx)(te.a,{size:"1x",icon:ae.o,onClick:function(){D.dispatch({type:"removeShoppingCartItem",data:{code:e.code}})}}),"initShoppingCart"===e.operater&&!!D.getState().data.orders.length&&Object(m.jsxs)(ce.a,{variant:"link",onClick:function(){D.dispatch({type:"initShoppingCart"})},children:[Object(m.jsx)(te.a,{size:"1x",icon:ae.l,className:"mr-2"}),e.caption?e.caption:""]}),"showCount"===e.operater&&Object(m.jsx)(ee.a,{className:"text-primary alert-primary p-2",children:l}),"showTotal"===e.operater&&Object(m.jsxs)("div",{className:"p-2 text-center text-dark",children:["$",l*e.price]})]})};var le=function(e){return Object(n.useEffect)((function(){var t=D.subscribe((function(){"shopping"===D.getState().LastAction&&e.changed&&e.changed()}));return function(){t()}}),[]),""};function de(e){var t=Object(n.useState)(!1),a=Object(d.a)(t,2),c=a[0],s=a[1];return Object(n.useEffect)((function(){var e=_.subscribe((function(){return"auth"===_.getState()._watcher&&s(_.getState().data.auth),!1}));return s(_.getState().data.auth),function(){e()}}),[]),Object(m.jsx)("div",{className:"rounded p-1 m-0",style:{fontSize:"1.1rem"},children:Object(m.jsxs)("span",{className:c?" text-light  ":"  menu-color ",children:[Object(m.jsx)(te.a,{size:"1x",icon:c?ae.q:ae.i,className:"mr-1"})," Auth"]})})}var ue=a(172),je=a(87),be=a.n(je),pe=a(32),he=a.n(pe);function fe(e){var t=Object(n.useState)(""),a=Object(d.a)(t,2),c=a[0],s=a[1],r=Object(n.useState)(""),i=Object(d.a)(r,2),o=i[0],l=i[1],u=_.getState().config.sockerServer,j=Object(n.useState)(null),b=Object(d.a)(j,2),h=b[0],f=b[1],O=Object(n.useState)({}),x=Object(d.a)(O,2),g=x[0],v=x[1],S=function(e){v(_.getState().data.authInfo),f(_.getState().data.auth)};Object(n.useEffect)((function(){S();var e=_.subscribe((function(){return"auth"!==_.getState()._watcher&&"role"!==_.getState()._watcher||S(),!1}));return function(){e()}}),[]),Object(n.useEffect)((function(){if(!1===h){var e=he.a.connect(u);return e.on("connect",(function(){e.on("afterTransfer",(function(t,a){!function(e){var t=Object(A.a)({},e);t.auth=!0,t.signInTime=(new Date).getTime(),_.dispatch({type:"saveAuthInfo",data:t})}(a),e.disconnect()})),l(e.id.replace("/dishFu#",""))})),e.on("disconnect",(function(){})),function(){e.disconnect()}}}),[h]),Object(n.useEffect)((function(){o&&be.a.toDataURL(_.getState().config.webServer+"/MobileAuth/"+o,{width:338,type:"image/png",quality:1,color:{dark:"#000000",light:"#0000"}},(function(e,t){s(t)}))}),[o]);var N=Object(m.jsxs)(p.a,{className:"content-body mt-3",children:[Object(m.jsx)("h4",{children:"Scan it with an authrized phone."}),Object(m.jsx)("br",{}),_.getState().config.webServer+"/MobileAuth/"+o,Object(m.jsx)("br",{}),Object(m.jsx)(K.a,{src:c,className:"border border-primary"})]}),y=Object(m.jsx)(p.a,{className:"content-body mt-3",children:Object(m.jsxs)(ue.a,{variant:"secondary mt-3",children:[Object(m.jsx)(ue.a.Heading,{children:"Current Authentication"}),g&&Object(m.jsxs)("p",{className:"pb-3 pt-3 m-3",children:["Address: ",Object(m.jsx)("b",{children:g.address}),Object(m.jsx)("br",{}),"Roles: ",Object(m.jsx)("b",{children:g.roles?g.roles.join(","):""}),Object(m.jsx)("br",{}),"Sign in time: ",Object(m.jsxs)("b",{children:[new Date(g.signInTime).toLocaleDateString()," "]}),Object(m.jsx)("br",{})]}),Object(m.jsx)(ce.a,{onClick:function(){_.dispatch({type:"saveAuthInfo",data:{auth:!1}})},className:"m-3",children:"Sign out this equipment"})]})});return h?y:N}function me(e){var t=Object(j.h)().SocketID,a=_.getState().config.sockerServer,c=Object(n.useState)(!1),s=Object(d.a)(c,2),r=s[0],i=s[1],o=Object(n.useState)(!0),l=Object(d.a)(o,2),u=l[0],b=l[1],h=Object(n.useState)(_.getState().data.auth),f=Object(d.a)(h,2),O=f[0];f[1];Object(n.useEffect)((function(){}),[]);var x,g=function(e){return Object(m.jsxs)(p.a,{fluid:!0,className:"m-0 p-0",children:[Object(m.jsx)(Q,{comp:"Auth with Mobile"}),Object(m.jsx)(p.a,{children:Object(m.jsxs)(ue.a,{variant:e.variant?e.variant:"light mt-3",children:[Object(m.jsx)(ue.a.Heading,{children:e.title}),e.body]})})]})},v=Object(m.jsx)(g,{title:"Warning",body:Object(m.jsxs)(p.a,{fluid:!0,children:[Object(m.jsx)("p",{className:"text-danger",children:"The authentication on this mobile will send to the target equipment. Please confirm!"}),Object(m.jsx)("p",{className:"alert-secondary p-2",children:(x=_.getState().data.authInfo,!!x&&Object(m.jsxs)("div",{children:["Auth Code: ",Object(m.jsx)("b",{children:x.authCode}),Object(m.jsx)("br",{}),"Address: ",Object(m.jsx)("b",{children:x.address}),Object(m.jsx)("br",{}),"Roles: ",Object(m.jsx)("b",{children:x.roles?x.roles.join(","):""}),Object(m.jsx)("br",{})]}))}),Object(m.jsx)(ce.a,{onClick:function(){var e=he.a.connect(a);e.on("connect",(function(){e.emit("transfer",t,e.id,_.getState().data.authInfo),e.disconnect(),i(!0)}))},className:"m-2",children:"Continue Anyway"}),Object(m.jsx)(ce.a,{onClick:function(){b(!1)},variant:"danger",className:"m-2",children:"Stop"})]})}),S=Object(m.jsx)(g,{title:"Warning!",body:"The mobile has not been authenticated!",variant:"danger m-3 p-3"});return O?u?r?Object(m.jsx)(g,{title:"succeed!",body:"The mobile authentication completed!!"}):v:Object(m.jsx)(g,{title:"Stop!",body:"No worry. The mobile authentication is not going through!"}):S}function Oe(e){var t=Object(j.h)().InfoCode;return Object(n.useEffect)((function(){var e=he.a.connect("/dishFu");return function(){e.disconnect()}}),[]),Object(m.jsxs)(p.a,{fluid:!0,className:"m-0 p-0",children:[Object(m.jsx)("h1",{children:"Mobile InfoCatch--AAA-"}),t]})}function xe(e){var t=Object(j.h)().RequestID,a=Object(n.useState)({}),c=Object(d.a)(a,2),s=c[0],r=c[1],i=Object(n.useState)(!0),o=Object(d.a)(i,2),l=o[0],u=o[1],b=Object(n.useState)(!1),h=Object(d.a)(b,2),f=h[0],O=h[1],x=Object(n.useState)(!1),g=Object(d.a)(x,2),v=g[0],S=g[1],N=Object(n.useState)(_.getState().data.authInfo),y=Object(d.a)(N,2),w=y[0],C=(y[1],Object(n.useState)(!1)),I=Object(d.a)(C,2),k=I[0],D=(I[1],new J);Object(n.useEffect)((function(){S(_.getState().data.auth),_.getState().config.apiServer,D.loadingOn(),D.DatabaseApi("auth",{action:"getAuthUserByAuthCode",RequestID:t},(function(e){D.loadingOff(),r(e.data)}));var e=_.subscribe((function(){return"auth"===_.getState()._watcher&&(console.log("SettingStore.getState()=AA=>",_.getState().data),O(!0)),!1}));return function(){e()}}),[]);var T,R=function(){!function(e){var t=Object(A.a)({},e);t.signInTime=(new Date).getTime(),t.auth=!0,_.dispatch({type:"saveAuthInfo",data:t})}(s)},E=function(e){return!!e&&Object(m.jsxs)("div",{children:["Auth Code: ",Object(m.jsx)("b",{children:e.authCode}),Object(m.jsx)("br",{}),"Address: ",Object(m.jsx)("b",{children:e.address}),Object(m.jsx)("br",{}),"Roles: ",Object(m.jsx)("b",{children:e.roles?e.roles.join(","):""}),Object(m.jsx)("br",{})]})},P=function(e){return Object(m.jsxs)(p.a,{fluid:!0,className:"m-0 p-0",children:[Object(m.jsx)(Q,{comp:"Scan Signin"}),Object(m.jsx)(p.a,{children:Object(m.jsxs)(ue.a,{variant:"light mt-3",children:[Object(m.jsx)(ue.a.Heading,{children:e.title}),e.body]})})]})},z=Object(m.jsx)(P,{title:"Error!",body:k}),L=Object(m.jsx)(P,{title:"Stop!",body:"The scan signin is not going through!"}),F=Object(m.jsx)(P,{title:"succeed!",body:"The scan signin completed!!"}),M=Object(m.jsx)(P,{title:"Your equipment is authorized by",body:Object(m.jsxs)("div",{className:"d-grid gap-2",children:[Object(m.jsx)("b",{children:"Exist auth:"}),(T=w,!!T&&Object(m.jsxs)("div",{children:["Auth Code: ",Object(m.jsx)("b",{children:T.authCode}),Object(m.jsx)("br",{}),"Address: ",Object(m.jsx)("b",{children:T.address}),Object(m.jsx)("br",{}),"Roles: ",Object(m.jsx)("b",{children:T.roles?T.roles.join(","):""}),Object(m.jsx)("br",{}),"Sign In Time: ",Object(m.jsx)("b",{children:T.signInTime?new Date(T.signInTime).toLocaleDateString():""}),Object(m.jsx)("hr",{})]})),Object(m.jsx)("b",{children:"Switch to"}),E(s),Object(m.jsx)(ce.a,{onClick:R,className:"m-2",children:"Continue Anyway"}),Object(m.jsx)(ce.a,{onClick:function(){u(!1)},variant:"danger",className:"m-2",children:"Stop"})]})}),q=Object(m.jsx)(P,{title:"Coming authentication is",body:Object(m.jsxs)("div",{className:"d-grid gap-2",children:[Object(m.jsx)("b",{children:"Equempent Setup to"}),E(s),Object(m.jsx)(ce.a,{onClick:R,className:"m-2",children:"Continue Anyway"}),Object(m.jsx)(ce.a,{onClick:function(){u(!1)},variant:"danger",className:"m-2",children:"Stop"})]})});return k?z:l?f?F:v?M:q:L}var ge=function(e){var t=Object(n.useState)(""),a=Object(d.a)(t,2),c=a[0],s=a[1],r={design:{caption:"Workshop",role:["foodie","supie"],linkTo:"/workshop"},focus:{caption:"Community",role:["foodie","supie"],linkTo:"/community"},menus:{caption:"Menu",role:["all"],linkTo:"/menus"},foodie:{caption:"Become a foodie",role:["all"],linkTo:"/becomeFoodie",exrole:["foodie"]},supie:{caption:"Become a supie",role:["all"],linkTo:"/becomeSupie",exrole:["supie"]},orders:{caption:Object(m.jsx)(ne,{}),role:["all"],linkTo:"/orders"}},i=function(e){return Object(j.g)().pathname!==r[e].linkTo?"menu-color":"menu-color-select"},o=function(e){var t=r[e]?r[e]:{role:[]},a=t&&t.role?t.role:[],n=t&&t.exrole?t.exrole:[],c=function(t){return Object(m.jsx)(b.a.Link,{as:u.b,to:t.linkTo,className:i(e),onClick:function(){s(!1)},children:t.caption})}(t);return Object(m.jsx)(z,{roles:a,comp:c,exroles:n})};return Object(n.useEffect)((function(){}),[]),Object(m.jsx)(p.a,{className:"bg-primary",fluid:!0,children:Object(m.jsx)(p.a,{children:Object(m.jsxs)(h.a,{expand:"lg",className:"p-1",expanded:c,children:[Object(m.jsx)(h.a.Brand,{as:u.b,to:"/",className:"menu_color",children:Object(m.jsx)(X,{})}),Object(m.jsx)(h.a.Brand,{as:u.b,to:"/auth",className:"menu_color",children:Object(m.jsx)(de,{})}),Object(m.jsx)(h.a.Toggle,{"aria-controls":"basic-navbar-nav",onClick:function(){return s(!c&&"expanded")}}),Object(m.jsx)(h.a.Collapse,{id:"basic-navbar-nav",children:Object(m.jsxs)(b.a,{className:"me-auto",children:[o("menus"),o("foodie"),o("supie"),o("design"),o("focus"),o("orders")]})})]})})})};var ve=function(){var e=(new Date).getFullYear();return Object(m.jsxs)(p.a,{fluid:!0,className:"footer",children:[Object(m.jsxs)("div",{className:"float-left alert-secondary footer-tag",children:["\xa9 ",e," Dishfu \xa0 \xa0",Object(m.jsx)(u.b,{to:"/privacy",children:"Privacy"}),"\xa0|\xa0",Object(m.jsx)(u.b,{to:"/terms",children:"Term"}),"\xa0|\xa0",Object(m.jsx)(u.b,{to:"/setting",children:"setting"})]}),Object(m.jsx)("div",{className:"clearfix p-0 m-0"})]})};var Se=function(e){var t=new J,a=Object(n.useState)([]),c=Object(d.a)(a,2),s=c[0],r=c[1],i=Object(n.useState)(0),o=Object(d.a)(i,2),l=o[0],j=o[1],b=function(e){for(var t=[],a=["plates","cooking","ingredients"],n=0;n<a.length;n++)e[a[n]]&&e[a[n]].map((function(e){t=[].concat(Object(f.a)(t),Object(f.a)(e.photos))}));return t};return Object(n.useEffect)((function(){t.loadStorageData({},(function(){!function(){var e=D.getState().data.recipes,t=e.length;r(e),j(t)}()}))}),[]),Object(m.jsxs)(p.a,{fluid:!0,className:"content-body p-0 m-0",children:[Object(m.jsx)("h4",{className:"float-left",children:"Recipes"}),Object(m.jsx)(ee.a,{className:"float-left ml-1 mr-3 alert-primary",children:l}),Object(m.jsxs)(u.b,{to:"/editRecipe/new",className:"float-left ml-3 mt-1",children:[Object(m.jsx)(te.a,{size:"1x",icon:ae.h})," Add a new recipe"]}),Object(m.jsx)("div",{className:"clearfix p-0 m-0"}),l?Object(m.jsx)(p.a,{fluid:!0,className:"p-0 m-0",children:s.map((function(e,a){return e?Object(m.jsxs)(p.a,{fluid:!0,className:"border shadow-sm p-0 mt-2 mb-3",children:[Object(m.jsxs)("div",{className:"float-right mr-2 p-2",children:[Object(m.jsxs)(ce.a,{variant:"link",as:u.b,to:"/editRecipe/"+e.id,className:"p-0 ml-3",children:[Object(m.jsx)(te.a,{size:"1x",icon:ae.d})," Edit"]}),Object(m.jsxs)(ce.a,{variant:"link",onClick:function(){var a;a=e.id,t.loadingOn(),t.saveLocalRecord({type:"deleteLocal",section:"recipes",data:{id:a}},(function(e){var a=D.getState().data.recipes,n=a.length;r(a),j(n),t.loadingOff()}))},className:"p-0 ml-3",children:[Object(m.jsx)(te.a,{size:"1x",icon:ae.o})," Delete"]})]}),Object(m.jsx)("b",{className:"float-left p-2 pl-3 pr-3 pb-0 m-0",children:e.name}),Object(m.jsx)("div",{className:"clearfix p-0 m-0"}),Object(m.jsxs)(p.a,{fluid:!0,className:"p-0 pl-3 pr-3 pb-1",children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("p",{className:"float-right",style:{maxWidth:"200px"},children:(n=b(e),Object(m.jsx)("span",{className:"clearfix",children:n.map((function(e,t){return Object(m.jsx)(Z,{ipfs:e.ipfs,isCache:!0,className:"float-left m-1 bg-secondary iconsImage"},t)}))}))}),Object(m.jsx)("span",{className:"text-primary",children:"Ingredients:"}),e.ingredients.map((function(e,t){return e.text})),Object(m.jsx)("br",{}),Object(m.jsx)("span",{className:"text-primary",children:"Instruction:"}),e.cooking.map((function(e,t){return e.text}))]}),Object(m.jsx)("div",{className:"clearfix p-1 m-0"})]})]},a):"";var n}))}):Object(m.jsx)(p.a,{fluid:!0,className:"rounded p-3 message-box grid-bg",children:Object(m.jsx)("h3",{className:"text-secondary m-3 p-3",children:"There is not recipe avaliable."})})]})},Ne=a(168);var ye=function(e){var t=Object(n.useState)(e.record),a=Object(d.a)(t,2),c=a[0],s=a[1],r=Object(n.useRef)(null),i=function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],n=0;case 2:if(!(n<t.target.files.length)){e.next=13;break}return e.t0=a,e.next=6,j(t.target.files[n]);case 6:e.t1=e.sent,e.t2={base64:e.t1},e.t0.push.call(e.t0,e.t2),t.target.value=null;case 10:n++,e.next=2;break;case 13:c.photos=[].concat(Object(f.a)(c.photos),a),s(c),b();case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.photos.splice(t,1),s(c),b();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){t(n.result)},n.onerror=function(e){a(e)}}))},b=function(){e.callParent.syncRec(e.idx,c)},h=function(){var e=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=c).text=t.target.value,s(a),b();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){}),[]),Object(m.jsxs)(p.a,{fluid:"true",className:"p-2",children:[Object(m.jsxs)(Ne.a,{className:"m-2",children:[c.idx?Object(m.jsx)(Ne.a.Text,{className:"bg-light",children:c.idx}):"",Object(m.jsx)(Y.a.Control,{as:"textarea",defaultValue:e.record?e.record.text:"",rows:"2",onChange:h})]}),Object(m.jsx)(Y.a.Control,{type:"file",hidden:!0,ref:r,onChange:i}),Object(m.jsxs)("div",{className:"clearfix p-1",children:[Object(m.jsxs)("div",{className:"float-right",children:[e.isdelete&&Object(m.jsxs)(ce.a,{variant:"link",className:"ml-3",onClick:function(){e.callParent.removeSection(e.idx)},children:[Object(m.jsx)(te.a,{size:"1x",icon:ae.o,className:"m-0"})," Remove"]}),Object(m.jsxs)(ce.a,{variant:"link",className:"ml-3",onClick:function(e){r.current.click()},children:[Object(m.jsx)(te.a,{size:"1x",icon:ae.g,className:"m-0"})," Upload Photo"]})]}),c.photos.map((function(e,t){return Object(m.jsxs)("div",{className:"m-1 rounded shadow sahdow-sm alert-secondary bg-light float-left",children:[Object(m.jsx)(Z,{base64:e.base64,ipfs:e.ipfs,isCache:!0,className:"iconsImage"}),Object(m.jsx)(te.a,{size:"2x",icon:ae.n,onClick:function(){return u(t)},className:"m-1 align-bottom"})]},t)}))]})]})};var we=function(e){var t=new J,a=new U,c=Object(n.useState)((new Date).getTime()),s=Object(d.a)(c,2),r=(s[0],s[1]),i=Object(n.useState)(null),u=Object(d.a)(i,2),b=u[0],h=u[1],f=Object(j.h)(),g=f.id,v=f.recipeCode,S=Object(j.f)();Object(n.useEffect)((function(){(new J).loadStorageData({},(function(){var e=D.getState().data.recipes.findIndex((function(e){return e.id===g}));h("new"===g?{id:"new",name:"",userId:_.getState().userId,referenceCode:v,cooking:[{text:"",photos:[]}],ingredients:[{idx:"",text:"",photos:[]}]}:-1!==e&&D.getState().data.recipes[e])}))}),[]);var N,y,w=function(){t.setOperationRole("foodie"),S.push("/workshop")},C=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loadingOn(),e.next=3,a.promiseSave(b);case 3:t.saveLocalRecord({type:"updateLocal",section:"recipes",data:b},(function(){t.loadingOff(),t.setOperationRole("foodie"),w()}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loadingOn(),e.next=3,a.promiseSave(b);case 3:a.promisePublish(b,(function(e){t.DatabaseApi("community",{action:"publish",data:{publishCode:e,docType:"recipe",publisher:_.getState().fp,authCode:_.getState().data.authInfo.authCode}},(function(){t.loadingOff(),w()}))}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(e){return function(t){b[e]&&(b[e].splice(t,1),h(b),A(e),r((new Date).getTime()))}},A=function(e){if(!b[e])return!0;for(var t=0;t<b[e].length;t++)b[e][t].idx="ABCDE"[t];h(b)},T=function(e){return function(t,a){var n=b;n[e]&&(n[e][t]=a,h(n),r((new Date).getTime()))}},R=function(){var e=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=b).name=t.target.value,console.log("rec.name=>",a.name,a),h(a),console.log("onNameChange=>",t.target.value);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return null===b?Object(m.jsx)(p.a,{className:"p-3 content-body",children:"Loading ..."}):b.id?Object(m.jsx)(p.a,{className:"p-3 content-body",children:Object(m.jsx)("div",{className:"p-3 border border-secondary",children:Object(m.jsxs)(Y.a,{children:[Object(m.jsxs)("div",{className:"m-1 ml-2",children:[Object(m.jsx)("b",{children:"new"===g?"New Foodie's Recip":"Foodie's Recip "+b.id}),"\xa0(By user ",b.userId,") ",b.recipeCode]}),(y=b.referenceCode,y?Object(m.jsxs)(Y.a.Text,{className:"border border-secondary  alert-warning p-2 m-0",style:{height:"8rem",overflowY:"scroll",overflowX:"hidden",inline:"block"},children:[Object(m.jsx)(Y.a.Text,{children:Object(m.jsx)("i",{children:"Original Recipe"})}),Object(m.jsx)(x,{ipfs:y,tpl:function(e){return Object(m.jsx)(O,{record:e.record,className:"p-0 m-0"})}})]}):""),Object(m.jsx)(Y.a.Group,{controlId:"formFileSm",className:"p-2 m-1",children:Object(m.jsx)(Y.a.Control,{defaultValue:b.name,required:!0,placeholder:"Input Your Recipe Name",type:"textarea",onChange:R})}),Object(m.jsxs)("div",{className:"m-1 ml-2 mb-3",children:[Object(m.jsx)("b",{children:"Ingredients"}),b.ingredients.length<3&&Object(m.jsxs)(ce.a,{variant:"link",className:"ml-3",onClick:(N="ingredients",function(){var e=b;e[N]&&e[N].length<3&&(e[N].push({idx:"",text:"",photos:[]}),A(N),h(e),r((new Date).getTime()))}),children:[Object(m.jsx)(te.a,{size:"1x",icon:ae.h})," Add a Ingredient"]}),b.ingredients.map((function(e,t){return Object(m.jsx)("span",{children:Object(m.jsx)(ye,{caption:"Section",idx:t,callParent:{syncRec:T("ingredients"),removeSection:k("ingredients")},record:e,isdelete:!(b.ingredients.length<2)},t)},t)}))]}),Object(m.jsxs)("div",{className:"m-1 ml-2 mt-2",children:[Object(m.jsx)("b",{children:"Cooking Instruction"}),b.cooking.map((function(e,t){return Object(m.jsx)("span",{children:Object(m.jsx)(ye,{caption:"",idx:t,callParent:{syncRec:T("cooking"),removeSection:k("cooking")},record:e,isdelete:!(b.cooking.length<2)},t)},t)}))]}),Object(m.jsx)($.a,{children:Object(m.jsxs)(B.a,{xs:"12",align:"center",className:"m-1 ml-2",children:[Object(m.jsxs)(ce.a,{type:"button",className:"btn btn-primary m-1 mr-3",onClick:C,children:[Object(m.jsx)(te.a,{size:"1x",icon:ae.j,className:"m-0"})," Save"]}),"new"!==b.id&&Object(m.jsxs)(ce.a,{type:"button",className:"btn btn-primary m-1 mr-3",onClick:I,children:[Object(m.jsx)(te.a,{size:"1x",icon:ae.r,className:"m-0"})," Publish"]}),Object(m.jsxs)(ce.a,{className:"btn btn-secondary m-1 mr-3",onClick:w,children:[Object(m.jsx)(te.a,{size:"1x",icon:ae.p,className:"m-0"})," Exit"]})]})})]})})}):Object(m.jsx)(p.a,{className:"p-3 content-body",children:Object(m.jsxs)("div",{className:"alert alert-danger",children:["Wrong recipe id -",g,"-"]})})};var Ce=function(e){var t=Object(n.useState)([]),a=Object(d.a)(t,2),c=a[0],s=a[1],r=Object(n.useState)({address:""}),i=Object(d.a)(r,2),o=i[0],l=i[1],u=Object(n.useState)((new Date).getTime()),j=Object(d.a)(u,2),b=(j[0],j[1]);return Object(n.useEffect)((function(){var e=_.subscribe((function(){return"role"===_.getState()._watcher&&(s(_.getState().data.roles),l(_.getState().data.userInfo),b((new Date).getTime())),!1}));return s(_.getState().data.roles),l(_.getState().data.userInfo),b((new Date).getTime()),function(){e()}}),[]),Object(m.jsxs)(p.a,{className:"p-3",children:[Object(m.jsx)("h5",{children:"Setting"}),Object(m.jsxs)(p.a,{className:"m-2 mr-3 p-2 alert-secondary",children:[Object(m.jsx)("b",{className:"p-0 mb-3",children:"My roles"}),[{code:"foodie",description:"Foodie"},{code:"supie",description:"Food supplier / Restaurent / Grocery"}].map((function(e,t){return Object(m.jsxs)("div",{className:"p-0 pl-3 pr-3 text-primary",onClick:function(){!function(e){var t=c.indexOf(e);-1===t?c.push(e):c.splice(t,1),s(c),b((new Date).getTime())}(e.code)},children:[e.description,-1!==c.indexOf(e.code)&&Object(m.jsx)(ce.a,{variant:"link",className:"p-0 pl-3",children:Object(m.jsx)(te.a,{size:"1x",icon:ae.b,className:"ml-2 text-danger"})}),-1===c.indexOf(e.code)&&Object(m.jsx)(ce.a,{variant:"link",className:"p-0 pl-3",children:Object(m.jsx)(te.a,{size:"1x",icon:ae.m,className:"ml-2 text-secondary"})})]},t)}))]}),Object(m.jsxs)(p.a,{className:"m-2 mr-3 p-2 alert-secondary",children:[Object(m.jsx)("b",{children:"My address"}),Object(m.jsxs)(Y.a,{children:[Object(m.jsxs)(Y.a.Group,{controlId:"formFileSm",className:"p-0 pl-3",children:[Object(m.jsx)(Y.a.Label,{children:Object(m.jsx)("b",{children:"Country:"})}),["USA","CANADA"].map((function(e,t){return-1!==c.indexOf(e.code)?Object(m.jsxs)(ce.a,{variant:"link",className:"p-0 pl-3",children:[e,Object(m.jsx)(te.a,{size:"1x",icon:ae.b,className:"ml-1 mr-2 text-danger"})]},t):Object(m.jsxs)(ce.a,{variant:"link",className:"p-0 pl-3",children:[e,Object(m.jsx)(te.a,{size:"1x",icon:ae.m,className:"ml-1 mr-2  text-secondary"})]},t)}))]}),Object(m.jsxs)(Y.a.Group,{className:"p-0 pl-3",children:[Object(m.jsx)(Y.a.Label,{children:Object(m.jsx)("b",{children:"Street:"})}),Object(m.jsx)(Y.a.Control,{placeholder:"Address, City",as:"textarea",rows:"3",value:o.address,onChange:function(e){l({address:e.target.value})}})]})]})]}),Object(m.jsx)($.a,{children:Object(m.jsx)(B.a,{xs:"12",align:"center",className:"m-1 ml-2",children:Object(m.jsxs)(ce.a,{type:"button",className:"btn btn-primary m-1 mr-3",onClick:function(){_.dispatch({type:"saveUserInfo",userInfo:o}),_.dispatch({type:"saveRoles",roles:c})},children:[Object(m.jsx)(te.a,{size:"1x",icon:ae.j,className:"m-0"})," Save"]})})})]})};var Ie=function(e){var t=Object(n.useState)(!1),a=Object(d.a)(t,2),c=a[0],s=a[1];return Object(n.useEffect)((function(){s(e.rec)}),[]),c.data?Object(m.jsx)(p.a,{className:"p-1",fluid:!0,children:Object(m.jsxs)($.a,{children:[Object(m.jsx)(B.a,{xs:2,style:{textAlign:"center"},className:"p-0 ",children:Object(m.jsx)("div",{className:"border bg-light",children:Object(m.jsx)(Z,{ipfs:function(e){var t=[];return["cooking","ingredients","plates"].map((function(a){return(e.data&&e.data[a]&&e.data[a]?e.data[a]:[]).map((function(e){return(e.photos?e.photos:[]).map((function(e){return e&&e.ipfs&&t.push(e.ipfs),!0})),!0})),!0})),t}(c)[0],isCache:!0,style:{maxHeight:"120px",objectFit:"cover"}})})}),Object(m.jsxs)(B.a,{xs:8,className:"p-3",children:[Object(m.jsx)("b",{children:c.data?c.data.name:""}),Object(m.jsx)("br",{}),Object(m.jsx)("span",{children:function(e){var t=[];return["cooking","ingredients","plates"].map((function(a){return(e.data&&e.data[a]?e.data[a]:[]).map((function(e){return t.push(e.text+"; ")})),!0})),t.join(" ")}(c)}),Object(m.jsx)("b",{children:c.published})]}),Object(m.jsxs)(B.a,{xs:2,style:{textAlign:"center"},className:"p-0",children:[Object(m.jsx)("p",{className:"text-center p-0",style:{fontSize:"11px"},children:c.publisher}),Object(m.jsx)(y,{value:"5",readOnly:"true"}),Object(m.jsx)("h4",{className:"p-2",children:c.data&&c.data.price?"$"+c.data.price:"Call Foodie"}),Object(m.jsx)(se,{code:c.publishCode}),Object(m.jsx)("hr",{})]}),Object(m.jsx)("br",{})]})}):""};var ke=function(e){var t=new J,a=new U,c=Object(n.useState)([]),s=Object(d.a)(c,2),r=s[0],i=s[1],u=Object(n.useState)([]),j=Object(d.a)(u,2),b=(j[0],j[1],Object(n.useState)(0)),h=Object(d.a)(b,2),f=(h[0],h[1]);return Object(n.useEffect)((function(){t.loadStorageData({},(function(){t.getStorageData({},(function(e){})),t.loadingOn(),t.DatabaseApi("menu",{action:"getList"},(function(e){t.loadingOff(),Object(l.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("==result.data===>",e),t.t0=i,t.next=4,a.promisePullQ(e.data?e.data:[]);case 4:t.t1=t.sent,(0,t.t0)(t.t1),f((new Date).getTime());case 7:case"end":return t.stop()}}),t)})))(),console.log("menu--list->",e)}))}))}),[]),Object(m.jsx)(p.a,{className:"p-3 content-body",children:Object(m.jsxs)("div",{className:"p-3",children:[Object(m.jsx)("h5",{children:"Menus This Week"}),r.map((function(e,t){return Object(m.jsx)(Ie,{rec:e},t)}))]})})};var De=function(e){return Object(n.useEffect)((function(){}),[]),Object(m.jsx)(p.a,{className:"content-body",children:Object(m.jsx)("h5",{className:"p-3",children:"About Us"})})};var Ae=function(e){return Object(n.useEffect)((function(){}),[]),Object(m.jsx)(p.a,{className:"content-body",children:Object(m.jsx)("h5",{className:"p-3",children:"Contact Us"})})};var Te=function(e){var t=Object(n.useState)([]),a=Object(d.a)(t,2),c=a[0],s=a[1],r=new J;return Object(n.useEffect)((function(){r.loadingOn(),r.DatabaseApi("ad",{action:"homeList"},(function(e){r.loadingOff(),s(e&&e.data&&e.data.promotion?e.data.promotion:[])}))}),[]),Object(m.jsx)(p.a,{fluid:!0,className:"p-0 m-0 content-body wood-bg",children:Object(m.jsxs)(p.a,{fluid:!0,className:"p-0 m-0 content-body pic-bg",children:[Object(m.jsx)("div",{className:"master-bg-video-frame bg-secondary",children:Object(m.jsx)("video",{className:"master-bg-video",poster:"",preload:"auto",autoPlay:!0,loop:!0,muted:!0,children:Object(m.jsx)("source",{src:"",type:"video/mp4"})})}),Object(m.jsxs)("div",{style:{minHeight:"100%"},children:[Object(m.jsxs)("div",{className:"text-center",style:{position:"relative",height:"360px",top:"68px"},children:[Object(m.jsx)("p",{children:Object(m.jsx)("b",{className:"p-1 text-light",style:{fontSize:"3.8em",lineHeight:"2.8rem"},children:"Community Workshops"})}),Object(m.jsx)("p",{children:Object(m.jsx)("b",{className:"p-3 text-success",style:{fontSize:"2.6em",lineHeight:"2.5rem"},children:"Foodies together"})}),Object(m.jsx)("p",{className:"text-warning p-3",style:{fontSize:"1.5em",lineHeight:"2rem"},children:Object(m.jsxs)("b",{children:["Cooking",Object(m.jsx)(te.a,{size:"1x",icon:ae.e,className:"m-1",style:{fontSize:"0.5rem"}}),"Eating",Object(m.jsx)(te.a,{size:"1x",icon:ae.e,className:"m-1",style:{fontSize:"0.5rem"}}),"Sharing",Object(m.jsx)(te.a,{size:"1x",icon:ae.e,className:"m-1",style:{fontSize:"0.5rem"}}),"Saving",Object(m.jsx)(te.a,{size:"1x",icon:ae.e,className:"m-1",style:{fontSize:"0.5rem"}}),"Enjoying!"]})})]}),Object(m.jsxs)(p.a,{fluid:!0,className:"alert-light",style:{position:"relative",marginBottom:"0px",minHeight:"1024px",textAlign:"center"},children:[Object(m.jsx)(p.a,{className:"text-left pt-3",children:Object(m.jsx)("h3",{children:"Weekly Promotion:"})}),Object(m.jsxs)(p.a,{className:"text-left p-0",children:[c.map((function(e,t){return Object(m.jsxs)("div",{className:"float-left p-2 m-0 text-center",children:[Object(m.jsx)(Z,{ipfs:e.ipfs,isCache:!0,className:"",style:{width:"200px",height:"200px",minHeight:"180px",objectFit:"cover"}}),Object(m.jsxs)("div",{children:[e.name,Object(m.jsx)("br",{}),Object(m.jsx)(y,{value:e.rating,readOnly:"true"})]})]},t)})),Object(m.jsx)("div",{className:"clearfix p-0 m-0"})]})]})]})]})})};var Re=function(e){var t=Object(j.h)();return Object(m.jsx)("div",{className:"m-0 p-0",children:Object(m.jsx)(w,{message:"Coming soon...",title:t.title})})};var Ee=function(e){var t=new J,a=new U,c=Object(n.useState)([]),s=Object(d.a)(c,2),r=s[0],i=s[1],u=Object(n.useState)((new Date).getTime()),j=Object(d.a)(u,2),b=(j[0],j[1]),h=function(){console.log(".load list ."+(new Date).getTime()),t.loadingOn(),t.DatabaseApi("community",{action:"getList"},(function(e){t.loadingOff(),console.log(e.data),Object(l.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=i,t.next=3,a.promisePullQ(e.data?e.data:[]);case 3:t.t1=t.sent,(0,t.t0)(t.t1),b((new Date).getTime());case 6:case"end":return t.stop()}}),t)})))()}))};Object(n.useEffect)((function(){h()}),[]);var f=function(e){t.loadingOn(),t.DatabaseApi("community",{action:"delete",data:{publishCode:e}},(function(e){t.loadingOff(),h()}))},O=function(e){t.loadingOn(),t.DatabaseApi("menu",{action:"add",data:{type:"plate",publishCode:e.publishCode}},(function(e){console.log(e),h(),t.loadingOff()}))};return Object(m.jsxs)(p.a,{className:"p-3 content-body",children:[Object(m.jsxs)("h5",{children:["My community: ",Object(m.jsx)(ee.a,{bg:"primary",className:"alert-primary ml-2",children:r.length})]}),Object(m.jsx)("hr",{className:"border border-danger"}),r.map((function(e,t){return Object(m.jsx)(Pe,{record:e,parent:{deleteRecord:f,publishPlate:O}},t)}))]})};var Pe=function(e){var t,a=Object(n.useState)(e.record),c=Object(d.a)(a,2),s=c[0],r=c[1];return Object(n.useEffect)((function(){r(e.record)}),[]),Object(m.jsxs)(p.a,{fluid:!0,className:"border shadow-sm p-2 mt-2 mb-3",children:[Object(m.jsx)("p",{className:"float-right",style:{maxWidth:"200px"},children:(t=function(e){for(var t=[],a=["plates","cooking","ingredients"],n=0;n<a.length;n++)e[a[n]]&&e[a[n]].map((function(e){t=[].concat(Object(f.a)(t),Object(f.a)(e.photos))}));return t}(s.data),Object(m.jsx)("span",{className:"clearfix",children:t.map((function(e,t){return Object(m.jsx)(Z,{ipfs:e.ipfs,isCache:!0,className:"m-1 float-left  bg-secondary iconsImage"},t)}))}))}),Object(m.jsxs)("div",{className:"p-0",children:[Object(m.jsxs)("p",{className:"p-0 pl-0 m-1",children:[Object(m.jsx)("b",{children:s.data.name}),Object(m.jsxs)(u.b,{to:"/communityResponse/"+s.publishCode,className:"ml-3",children:["Details",Object(m.jsx)(te.a,{size:"1x",icon:ae.a,className:"ml-2"})]}),Object(m.jsxs)(ce.a,{variant:"link",onClick:function(){e.parent.deleteRecord(s.publishCode,"community")},className:"p-0 ml-3",children:[Object(m.jsx)(te.a,{size:"1x",icon:ae.o})," Delete"]}),Object(m.jsx)("br",{}),Object(m.jsx)("span",{children:Object(m.jsxs)("i",{style:{fontSize:"0.8rem"},children:["Record id-: ",s.id,", Publisher ",s.publisher]})})]}),s.data.ingredients&&Object(m.jsxs)("p",{className:"text-secondary p-1 pl-2 m-0",children:[Object(m.jsx)("i",{className:"text-primary",children:"Ingredients:"}),s.data.ingredients.map((function(e,t){return e.text}))]}),s.data.plates&&Object(m.jsxs)("p",{className:"text-secondary p-1 pl-2 m-0",children:[Object(m.jsx)("i",{className:"text-primary",children:"Plates:"}),s.data.plates.map((function(e,t){return e.text}))]}),s.data.cooking&&Object(m.jsxs)("p",{className:"text-secondary p-1 pl-2 m-0",children:[Object(m.jsx)("i",{className:"text-primary",children:"Instruction:"}),s.data.cooking.map((function(e,t){return e.text}))]}),Object(m.jsxs)("p",{className:"text-secondary p-1 pl-2 m-0",children:[Object(m.jsx)("i",{className:"text-primary mr-2",children:"Published:"}),new Date(s.created).toISOString().slice(0,19),Object(m.jsx)("br",{}),Object(m.jsx)("i",{className:"text-primary",children:"Id:"})," ",s.id,Object(m.jsx)("br",{}),Object(m.jsx)("i",{className:"text-primary",children:"Price:"})," ",s.data.price,Object(m.jsx)("br",{}),Object(m.jsx)("i",{className:"text-primary",children:"Document type:"})," ",s.docType]}),"plate"===s.docType&&Object(m.jsx)(ce.a,{onClick:function(){e.parent.publishPlate(s)},className:"btn-promary m-1",children:"Foodie approve"}),"recipe"===s.docType&&Object(m.jsx)(ce.a,{as:u.b,to:"/editPlate/"+s.publishCode+"/new",className:"btn-warning m-1",children:"Add my plate"}),"recipe"===s.docType&&!s.data.referenceCode&&Object(m.jsx)(ce.a,{as:u.b,to:"/editRecipe/"+s.publishCode+"/new",className:"btn-success m-1",children:"Reference to a new recipe"})]}),Object(m.jsx)("div",{className:"clearfix p-0 m-0"})]})};var _e=function(e){var t=new J,a=new U,c=Object(n.useState)(null),s=Object(d.a)(c,2),r=s[0],i=s[1],o=Object(j.h)().publishCode;return Object(n.useEffect)((function(){console.log(o),a.getIpfJsonsAsync(o,(function(e){i(e),console.log("IPFSEngine.getIpfJsonsAsync==>",e)})),t.loadStorageData({},(function(){var e,t=D.getState().data.focuses.filter((function(e){return e.id===o}));t[0]&&(e=t[0],console.log("Q==>",e),new Promise((function(t,a){fetch("http://209.94.90.1/ipfs/"+e.recipe).then((function(e){return e.json()})).then((function(a){var n={id:e.id,recipe:a,ipfsCode:e.recipe,published:e.published,publisher:e.publisher};t(n)})).catch((function(t){a("reject_"+e.recipe+"-"+t.message)}))}))).then((function(e){}))}))}),[]),r?Object(m.jsxs)(p.a,{className:"p-3 content-body",children:[Object(m.jsxs)("h5",{children:["Focus - ",o]}),JSON.stringify(r),Object(m.jsx)("hr",{}),function(e){return Object(m.jsxs)(p.a,{fluid:!0,className:"border shadow-sm p-2 mt-2 mb-3",children:[Object(m.jsx)("p",{children:e.name}),Object(m.jsx)("div",{className:"clearfix p-0 m-0"})]})}(r)]}):"=="};var ze=function(e){var t=Object(n.useState)([]),a=Object(d.a)(t,2),c=a[0],s=a[1],r=Object(n.useState)(null),i=Object(d.a)(r,2),o=i[0],l=i[1],u=_.getState().allRoles.sort((function(e,t){return t.id&&e.id&&e.id-t.id})),j=function(e){l(e),_.dispatch({type:"updateOperationRole",operationRole:e})},b=function(e){for(var t in u)if(u[t].code===e)return u[t].desc;return""};Object(n.useEffect)((function(){!function(){var e=_.getState()&&_.getState().data&&_.getState().data.authInfo?_.getState().data.authInfo.roles:[],t=_.getState()&&_.getState().data?_.getState().data.operationRole:"";-1===e.indexOf(t)&&(t=e.length?e[0]:"",j(t)),l(!t&&e.length?e[0]:t),s(e.sort((function(e,t){return e.id&&e.id-t.id})))}()}),[]);var h=function(e){return"p-3 mr-1 text-secondary "+(o===e?"operation-as-link-checked":"operation-as-link")};return c.length>1?Object(m.jsx)(p.a,{fluid:!0,className:"p-0 m-0 text-right",children:Object(m.jsxs)("span",{className:"p-2 m-0 text-primary pl-2 border",children:[JSON.stringify(c)," -- ",o,Object(m.jsx)("b",{children:" Swith role:"}),u.map((function(e,t){return-1===c.indexOf(e.code)?"":Object(m.jsxs)("span",{onClick:function(){j(e.code)},className:h(e.code),children:[" ",b(e.code)]},t)}))]})}):""};var Le=function(e){var t=new J,a=Object(n.useState)([]),c=Object(d.a)(a,2),s=c[0],r=c[1],i=Object(n.useState)(0),o=Object(d.a)(i,2),l=o[0],j=o[1],b=function(e){for(var t=[],a=["plates","cooking","ingredients"],n=0;n<a.length;n++)e[a[n]]&&e[a[n]].map((function(e){t=[].concat(Object(f.a)(t),Object(f.a)(e.photos))}));return t},h=function(){var e=D.getState().data.plates,t=e.length;r(e),j(t)};return Object(n.useEffect)((function(){t.loadStorageData({},(function(){h()}))}),[]),Object(m.jsxs)(p.a,{fluid:!0,className:"content-body p-0 m-0",children:[Object(m.jsx)("h4",{className:"float-left",children:"Plates"}),Object(m.jsx)(ee.a,{className:"float-left ml-1 mr-3 alert-primary",children:l}),Object(m.jsx)("div",{className:"clearfix p-0 m-0"}),l?Object(m.jsx)(p.a,{fluid:!0,className:"p-0 m-0",children:s.map((function(e,a){return e?Object(m.jsxs)(p.a,{fluid:!0,className:"border shadow-sm p-0 mt-2 mb-3",children:[Object(m.jsxs)("div",{className:"float-right mr-2 p-2",children:[Object(m.jsxs)(ce.a,{variant:"link",as:u.b,to:"/editPlate/"+e.recipeCode+"/"+e.id,className:"p-0 ml-3",children:[Object(m.jsx)(te.a,{size:"1x",icon:ae.d})," Edit"]}),Object(m.jsxs)(ce.a,{variant:"link",onClick:function(){var a,n;a=e.id,n="plates",t.loadingOn(),t.saveLocalRecord({type:"deleteLocal",section:n,data:{id:a}},(function(e){h(),t.loadingOff()}))},className:"p-0 ml-3",children:[Object(m.jsx)(te.a,{size:"1x",icon:ae.o})," Delete"]})]}),Object(m.jsx)("b",{className:"float-left p-2 pl-3 pr-3 pb-0 m-0",children:e.name}),Object(m.jsx)("div",{className:"clearfix p-0 m-0"}),Object(m.jsxs)(p.a,{fluid:!0,className:"p-0 pl-3 pr-3 pb-1",children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("p",{className:"float-right",style:{maxWidth:"200px"},children:(n=b(e),Object(m.jsx)("span",{className:"clearfix",children:n.map((function(e,t){return Object(m.jsx)(Z,{ipfs:e.ipfs,isCache:!0,className:"float-left m-1 bg-secondary iconsImage"},t)}))}))}),Object(m.jsx)("span",{className:"text-primary",children:"Plates:"}),e.plates.map((function(e,t){return e.text})),Object(m.jsx)("br",{}),Object(m.jsx)("span",{className:"text-primary",children:"Instruction:"}),e.cooking.map((function(e,t){return e.text}))]}),e.price&&Object(m.jsxs)("span",{className:"text-primary",children:["Price : $",e.price]}),Object(m.jsx)("div",{className:"clearfix p-1 m-0"})]})]},a):"";var n}))}):Object(m.jsx)(p.a,{fluid:!0,className:"rounded p-3 message-box grid-bg",children:Object(m.jsx)("h3",{className:"text-secondary m-3 p-3",children:"There is not plate avaliable."})})]})};var Fe=function(e){var t=Object(n.useState)(e.record),a=Object(d.a)(t,2),c=a[0],s=a[1],r=Object(n.useRef)(null),i=function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],n=0;case 2:if(!(n<t.target.files.length)){e.next=13;break}return e.t0=a,e.next=6,j(t.target.files[n]);case 6:e.t1=e.sent,e.t2={base64:e.t1},e.t0.push.call(e.t0,e.t2),t.target.value=null;case 10:n++,e.next=2;break;case 13:c.photos=[].concat(Object(f.a)(c.photos),a),s(c),b();case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.photos.splice(t,1),s(c),b();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){t(n.result)},n.onerror=function(e){a(e)}}))},b=function(){e.callParent.syncRec(e.idx,c)},h=function(){var e=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=c).text=t.target.value,s(a),b();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){}),[]),Object(m.jsxs)(p.a,{fluid:"true",className:"p-2",children:[Object(m.jsxs)(Ne.a,{className:"m-2",children:[c.idx?Object(m.jsx)(Ne.a.Text,{className:"bg-light",children:c.idx}):"",Object(m.jsx)(Y.a.Control,{as:"textarea",defaultValue:e.record?e.record.text:"",rows:"2",onChange:h})]}),Object(m.jsx)(Y.a.Control,{type:"file",hidden:!0,ref:r,onChange:i}),Object(m.jsxs)("div",{className:"clearfix p-1",children:[Object(m.jsxs)("div",{className:"float-right",children:[e.isdelete&&Object(m.jsxs)(ce.a,{variant:"link",className:"ml-3",onClick:function(){e.callParent.removeSection(e.idx)},children:[Object(m.jsx)(te.a,{size:"1x",icon:ae.o,className:"m-0"})," Remove"]}),Object(m.jsxs)(ce.a,{variant:"link",className:"ml-3",onClick:function(e){r.current.click()},children:[Object(m.jsx)(te.a,{size:"1x",icon:ae.g,className:"m-0"})," Upload Photo"]})]}),c.photos.map((function(e,t){return Object(m.jsxs)("div",{className:"m-1 rounded shadow sahdow-sm alert-secondary bg-light float-left",children:[Object(m.jsx)(Z,{base64:e.base64,ipfs:e.ipfs,isCache:!0,className:"iconsImage"}),Object(m.jsx)(te.a,{size:"2x",icon:ae.n,onClick:function(){return u(t)},className:"m-1 align-bottom"})]},t)}))]})]})};var Je=function(e){var t=new J,a=new U,c=Object(j.f)(),s=Object(n.useState)((new Date).getTime()),r=Object(d.a)(s,2),i=(r[0],r[1]),u=Object(n.useState)(null),b=Object(d.a)(u,2),h=b[0],f=b[1],g=Object(j.h)(),v=g.id,S=g.recipeCode;Object(n.useEffect)((function(){(new J).loadStorageData({},(function(){console.log(D.getState().data);var e=D.getState().data.plates.findIndex((function(e){return e.id===v}));f("new"===v?{id:"new",recipeCode:S,name:"plate "+S,userId:_.getState().userId,cooking:[{text:"",photos:[]}],plates:[{idx:"",text:"",photos:[]}]}:-1!==e&&D.getState().data.plates[e])}))}),[]);var N,y,w=function(){t.setOperationRole("supie"),c.push("/workshop")},C=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loadingOn(),e.next=3,a.promiseSave(h);case 3:console.log("DataStore.getState()",D.getState()),t.saveLocalRecord({type:"updateLocal",section:"plates",data:h},(function(){t.setOperationRole("supie"),t.loadingOff(),w()}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loadingOn(),e.next=3,a.promiseSave(h);case 3:a.promisePublish(h,(function(e){t.DatabaseApi("community",{action:"publish",data:{publishCode:e,docType:"plate",publisher:_.getState().fp,authCode:_.getState().data.authInfo.authCode}},(function(){t.loadingOff(),w()}))}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(e){return function(t){h[e]&&(h[e].splice(t,1),f(h),A(e),i((new Date).getTime()))}},A=function(e){if(!h[e])return!0;for(var t=0;t<h[e].length;t++)h[e][t].idx="ABCDE"[t];f(h)},T=function(e){return function(t,a){var n=h;n[e]&&(n[e][t]=a,f(n),i((new Date).getTime()))}};return null===h?Object(m.jsx)(p.a,{className:"p-3 content-body",children:"Loading ..."}):h.id?Object(m.jsx)(p.a,{className:"p-3 content-body",children:Object(m.jsx)("div",{className:"p-3 border border-secondary",children:Object(m.jsxs)(Y.a,{children:[Object(m.jsxs)(Y.a.Group,{className:"m-1 ml-2 mb-3",children:[Object(m.jsx)(Y.a.Label,{children:Object(m.jsx)("b",{children:"Plate Design:"})}),(y=h.recipeCode,y?Object(m.jsxs)(Y.a.Text,{className:"border border-secondary  alert-warning p-2 m-0",style:{height:"6rem",overflowY:"scroll",overflowX:"hidden",inline:"block"},children:[Object(m.jsx)(Y.a.Text,{children:Object(m.jsx)("i",{children:"Original Recipe"})}),Object(m.jsx)(x,{ipfs:y,tpl:function(e){return Object(m.jsx)(O,{record:e.record,className:"p-0 m-0"})}})]}):"")]}),Object(m.jsxs)("div",{className:"m-1 ml-2 mb-3",children:[Object(m.jsx)("b",{children:"Plats Description"})," ",h.recipeCode,h.plates.length<3&&Object(m.jsxs)(ce.a,{variant:"link",className:"float-right mr-3 button-link",onClick:(N="plates",function(){var e=h;e[N]&&e[N].length<3&&(e[N].push({idx:"",text:"",photos:[]}),A(N),f(e),i((new Date).getTime()))}),children:[Object(m.jsx)(te.a,{size:"1x",icon:ae.h})," Add a Plate"]}),h.plates.map((function(e,t){return Object(m.jsx)("span",{children:Object(m.jsx)(Fe,{caption:"Section",idx:t,callParent:{syncRec:T("plates"),removeSection:k("plates")},record:e,isdelete:!(h.plates.length<2)},t)},t)}))]}),Object(m.jsx)("div",{className:"m-1 ml-2",children:Object(m.jsx)("b",{children:"Cooking Instruction"})}),h.cooking.map((function(e,t){return Object(m.jsx)("span",{children:Object(m.jsx)(Fe,{caption:"",idx:t,callParent:{syncRec:T("cooking"),removeSection:k("cooking")},record:e,isdelete:!(h.cooking.length<2)},t)},t)})),Object(m.jsxs)(Y.a.Group,{className:"m-1 ml-2 mb-3",children:[Object(m.jsx)(Y.a.Label,{children:Object(m.jsx)("b",{children:"Plate Price:"})}),Object(m.jsx)(Y.a.Control,{defaultValue:h.price,placeholder:"Input price",type:"text",onChange:function(e){h.price=e.target.value,f(h)}})]}),Object(m.jsx)($.a,{children:Object(m.jsxs)(B.a,{xs:"12",align:"center",className:"m-1 ml-2",children:[Object(m.jsxs)(ce.a,{type:"button",className:"btn btn-primary m-1 mr-3",onClick:C,children:[Object(m.jsx)(te.a,{size:"1x",icon:ae.j,className:"m-0"})," Save"]}),Object(m.jsxs)(ce.a,{type:"button",className:"btn btn-primary m-1 mr-3",onClick:I,children:[Object(m.jsx)(te.a,{size:"1x",icon:ae.j,className:"m-0"})," Response to Foodie"]}),Object(m.jsxs)(ce.a,{className:"btn btn-secondary m-1 mr-3",onClick:w,children:[Object(m.jsx)(te.a,{size:"1x",icon:ae.p,className:"m-0"})," Exit"]})]})})]})})}):Object(m.jsx)(p.a,{className:"p-3 content-body",children:Object(m.jsxs)("div",{className:"alert alert-danger",children:["Wrong recipe id -",v,"-"]})})};var Me=function(e){var t=Object(n.useState)(""),a=Object(d.a)(t,2),c=a[0],s=a[1];return Object(j.g)(),Object(n.useEffect)((function(){var e=_.subscribe((function(){"role"===_.getState()._watcher&&(console.log("===role changed",_.getState().data.operationRole),s(_.getState().data.operationRole))}));return s(_.getState().data.operationRole),function(){e()}}),[]),Object(m.jsxs)(p.a,{className:"p-3",children:[e.tm,Object(m.jsx)(ze,{}),Object(m.jsx)("div",{className:"clearfix p-1 m-0"}),JSON.stringify(_.getState()),"==",c,"==","foodie"===c&&Object(m.jsx)(Se,{}),"supie"===c&&Object(m.jsx)(Le,{})]})};var qe=function(){var e=new ie,t=Object(n.useState)([]),a=Object(d.a)(t,2),c=a[0],s=a[1],r=Object(n.useState)((new Date).getTime()),i=Object(d.a)(r,2),o=i[0],l=i[1];return Object(n.useEffect)((function(){s(e.getList())}),[]),Object(m.jsxs)(p.a,{className:"mt-3 pt-3",children:[Object(m.jsx)(le,{changed:function(){s(e.getList()),l((new Date).getTime())}}),Object(m.jsx)(oe,{operater:"initShoppingCart",caption:"Clean up the cart",className:"text-primary ml-3"}),c.length?c.map((function(e,t){return null===e?"":Object(m.jsxs)("span",{children:[Object(m.jsx)(Ue,{record:e,tm:o}),Object(m.jsx)("br",{})]},t)})):"",c.length?"":Object(m.jsx)(w,{message:"Empty shopping cart!"})]})};var Ue=function(e){var t=new U,a=e.record.code,c=Object(n.useState)({}),s=Object(d.a)(c,2),r=s[0],i=s[1],u=Object(n.useState)(0),j=Object(d.a)(u,2),b=j[0],h=j[1],f=function(){var e=Object(l.a)(o.a.mark((function e(a,n){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promiseIpfsJSON(a);case 2:c=e.sent,n(c);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){f(a,(function(e){i(e),h((new Date).getTime())}))}),[]),Object(m.jsx)(p.a,{fluid:!0,children:Object(m.jsx)(Ve,{rec:r,itemCode:a,version:b})})};var Ve=function(e){var t=Object(n.useState)(e.rec),a=Object(d.a)(t,2),c=a[0],s=a[1],r=Object(n.useState)([]),i=Object(d.a)(r,2),o=i[0],l=i[1],u=Object(n.useState)(""),j=Object(d.a)(u,2),b=(j[0],j[1]),h=e.itemCode,f=function(e){var t=[];["cooking","ingredients","plates"].map((function(a){return(e&&e[a]?e[a]:[]).map((function(e){return t.push(e.text+"; ")})),!0})),b(t.join(" "))},O=function(e){var t=[];["cooking","ingredients","plates"].map((function(a){return(e&&e[a]?e[a]:[]).map((function(e){return(e.photos?e.photos:[]).map((function(e){return e&&e.ipfs&&t.push(e.ipfs),!0})),!0})),!0})),l(t)};return Object(n.useEffect)((function(){s(e.rec),O(e.rec),f(e.rec)}),[]),Object(n.useEffect)((function(){s(e.rec),O(e.rec),f(e.rec)}),[e.version]),c.id&&o[0]?Object(m.jsxs)(p.a,{className:"p-1",fluid:!0,children:[Object(m.jsxs)("div",{className:"float-right p-2 m-1 border rounded right",children:[Object(m.jsx)(oe,{code:h,operater:"minus",className:"text-primary mr-3"}),Object(m.jsx)(oe,{code:h,operater:"showCount",className:"text-primary"}),Object(m.jsx)(oe,{code:h,operater:"plus",className:"text-primary ml-3"}),Object(m.jsx)(oe,{code:h,operater:"remove",className:"text-primary ml-3"}),Object(m.jsx)("br",{}),Object(m.jsx)(oe,{code:h,operater:"showTotal",price:c.price,className:"text-primary"})]}),Object(m.jsx)(p.a,{className:"p-1",fluid:!0,children:Object(m.jsxs)($.a,{children:[Object(m.jsx)(B.a,{xs:1,style:{textAlign:"center"},className:"p-0",children:Object(m.jsx)("div",{className:"border bg-light",children:Object(m.jsx)(Z,{ipfs:o[0],isCache:!0,className:"m-3",style:{maxWidth:"48px",maxHeight:"48px",objectFit:"cover"}})})}),Object(m.jsx)(B.a,{xs:11,className:"p-3",children:c&&c.name}),Object(m.jsx)("br",{})]})}),Object(m.jsx)("div",{className:"clearfix p-0 m-0"})]}):""};function Ye(e){var t=new J,a=Object(n.useState)(""),c=Object(d.a)(a,2),s=c[0],r=c[1],i=Object(n.useState)(""),o=Object(d.a)(i,2),l=o[0],u=o[1],j=Object(n.useState)(""),b=Object(d.a)(j,2),h=b[0],f=b[1],O=Object(n.useState)(!1),x=Object(d.a)(O,2),g=x[0],v=x[1],S=function(){t.loadingOn(),t.DatabaseApi("application",{action:"save",data:{type:"foodie",visitorId:_.getState().fp,address:s,phone:h,description:l}},(function(){t.loadingOff(),v(!0)}))},N=function(e){u(e.target.value)},y=function(e){var t=/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/;t.test(e.target.value)?(e.target.value=e.target.value.replace(t,"($1)$2-$3"),f(e.target.value.replace(t,"($1)$2-$3"))):f("")};Object(n.useEffect)((function(){}),[]);return g?Object(m.jsx)(p.a,{children:Object(m.jsxs)(ue.a,{variant:"success mt-3",children:[Object(m.jsx)(ue.a.Heading,{children:"You application submitted!"}),Object(m.jsx)("span",{children:"You might become a foodie automatically upon our AI valification. or you will be contacted sooner."})]})}):Object(m.jsxs)(p.a,{className:"mb-3 pb-3",children:[Object(m.jsxs)(ue.a,{variant:"secondary mt-3",children:[Object(m.jsx)(ue.a.Heading,{children:"If you have the Foodie role:"}),Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{children:"You can be a housewife who wants to share her cooking hobby with neighbours, while making a side income. Foodie can be a restaurant owner, to extend their business objectives. "}),Object(m.jsx)("li",{children:"You needs to provide a real address (not PO box), can create receipts, and contact supplies. "}),Object(m.jsx)("li",{children:"You drives the following workflow: create receipt -> contact supplier and confirm the plate -> publish the plate to \u201cmenu\u201d"}),Object(m.jsx)("li",{children:"You authentication requires a barcode provided by DishFoo via mail. Once the barcode is scanned, then Foodie can publish the plate to the menu."})]})]}),Object(m.jsxs)(Y.a,{children:[Object(m.jsxs)(Y.a.Group,{children:[Object(m.jsxs)(Y.a.Label,{children:[Object(m.jsx)("b",{children:"Foodie Address:"})," ",Object(m.jsx)("span",{className:"form_notice_info",children:"* Required"})]}),Object(m.jsx)(W,{passAddress:r,defaultValue:s})]}),Object(m.jsxs)(Y.a.Group,{children:[Object(m.jsxs)(Y.a.Label,{children:[Object(m.jsx)("b",{children:"Application Description:"})," ",Object(m.jsx)("span",{className:"form_notice_info",children:"(Option)"})," "]}),Object(m.jsx)(Y.a.Control,{defaultValue:l,placeholder:"Input Description",as:"textarea",rows:"3",onChange:N})]}),Object(m.jsxs)(Y.a.Group,{children:[Object(m.jsxs)(Y.a.Label,{children:[Object(m.jsx)("b",{children:"Contact Phone:"})," ",Object(m.jsx)("span",{className:"form_notice_info",children:"(Option)"})]}),Object(m.jsx)(Y.a.Control,{defaultValue:h,placeholder:"Input Contact Phone",as:"textarea",rows:"1",onChange:y})]}),Object(m.jsxs)(ce.a,{className:"btn btn-info m-0 mr-3",disabled:!s,onClick:S,children:[Object(m.jsx)(te.a,{size:"1x",icon:ae.k,className:"m-0"})," Submit"]})]})]})}function $e(e){var t=new J,a=Object(n.useState)(""),c=Object(d.a)(a,2),s=c[0],r=c[1],i=Object(n.useState)(""),o=Object(d.a)(i,2),l=o[0],u=o[1],j=Object(n.useState)(""),b=Object(d.a)(j,2),h=b[0],f=b[1],O=Object(n.useState)(""),x=Object(d.a)(O,2),g=x[0],v=x[1],S=Object(n.useState)(!1),N=Object(d.a)(S,2),y=N[0],w=N[1],C=function(){t.loadingOn(),t.DatabaseApi("application",{action:"save",data:{type:"supie",visitorId:_.getState().fp,address:s,phone:g,qualification:l,description:h}},(function(){t.loadingOff(),w(!0)}))},I=function(e){u(e.target.value)},k=function(e){f(e.target.value)},D=function(e){var t=/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/;t.test(e.target.value)?(e.target.value=e.target.value.replace(t,"($1)$2-$3"),v(e.target.value.replace(t,"($1)$2-$3"))):v("")};Object(n.useEffect)((function(){}),[]);return y?Object(m.jsx)(p.a,{children:Object(m.jsxs)(ue.a,{variant:"success mt-3",children:[Object(m.jsx)(ue.a.Heading,{children:"You application submitted!"}),Object(m.jsx)("span",{children:"You might become a supie automatically upon our AI valification. or you will be contacted sooner."})]})}):Object(m.jsxs)(p.a,{className:"mb-3 pb-3",children:[Object(m.jsxs)(ue.a,{variant:"secondary mt-3",children:[Object(m.jsx)(ue.a.Heading,{children:"If you have the Supie role"}),Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{children:"You can be grocery stores, farms or restaurants."}),Object(m.jsx)("li",{children:"You can make plate based on receipt and send back to Foodie for validation."}),Object(m.jsx)("li",{children:" You needs to provide a real address (not PD box), can view the receipts from Foodie."})]})]}),Object(m.jsxs)(Y.a,{children:[Object(m.jsxs)(Y.a.Group,{children:[Object(m.jsxs)(Y.a.Label,{children:[Object(m.jsx)("b",{children:"Supie Address:"})," ",Object(m.jsx)("span",{className:"form_notice_info",children:"* Required"})]}),Object(m.jsx)(W,{passAddress:r,defaultValue:s})]}),Object(m.jsxs)(Y.a.Group,{children:[Object(m.jsxs)(Y.a.Label,{children:[Object(m.jsx)("b",{children:"Contact Phone:"})," ",Object(m.jsx)("span",{className:"form_notice_info",children:"* Required"})]}),Object(m.jsx)(Y.a.Control,{defaultValue:g,placeholder:"Input Contact Phone",as:"textarea",rows:"1",onChange:D})]}),Object(m.jsxs)(Y.a.Group,{children:[Object(m.jsxs)(Y.a.Label,{children:[Object(m.jsx)("b",{children:"Your Qualification:"})," ",Object(m.jsx)("span",{className:"form_notice_info",children:"* Required"})]}),Object(m.jsx)(Y.a.Control,{defaultValue:l,placeholder:"Input Qualification",as:"textarea",rows:"1",onChange:I})]}),Object(m.jsxs)(Y.a.Group,{children:[Object(m.jsxs)(Y.a.Label,{children:[Object(m.jsx)("b",{children:"Application Description:"})," ",Object(m.jsx)("span",{className:"form_notice_info",children:"(Option)"})," "]}),Object(m.jsx)(Y.a.Control,{defaultValue:h,placeholder:"Input Description",as:"textarea",rows:"3",onChange:k})]}),Object(m.jsxs)(ce.a,{className:"btn btn-info m-0 mr-3",disabled:!(g&&s&&l),onClick:C,children:[Object(m.jsx)(te.a,{size:"1x",icon:ae.c,className:"m-0"})," Submit"]})]})]})}var Be=function(e){return Object(n.useEffect)((function(){}),[]),Object(m.jsx)(p.a,{fluid:!0,className:"m-0 p-0",children:Object(m.jsxs)(j.c,{children:[Object(m.jsx)(j.a,{exact:!0,path:"/workshop",children:Object(m.jsx)(z,{roles:["foodie","supie"],comp:Object(m.jsx)(Me,{}),showException:!1})}),Object(m.jsxs)(j.a,{exact:!0,path:"/community",children:[Object(m.jsx)(Ee,{}),Object(m.jsx)(z,{roles:[["foodie","supie"]],comp:Object(m.jsx)(Ee,{}),showException:!1})]}),Object(m.jsx)(j.a,{exact:!0,path:"/orders",children:Object(m.jsx)(qe,{})}),Object(m.jsx)(j.a,{exact:!0,path:"/auth",children:Object(m.jsx)(fe,{})}),Object(m.jsx)(j.a,{exact:!0,path:"/editRecipe/:id",children:Object(m.jsx)(we,{})}),Object(m.jsx)(j.a,{exact:!0,path:"/editRecipe/:recipeCode/:id",children:Object(m.jsx)(we,{})}),Object(m.jsx)(j.a,{exact:!0,path:"/communityResponse/:publishCode",children:Object(m.jsx)(_e,{})}),Object(m.jsx)(j.a,{exact:!0,path:"/editPlate/:recipeCode/:id",children:Object(m.jsx)(Je,{})}),Object(m.jsx)(j.a,{exact:!0,path:"/becomeFoodie",children:Object(m.jsx)(z,{roles:["all"],exroles:["foodie"],comp:Object(m.jsx)(Ye,{}),showException:!1})}),Object(m.jsx)(j.a,{exact:!0,path:"/becomeSupie",children:Object(m.jsx)(z,{roles:["all"],exroles:["supie"],comp:Object(m.jsx)($e,{}),showException:!1})}),Object(m.jsx)(j.a,{exact:!0,path:"/about",children:Object(m.jsx)(De,{})}),Object(m.jsx)(j.a,{exact:!0,path:"/contact",children:Object(m.jsx)(Ae,{})}),Object(m.jsx)(j.a,{exact:!0,path:"/",children:Object(m.jsx)(Te,{})}),Object(m.jsx)(j.a,{exact:!0,path:"/menus",children:Object(m.jsx)(ke,{})}),Object(m.jsx)(j.a,{exact:!0,path:"/setting",children:Object(m.jsx)(Ce,{})}),Object(m.jsx)(j.a,{path:"/:title",children:Object(m.jsx)(p.a,{fluid:"true",className:"p-3 content-body",children:Object(m.jsx)(Re,{})})})]})})},Ge=(a(158),a(37)),He=(a(159),function(e){var t=new V,a=Object(n.useState)(!1),c=Object(d.a)(a,2),s=c[0],r=c[1],i={isDesktopOrLaptop:Object(Ge.useMediaQuery)({query:"(min-width: 1224px)"}),isBigScreen:Object(Ge.useMediaQuery)({query:"(min-width: 1824px)"}),isTabletOrMobile:Object(Ge.useMediaQuery)({query:"(max-width: 1224px)"}),isPortrait:Object(Ge.useMediaQuery)({query:"(orientation: portrait)"}),isRetina:Object(Ge.useMediaQuery)({query:"(min-resolution: 2dppx)"})};Object(n.useEffect)((function(){var e=_.subscribe((function(){return"afterInit"===_.getState()._watcher&&r(!0),!1}));return Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=console,e.next=3,t.load();case 3:e.t1=e.sent,e.t0.log.call(e.t0,e.t1);case 5:case"end":return e.stop()}}),e)})))(),setTimeout((function(){console.log("==fp.visitorId==",t.visitorId),_.getState().fp=t.visitorId,console.log(_.getState().fp)}),1e3),_.dispatch({type:"loadScreenModel",screenModel:i}),function(){e()}}),[]),console.log("called localStorage.clear()");var b=Object(m.jsx)(Q,{comp:Object(m.jsx)(L.a,{animation:"border",size:"md",className:"loading-text"})}),p=Object(m.jsx)(u.a,{className:"p-0 m-0",children:Object(m.jsxs)(j.c,{children:[Object(m.jsx)(j.a,{exact:!0,path:"/MobileAuth/:SocketID",children:Object(m.jsx)(me,{})}),Object(m.jsx)(j.a,{exact:!0,path:"/ScanSignin/:RequestID",children:Object(m.jsx)(xe,{})}),Object(m.jsx)(j.a,{exact:!0,path:"/InfoCatch/:InfoCode",children:Object(m.jsx)(Oe,{})}),Object(m.jsxs)(j.a,{children:[Object(m.jsx)(ge,{}),Object(m.jsx)(F,{}),Object(m.jsx)(Be,{}),Object(m.jsx)(ve,{})]})]})});return s?p:b}),We=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,173)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),s(e),r(e)}))};document._cacheExist=!0,r.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(He,{})}),document.getElementById("root")),We()},94:function(e,t,a){}},[[160,1,2]]]);
//# sourceMappingURL=main.7932e8f7.chunk.js.map